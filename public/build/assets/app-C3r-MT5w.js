function L0(i,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in i)){const u=Object.getOwnPropertyDescriptor(o,l);u&&Object.defineProperty(i,l,u.get?u:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}var Ct="top",Vt="bottom",Wt="right",_t="left",Mo="auto",Or=[Ct,Vt,Wt,_t],zi="start",wr="end",qh="clippingParents",Bl="viewport",gr="popper",Kh="reference",nl=Or.reduce(function(i,e){return i.concat([e+"-"+zi,e+"-"+wr])},[]),kl=[].concat(Or,[Mo]).reduce(function(i,e){return i.concat([e,e+"-"+zi,e+"-"+wr])},[]),Zh="beforeRead",Qh="read",Jh="afterRead",ef="beforeMain",tf="main",nf="afterMain",rf="beforeWrite",sf="write",of="afterWrite",af=[Zh,Qh,Jh,ef,tf,nf,rf,sf,of];function Ln(i){return i?(i.nodeName||"").toLowerCase():null}function Yt(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function ji(i){var e=Yt(i).Element;return i instanceof e||i instanceof Element}function an(i){var e=Yt(i).HTMLElement;return i instanceof e||i instanceof HTMLElement}function Fl(i){if(typeof ShadowRoot>"u")return!1;var e=Yt(i).ShadowRoot;return i instanceof e||i instanceof ShadowRoot}function P0(i){var e=i.state;Object.keys(e.elements).forEach(function(n){var o=e.styles[n]||{},l=e.attributes[n]||{},u=e.elements[n];!an(u)||!Ln(u)||(Object.assign(u.style,o),Object.keys(l).forEach(function(f){var p=l[f];p===!1?u.removeAttribute(f):u.setAttribute(f,p===!0?"":p)}))})}function B0(i){var e=i.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(o){var l=e.elements[o],u=e.attributes[o]||{},f=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:n[o]),p=f.reduce(function(E,m){return E[m]="",E},{});!an(l)||!Ln(l)||(Object.assign(l.style,p),Object.keys(u).forEach(function(E){l.removeAttribute(E)}))})}}const Ul={name:"applyStyles",enabled:!0,phase:"write",fn:P0,effect:B0,requires:["computeStyles"]};function Dn(i){return i.split("-")[0]}var Ri=Math.max,mo=Math.min,yr=Math.round;function il(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function lf(){return!/^((?!chrome|android).)*safari/i.test(il())}function Ar(i,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var o=i.getBoundingClientRect(),l=1,u=1;e&&an(i)&&(l=i.offsetWidth>0&&yr(o.width)/i.offsetWidth||1,u=i.offsetHeight>0&&yr(o.height)/i.offsetHeight||1);var f=ji(i)?Yt(i):window,p=f.visualViewport,E=!lf()&&n,m=(o.left+(E&&p?p.offsetLeft:0))/l,b=(o.top+(E&&p?p.offsetTop:0))/u,y=o.width/l,S=o.height/u;return{width:y,height:S,top:b,right:m+y,bottom:b+S,left:m,x:m,y:b}}function zl(i){var e=Ar(i),n=i.offsetWidth,o=i.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:i.offsetLeft,y:i.offsetTop,width:n,height:o}}function cf(i,e){var n=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(n&&Fl(n)){var o=e;do{if(o&&i.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Vn(i){return Yt(i).getComputedStyle(i)}function k0(i){return["table","td","th"].indexOf(Ln(i))>=0}function hi(i){return((ji(i)?i.ownerDocument:i.document)||window.document).documentElement}function Do(i){return Ln(i)==="html"?i:i.assignedSlot||i.parentNode||(Fl(i)?i.host:null)||hi(i)}function Gc(i){return!an(i)||Vn(i).position==="fixed"?null:i.offsetParent}function F0(i){var e=/firefox/i.test(il()),n=/Trident/i.test(il());if(n&&an(i)){var o=Vn(i);if(o.position==="fixed")return null}var l=Do(i);for(Fl(l)&&(l=l.host);an(l)&&["html","body"].indexOf(Ln(l))<0;){var u=Vn(l);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||e&&u.willChange==="filter"||e&&u.filter&&u.filter!=="none")return l;l=l.parentNode}return null}function ms(i){for(var e=Yt(i),n=Gc(i);n&&k0(n)&&Vn(n).position==="static";)n=Gc(n);return n&&(Ln(n)==="html"||Ln(n)==="body"&&Vn(n).position==="static")?e:n||F0(i)||e}function jl(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function ls(i,e,n){return Ri(i,mo(e,n))}function U0(i,e,n){var o=ls(i,e,n);return o>n?n:o}function uf(){return{top:0,right:0,bottom:0,left:0}}function hf(i){return Object.assign({},uf(),i)}function ff(i,e){return e.reduce(function(n,o){return n[o]=i,n},{})}var z0=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,hf(typeof e!="number"?e:ff(e,Or))};function j0(i){var e,n=i.state,o=i.name,l=i.options,u=n.elements.arrow,f=n.modifiersData.popperOffsets,p=Dn(n.placement),E=jl(p),m=[_t,Wt].indexOf(p)>=0,b=m?"height":"width";if(!(!u||!f)){var y=z0(l.padding,n),S=zl(u),v=E==="y"?Ct:_t,N=E==="y"?Vt:Wt,M=n.rects.reference[b]+n.rects.reference[E]-f[E]-n.rects.popper[b],O=f[E]-n.rects.reference[E],L=ms(u),k=L?E==="y"?L.clientHeight||0:L.clientWidth||0:0,F=M/2-O/2,W=y[v],ee=k-S[b]-y[N],Z=k/2-S[b]/2+F,j=ls(W,Z,ee),ie=E;n.modifiersData[o]=(e={},e[ie]=j,e.centerOffset=j-Z,e)}}function H0(i){var e=i.state,n=i.options,o=n.element,l=o===void 0?"[data-popper-arrow]":o;l!=null&&(typeof l=="string"&&(l=e.elements.popper.querySelector(l),!l)||cf(e.elements.popper,l)&&(e.elements.arrow=l))}const df={name:"arrow",enabled:!0,phase:"main",fn:j0,effect:H0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cr(i){return i.split("-")[1]}var V0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function W0(i,e){var n=i.x,o=i.y,l=e.devicePixelRatio||1;return{x:yr(n*l)/l||0,y:yr(o*l)/l||0}}function $c(i){var e,n=i.popper,o=i.popperRect,l=i.placement,u=i.variation,f=i.offsets,p=i.position,E=i.gpuAcceleration,m=i.adaptive,b=i.roundOffsets,y=i.isFixed,S=f.x,v=S===void 0?0:S,N=f.y,M=N===void 0?0:N,O=typeof b=="function"?b({x:v,y:M}):{x:v,y:M};v=O.x,M=O.y;var L=f.hasOwnProperty("x"),k=f.hasOwnProperty("y"),F=_t,W=Ct,ee=window;if(m){var Z=ms(n),j="clientHeight",ie="clientWidth";if(Z===Yt(n)&&(Z=hi(n),Vn(Z).position!=="static"&&p==="absolute"&&(j="scrollHeight",ie="scrollWidth")),Z=Z,l===Ct||(l===_t||l===Wt)&&u===wr){W=Vt;var Y=y&&Z===ee&&ee.visualViewport?ee.visualViewport.height:Z[j];M-=Y-o.height,M*=E?1:-1}if(l===_t||(l===Ct||l===Vt)&&u===wr){F=Wt;var Me=y&&Z===ee&&ee.visualViewport?ee.visualViewport.width:Z[ie];v-=Me-o.width,v*=E?1:-1}}var Ce=Object.assign({position:p},m&&V0),se=b===!0?W0({x:v,y:M},Yt(n)):{x:v,y:M};if(v=se.x,M=se.y,E){var oe;return Object.assign({},Ce,(oe={},oe[W]=k?"0":"",oe[F]=L?"0":"",oe.transform=(ee.devicePixelRatio||1)<=1?"translate("+v+"px, "+M+"px)":"translate3d("+v+"px, "+M+"px, 0)",oe))}return Object.assign({},Ce,(e={},e[W]=k?M+"px":"",e[F]=L?v+"px":"",e.transform="",e))}function Y0(i){var e=i.state,n=i.options,o=n.gpuAcceleration,l=o===void 0?!0:o,u=n.adaptive,f=u===void 0?!0:u,p=n.roundOffsets,E=p===void 0?!0:p,m={placement:Dn(e.placement),variation:Cr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:l,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,$c(Object.assign({},m,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:f,roundOffsets:E})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,$c(Object.assign({},m,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:E})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Hl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Y0,data:{}};var Bs={passive:!0};function X0(i){var e=i.state,n=i.instance,o=i.options,l=o.scroll,u=l===void 0?!0:l,f=o.resize,p=f===void 0?!0:f,E=Yt(e.elements.popper),m=[].concat(e.scrollParents.reference,e.scrollParents.popper);return u&&m.forEach(function(b){b.addEventListener("scroll",n.update,Bs)}),p&&E.addEventListener("resize",n.update,Bs),function(){u&&m.forEach(function(b){b.removeEventListener("scroll",n.update,Bs)}),p&&E.removeEventListener("resize",n.update,Bs)}}const Vl={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:X0,data:{}};var G0={left:"right",right:"left",bottom:"top",top:"bottom"};function ao(i){return i.replace(/left|right|bottom|top/g,function(e){return G0[e]})}var $0={start:"end",end:"start"};function qc(i){return i.replace(/start|end/g,function(e){return $0[e]})}function Wl(i){var e=Yt(i),n=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:n,scrollTop:o}}function Yl(i){return Ar(hi(i)).left+Wl(i).scrollLeft}function q0(i,e){var n=Yt(i),o=hi(i),l=n.visualViewport,u=o.clientWidth,f=o.clientHeight,p=0,E=0;if(l){u=l.width,f=l.height;var m=lf();(m||!m&&e==="fixed")&&(p=l.offsetLeft,E=l.offsetTop)}return{width:u,height:f,x:p+Yl(i),y:E}}function K0(i){var e,n=hi(i),o=Wl(i),l=(e=i.ownerDocument)==null?void 0:e.body,u=Ri(n.scrollWidth,n.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),f=Ri(n.scrollHeight,n.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),p=-o.scrollLeft+Yl(i),E=-o.scrollTop;return Vn(l||n).direction==="rtl"&&(p+=Ri(n.clientWidth,l?l.clientWidth:0)-u),{width:u,height:f,x:p,y:E}}function Xl(i){var e=Vn(i),n=e.overflow,o=e.overflowX,l=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+l+o)}function gf(i){return["html","body","#document"].indexOf(Ln(i))>=0?i.ownerDocument.body:an(i)&&Xl(i)?i:gf(Do(i))}function cs(i,e){var n;e===void 0&&(e=[]);var o=gf(i),l=o===((n=i.ownerDocument)==null?void 0:n.body),u=Yt(o),f=l?[u].concat(u.visualViewport||[],Xl(o)?o:[]):o,p=e.concat(f);return l?p:p.concat(cs(Do(f)))}function rl(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Z0(i,e){var n=Ar(i,!1,e==="fixed");return n.top=n.top+i.clientTop,n.left=n.left+i.clientLeft,n.bottom=n.top+i.clientHeight,n.right=n.left+i.clientWidth,n.width=i.clientWidth,n.height=i.clientHeight,n.x=n.left,n.y=n.top,n}function Kc(i,e,n){return e===Bl?rl(q0(i,n)):ji(e)?Z0(e,n):rl(K0(hi(i)))}function Q0(i){var e=cs(Do(i)),n=["absolute","fixed"].indexOf(Vn(i).position)>=0,o=n&&an(i)?ms(i):i;return ji(o)?e.filter(function(l){return ji(l)&&cf(l,o)&&Ln(l)!=="body"}):[]}function J0(i,e,n,o){var l=e==="clippingParents"?Q0(i):[].concat(e),u=[].concat(l,[n]),f=u[0],p=u.reduce(function(E,m){var b=Kc(i,m,o);return E.top=Ri(b.top,E.top),E.right=mo(b.right,E.right),E.bottom=mo(b.bottom,E.bottom),E.left=Ri(b.left,E.left),E},Kc(i,f,o));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function pf(i){var e=i.reference,n=i.element,o=i.placement,l=o?Dn(o):null,u=o?Cr(o):null,f=e.x+e.width/2-n.width/2,p=e.y+e.height/2-n.height/2,E;switch(l){case Ct:E={x:f,y:e.y-n.height};break;case Vt:E={x:f,y:e.y+e.height};break;case Wt:E={x:e.x+e.width,y:p};break;case _t:E={x:e.x-n.width,y:p};break;default:E={x:e.x,y:e.y}}var m=l?jl(l):null;if(m!=null){var b=m==="y"?"height":"width";switch(u){case zi:E[m]=E[m]-(e[b]/2-n[b]/2);break;case wr:E[m]=E[m]+(e[b]/2-n[b]/2);break}}return E}function _r(i,e){e===void 0&&(e={});var n=e,o=n.placement,l=o===void 0?i.placement:o,u=n.strategy,f=u===void 0?i.strategy:u,p=n.boundary,E=p===void 0?qh:p,m=n.rootBoundary,b=m===void 0?Bl:m,y=n.elementContext,S=y===void 0?gr:y,v=n.altBoundary,N=v===void 0?!1:v,M=n.padding,O=M===void 0?0:M,L=hf(typeof O!="number"?O:ff(O,Or)),k=S===gr?Kh:gr,F=i.rects.popper,W=i.elements[N?k:S],ee=J0(ji(W)?W:W.contextElement||hi(i.elements.popper),E,b,f),Z=Ar(i.elements.reference),j=pf({reference:Z,element:F,placement:l}),ie=rl(Object.assign({},F,j)),Y=S===gr?ie:Z,Me={top:ee.top-Y.top+L.top,bottom:Y.bottom-ee.bottom+L.bottom,left:ee.left-Y.left+L.left,right:Y.right-ee.right+L.right},Ce=i.modifiersData.offset;if(S===gr&&Ce){var se=Ce[l];Object.keys(Me).forEach(function(oe){var we=[Wt,Vt].indexOf(oe)>=0?1:-1,H=[Ct,Vt].indexOf(oe)>=0?"y":"x";Me[oe]+=se[H]*we})}return Me}function eg(i,e){e===void 0&&(e={});var n=e,o=n.placement,l=n.boundary,u=n.rootBoundary,f=n.padding,p=n.flipVariations,E=n.allowedAutoPlacements,m=E===void 0?kl:E,b=Cr(o),y=b?p?nl:nl.filter(function(N){return Cr(N)===b}):Or,S=y.filter(function(N){return m.indexOf(N)>=0});S.length===0&&(S=y);var v=S.reduce(function(N,M){return N[M]=_r(i,{placement:M,boundary:l,rootBoundary:u,padding:f})[Dn(M)],N},{});return Object.keys(v).sort(function(N,M){return v[N]-v[M]})}function tg(i){if(Dn(i)===Mo)return[];var e=ao(i);return[qc(i),e,qc(e)]}function ng(i){var e=i.state,n=i.options,o=i.name;if(!e.modifiersData[o]._skip){for(var l=n.mainAxis,u=l===void 0?!0:l,f=n.altAxis,p=f===void 0?!0:f,E=n.fallbackPlacements,m=n.padding,b=n.boundary,y=n.rootBoundary,S=n.altBoundary,v=n.flipVariations,N=v===void 0?!0:v,M=n.allowedAutoPlacements,O=e.options.placement,L=Dn(O),k=L===O,F=E||(k||!N?[ao(O)]:tg(O)),W=[O].concat(F).reduce(function($e,$t){return $e.concat(Dn($t)===Mo?eg(e,{placement:$t,boundary:b,rootBoundary:y,padding:m,flipVariations:N,allowedAutoPlacements:M}):$t)},[]),ee=e.rects.reference,Z=e.rects.popper,j=new Map,ie=!0,Y=W[0],Me=0;Me<W.length;Me++){var Ce=W[Me],se=Dn(Ce),oe=Cr(Ce)===zi,we=[Ct,Vt].indexOf(se)>=0,H=we?"width":"height",_e=_r(e,{placement:Ce,boundary:b,rootBoundary:y,altBoundary:S,padding:m}),ue=we?oe?Wt:_t:oe?Vt:Ct;ee[H]>Z[H]&&(ue=ao(ue));var Xt=ao(ue),ot=[];if(u&&ot.push(_e[se]<=0),p&&ot.push(_e[ue]<=0,_e[Xt]<=0),ot.every(function($e){return $e})){Y=Ce,ie=!1;break}j.set(Ce,ot)}if(ie)for(var Bt=N?3:1,$i=function($t){var le=W.find(function(Xn){var ze=j.get(Xn);if(ze)return ze.slice(0,$t).every(function(Pn){return Pn})});if(le)return Y=le,"break"},Je=Bt;Je>0;Je--){var Gt=$i(Je);if(Gt==="break")break}e.placement!==Y&&(e.modifiersData[o]._skip=!0,e.placement=Y,e.reset=!0)}}const mf={name:"flip",enabled:!0,phase:"main",fn:ng,requiresIfExists:["offset"],data:{_skip:!1}};function Zc(i,e,n){return n===void 0&&(n={x:0,y:0}),{top:i.top-e.height-n.y,right:i.right-e.width+n.x,bottom:i.bottom-e.height+n.y,left:i.left-e.width-n.x}}function Qc(i){return[Ct,Wt,Vt,_t].some(function(e){return i[e]>=0})}function ig(i){var e=i.state,n=i.name,o=e.rects.reference,l=e.rects.popper,u=e.modifiersData.preventOverflow,f=_r(e,{elementContext:"reference"}),p=_r(e,{altBoundary:!0}),E=Zc(f,o),m=Zc(p,l,u),b=Qc(E),y=Qc(m);e.modifiersData[n]={referenceClippingOffsets:E,popperEscapeOffsets:m,isReferenceHidden:b,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":b,"data-popper-escaped":y})}const xf={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ig};function rg(i,e,n){var o=Dn(i),l=[_t,Ct].indexOf(o)>=0?-1:1,u=typeof n=="function"?n(Object.assign({},e,{placement:i})):n,f=u[0],p=u[1];return f=f||0,p=(p||0)*l,[_t,Wt].indexOf(o)>=0?{x:p,y:f}:{x:f,y:p}}function sg(i){var e=i.state,n=i.options,o=i.name,l=n.offset,u=l===void 0?[0,0]:l,f=kl.reduce(function(b,y){return b[y]=rg(y,e.rects,u),b},{}),p=f[e.placement],E=p.x,m=p.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=E,e.modifiersData.popperOffsets.y+=m),e.modifiersData[o]=f}const Ef={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sg};function og(i){var e=i.state,n=i.name;e.modifiersData[n]=pf({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Gl={name:"popperOffsets",enabled:!0,phase:"read",fn:og,data:{}};function ag(i){return i==="x"?"y":"x"}function lg(i){var e=i.state,n=i.options,o=i.name,l=n.mainAxis,u=l===void 0?!0:l,f=n.altAxis,p=f===void 0?!1:f,E=n.boundary,m=n.rootBoundary,b=n.altBoundary,y=n.padding,S=n.tether,v=S===void 0?!0:S,N=n.tetherOffset,M=N===void 0?0:N,O=_r(e,{boundary:E,rootBoundary:m,padding:y,altBoundary:b}),L=Dn(e.placement),k=Cr(e.placement),F=!k,W=jl(L),ee=ag(W),Z=e.modifiersData.popperOffsets,j=e.rects.reference,ie=e.rects.popper,Y=typeof M=="function"?M(Object.assign({},e.rects,{placement:e.placement})):M,Me=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),Ce=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,se={x:0,y:0};if(Z){if(u){var oe,we=W==="y"?Ct:_t,H=W==="y"?Vt:Wt,_e=W==="y"?"height":"width",ue=Z[W],Xt=ue+O[we],ot=ue-O[H],Bt=v?-ie[_e]/2:0,$i=k===zi?j[_e]:ie[_e],Je=k===zi?-ie[_e]:-j[_e],Gt=e.elements.arrow,$e=v&&Gt?zl(Gt):{width:0,height:0},$t=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:uf(),le=$t[we],Xn=$t[H],ze=ls(0,j[_e],$e[_e]),Pn=F?j[_e]/2-Bt-ze-le-Me.mainAxis:$i-ze-le-Me.mainAxis,pi=F?-j[_e]/2+Bt+ze+Xn+Me.mainAxis:Je+ze+Xn+Me.mainAxis,ut=e.elements.arrow&&ms(e.elements.arrow),qi=ut?W==="y"?ut.clientTop||0:ut.clientLeft||0:0,ve=(oe=Ce==null?void 0:Ce[W])!=null?oe:0,Gn=ue+Pn-ve-qi,qt=ue+pi-ve,$n=ls(v?mo(Xt,Gn):Xt,ue,v?Ri(ot,qt):ot);Z[W]=$n,se[W]=$n-ue}if(p){var nt,Pe=W==="x"?Ct:_t,ye=W==="x"?Vt:Wt,Kt=Z[ee],re=ee==="y"?"height":"width",mi=Kt+O[Pe],zr=Kt-O[ye],kt=[Ct,_t].indexOf(L)!==-1,Ki=(nt=Ce==null?void 0:Ce[ee])!=null?nt:0,St=kt?mi:Kt-j[re]-ie[re]-Ki+Me.altAxis,jr=kt?Kt+j[re]+ie[re]-Ki-Me.altAxis:zr,hn=v&&kt?U0(St,Kt,jr):ls(v?St:mi,Kt,v?jr:zr);Z[ee]=hn,se[ee]=hn-Kt}e.modifiersData[o]=se}}const bf={name:"preventOverflow",enabled:!0,phase:"main",fn:lg,requiresIfExists:["offset"]};function cg(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function ug(i){return i===Yt(i)||!an(i)?Wl(i):cg(i)}function hg(i){var e=i.getBoundingClientRect(),n=yr(e.width)/i.offsetWidth||1,o=yr(e.height)/i.offsetHeight||1;return n!==1||o!==1}function fg(i,e,n){n===void 0&&(n=!1);var o=an(e),l=an(e)&&hg(e),u=hi(e),f=Ar(i,l,n),p={scrollLeft:0,scrollTop:0},E={x:0,y:0};return(o||!o&&!n)&&((Ln(e)!=="body"||Xl(u))&&(p=ug(e)),an(e)?(E=Ar(e,!0),E.x+=e.clientLeft,E.y+=e.clientTop):u&&(E.x=Yl(u))),{x:f.left+p.scrollLeft-E.x,y:f.top+p.scrollTop-E.y,width:f.width,height:f.height}}function dg(i){var e=new Map,n=new Set,o=[];i.forEach(function(u){e.set(u.name,u)});function l(u){n.add(u.name);var f=[].concat(u.requires||[],u.requiresIfExists||[]);f.forEach(function(p){if(!n.has(p)){var E=e.get(p);E&&l(E)}}),o.push(u)}return i.forEach(function(u){n.has(u.name)||l(u)}),o}function gg(i){var e=dg(i);return af.reduce(function(n,o){return n.concat(e.filter(function(l){return l.phase===o}))},[])}function pg(i){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(i())})})),e}}function mg(i){var e=i.reduce(function(n,o){var l=n[o.name];return n[o.name]=l?Object.assign({},l,o,{options:Object.assign({},l.options,o.options),data:Object.assign({},l.data,o.data)}):o,n},{});return Object.keys(e).map(function(n){return e[n]})}var Jc={placement:"bottom",modifiers:[],strategy:"absolute"};function eu(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function Ro(i){i===void 0&&(i={});var e=i,n=e.defaultModifiers,o=n===void 0?[]:n,l=e.defaultOptions,u=l===void 0?Jc:l;return function(p,E,m){m===void 0&&(m=u);var b={placement:"bottom",orderedModifiers:[],options:Object.assign({},Jc,u),modifiersData:{},elements:{reference:p,popper:E},attributes:{},styles:{}},y=[],S=!1,v={state:b,setOptions:function(L){var k=typeof L=="function"?L(b.options):L;M(),b.options=Object.assign({},u,b.options,k),b.scrollParents={reference:ji(p)?cs(p):p.contextElement?cs(p.contextElement):[],popper:cs(E)};var F=gg(mg([].concat(o,b.options.modifiers)));return b.orderedModifiers=F.filter(function(W){return W.enabled}),N(),v.update()},forceUpdate:function(){if(!S){var L=b.elements,k=L.reference,F=L.popper;if(eu(k,F)){b.rects={reference:fg(k,ms(F),b.options.strategy==="fixed"),popper:zl(F)},b.reset=!1,b.placement=b.options.placement,b.orderedModifiers.forEach(function(Me){return b.modifiersData[Me.name]=Object.assign({},Me.data)});for(var W=0;W<b.orderedModifiers.length;W++){if(b.reset===!0){b.reset=!1,W=-1;continue}var ee=b.orderedModifiers[W],Z=ee.fn,j=ee.options,ie=j===void 0?{}:j,Y=ee.name;typeof Z=="function"&&(b=Z({state:b,options:ie,name:Y,instance:v})||b)}}}},update:pg(function(){return new Promise(function(O){v.forceUpdate(),O(b)})}),destroy:function(){M(),S=!0}};if(!eu(p,E))return v;v.setOptions(m).then(function(O){!S&&m.onFirstUpdate&&m.onFirstUpdate(O)});function N(){b.orderedModifiers.forEach(function(O){var L=O.name,k=O.options,F=k===void 0?{}:k,W=O.effect;if(typeof W=="function"){var ee=W({state:b,name:L,instance:v,options:F}),Z=function(){};y.push(ee||Z)}})}function M(){y.forEach(function(O){return O()}),y=[]}return v}}var xg=Ro(),Eg=[Vl,Gl,Hl,Ul],bg=Ro({defaultModifiers:Eg}),wg=[Vl,Gl,Hl,Ul,Ef,mf,bf,df,xf],$l=Ro({defaultModifiers:wg});const wf=Object.freeze(Object.defineProperty({__proto__:null,afterMain:nf,afterRead:Jh,afterWrite:of,applyStyles:Ul,arrow:df,auto:Mo,basePlacements:Or,beforeMain:ef,beforeRead:Zh,beforeWrite:rf,bottom:Vt,clippingParents:qh,computeStyles:Hl,createPopper:$l,createPopperBase:xg,createPopperLite:bg,detectOverflow:_r,end:wr,eventListeners:Vl,flip:mf,hide:xf,left:_t,main:tf,modifierPhases:af,offset:Ef,placements:kl,popper:gr,popperGenerator:Ro,popperOffsets:Gl,preventOverflow:bf,read:Qh,reference:Kh,right:Wt,start:zi,top:Ct,variationPlacements:nl,viewport:Bl,write:sf},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.5 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const ti=new Map,xa={set(i,e,n){ti.has(i)||ti.set(i,new Map);const o=ti.get(i);if(!o.has(e)&&o.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(o.keys())[0]}.`);return}o.set(e,n)},get(i,e){return ti.has(i)&&ti.get(i).get(e)||null},remove(i,e){if(!ti.has(i))return;const n=ti.get(i);n.delete(e),n.size===0&&ti.delete(i)}},yg=1e6,Ag=1e3,sl="transitionend",yf=i=>(i&&window.CSS&&window.CSS.escape&&(i=i.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),i),Cg=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),_g=i=>{do i+=Math.floor(Math.random()*yg);while(document.getElementById(i));return i},vg=i=>{if(!i)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(i);const o=Number.parseFloat(e),l=Number.parseFloat(n);return!o&&!l?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*Ag)},Af=i=>{i.dispatchEvent(new Event(sl))},zn=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),si=i=>zn(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(yf(i)):null,Nr=i=>{if(!zn(i)||i.getClientRects().length===0)return!1;const e=getComputedStyle(i).getPropertyValue("visibility")==="visible",n=i.closest("details:not([open])");if(!n)return e;if(n!==i){const o=i.closest("summary");if(o&&o.parentNode!==n||o===null)return!1}return e},oi=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",Cf=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const e=i.getRootNode();return e instanceof ShadowRoot?e:null}return i instanceof ShadowRoot?i:i.parentNode?Cf(i.parentNode):null},xo=()=>{},xs=i=>{i.offsetHeight},_f=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ea=[],Sg=i=>{document.readyState==="loading"?(Ea.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ea)e()}),Ea.push(i)):i()},ln=()=>document.documentElement.dir==="rtl",un=i=>{Sg(()=>{const e=_f();if(e){const n=i.NAME,o=e.fn[n];e.fn[n]=i.jQueryInterface,e.fn[n].Constructor=i,e.fn[n].noConflict=()=>(e.fn[n]=o,i.jQueryInterface)}})},Rt=(i,e=[],n=i)=>typeof i=="function"?i.call(...e):n,vf=(i,e,n=!0)=>{if(!n){Rt(i);return}const l=vg(e)+5;let u=!1;const f=({target:p})=>{p===e&&(u=!0,e.removeEventListener(sl,f),Rt(i))};e.addEventListener(sl,f),setTimeout(()=>{u||Af(e)},l)},ql=(i,e,n,o)=>{const l=i.length;let u=i.indexOf(e);return u===-1?!n&&o?i[l-1]:i[0]:(u+=n?1:-1,o&&(u=(u+l)%l),i[Math.max(0,Math.min(u,l-1))])},Tg=/[^.]*(?=\..*)\.|.*/,Ig=/\..*/,Og=/::\d+$/,ba={};let tu=1;const Sf={mouseenter:"mouseover",mouseleave:"mouseout"},Ng=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Tf(i,e){return e&&`${e}::${tu++}`||i.uidEvent||tu++}function If(i){const e=Tf(i);return i.uidEvent=e,ba[e]=ba[e]||{},ba[e]}function Mg(i,e){return function n(o){return Kl(o,{delegateTarget:i}),n.oneOff&&G.off(i,o.type,e),e.apply(i,[o])}}function Dg(i,e,n){return function o(l){const u=i.querySelectorAll(e);for(let{target:f}=l;f&&f!==this;f=f.parentNode)for(const p of u)if(p===f)return Kl(l,{delegateTarget:f}),o.oneOff&&G.off(i,l.type,e,n),n.apply(f,[l])}}function Of(i,e,n=null){return Object.values(i).find(o=>o.callable===e&&o.delegationSelector===n)}function Nf(i,e,n){const o=typeof e=="string",l=o?n:e||n;let u=Mf(i);return Ng.has(u)||(u=i),[o,l,u]}function nu(i,e,n,o,l){if(typeof e!="string"||!i)return;let[u,f,p]=Nf(e,n,o);e in Sf&&(f=(N=>function(M){if(!M.relatedTarget||M.relatedTarget!==M.delegateTarget&&!M.delegateTarget.contains(M.relatedTarget))return N.call(this,M)})(f));const E=If(i),m=E[p]||(E[p]={}),b=Of(m,f,u?n:null);if(b){b.oneOff=b.oneOff&&l;return}const y=Tf(f,e.replace(Tg,"")),S=u?Dg(i,n,f):Mg(i,f);S.delegationSelector=u?n:null,S.callable=f,S.oneOff=l,S.uidEvent=y,m[y]=S,i.addEventListener(p,S,u)}function ol(i,e,n,o,l){const u=Of(e[n],o,l);u&&(i.removeEventListener(n,u,!!l),delete e[n][u.uidEvent])}function Rg(i,e,n,o){const l=e[n]||{};for(const[u,f]of Object.entries(l))u.includes(o)&&ol(i,e,n,f.callable,f.delegationSelector)}function Mf(i){return i=i.replace(Ig,""),Sf[i]||i}const G={on(i,e,n,o){nu(i,e,n,o,!1)},one(i,e,n,o){nu(i,e,n,o,!0)},off(i,e,n,o){if(typeof e!="string"||!i)return;const[l,u,f]=Nf(e,n,o),p=f!==e,E=If(i),m=E[f]||{},b=e.startsWith(".");if(typeof u<"u"){if(!Object.keys(m).length)return;ol(i,E,f,u,l?n:null);return}if(b)for(const y of Object.keys(E))Rg(i,E,y,e.slice(1));for(const[y,S]of Object.entries(m)){const v=y.replace(Og,"");(!p||e.includes(v))&&ol(i,E,f,S.callable,S.delegationSelector)}},trigger(i,e,n){if(typeof e!="string"||!i)return null;const o=_f(),l=Mf(e),u=e!==l;let f=null,p=!0,E=!0,m=!1;u&&o&&(f=o.Event(e,n),o(i).trigger(f),p=!f.isPropagationStopped(),E=!f.isImmediatePropagationStopped(),m=f.isDefaultPrevented());const b=Kl(new Event(e,{bubbles:p,cancelable:!0}),n);return m&&b.preventDefault(),E&&i.dispatchEvent(b),b.defaultPrevented&&f&&f.preventDefault(),b}};function Kl(i,e={}){for(const[n,o]of Object.entries(e))try{i[n]=o}catch{Object.defineProperty(i,n,{configurable:!0,get(){return o}})}return i}function iu(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function wa(i){return i.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const jn={setDataAttribute(i,e,n){i.setAttribute(`data-bs-${wa(e)}`,n)},removeDataAttribute(i,e){i.removeAttribute(`data-bs-${wa(e)}`)},getDataAttributes(i){if(!i)return{};const e={},n=Object.keys(i.dataset).filter(o=>o.startsWith("bs")&&!o.startsWith("bsConfig"));for(const o of n){let l=o.replace(/^bs/,"");l=l.charAt(0).toLowerCase()+l.slice(1),e[l]=iu(i.dataset[o])}return e},getDataAttribute(i,e){return iu(i.getAttribute(`data-bs-${wa(e)}`))}};class Es{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const o=zn(n)?jn.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof o=="object"?o:{},...zn(n)?jn.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[o,l]of Object.entries(n)){const u=e[o],f=zn(u)?"element":Cg(u);if(!new RegExp(l).test(f))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${o}" provided type "${f}" but expected type "${l}".`)}}}const Lg="5.3.5";class mn extends Es{constructor(e,n){super(),e=si(e),e&&(this._element=e,this._config=this._getConfig(n),xa.set(this._element,this.constructor.DATA_KEY,this))}dispose(){xa.remove(this._element,this.constructor.DATA_KEY),G.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,o=!0){vf(e,n,o)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return xa.get(si(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return Lg}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const ya=i=>{let e=i.getAttribute("data-bs-target");if(!e||e==="#"){let n=i.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>yf(n)).join(","):null},fe={find(i,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,i))},findOne(i,e=document.documentElement){return Element.prototype.querySelector.call(e,i)},children(i,e){return[].concat(...i.children).filter(n=>n.matches(e))},parents(i,e){const n=[];let o=i.parentNode.closest(e);for(;o;)n.push(o),o=o.parentNode.closest(e);return n},prev(i,e){let n=i.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(i,e){let n=i.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(i){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,i).filter(n=>!oi(n)&&Nr(n))},getSelectorFromElement(i){const e=ya(i);return e&&fe.findOne(e)?e:null},getElementFromSelector(i){const e=ya(i);return e?fe.findOne(e):null},getMultipleElementsFromSelector(i){const e=ya(i);return e?fe.find(e):[]}},Lo=(i,e="hide")=>{const n=`click.dismiss${i.EVENT_KEY}`,o=i.NAME;G.on(document,n,`[data-bs-dismiss="${o}"]`,function(l){if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),oi(this))return;const u=fe.getElementFromSelector(this)||this.closest(`.${o}`);i.getOrCreateInstance(u)[e]()})},Pg="alert",Bg="bs.alert",Df=`.${Bg}`,kg=`close${Df}`,Fg=`closed${Df}`,Ug="fade",zg="show";class Po extends mn{static get NAME(){return Pg}close(){if(G.trigger(this._element,kg).defaultPrevented)return;this._element.classList.remove(zg);const n=this._element.classList.contains(Ug);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),G.trigger(this._element,Fg),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Po.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Lo(Po,"close");un(Po);const jg="button",Hg="bs.button",Vg=`.${Hg}`,Wg=".data-api",Yg="active",ru='[data-bs-toggle="button"]',Xg=`click${Vg}${Wg}`;class Bo extends mn{static get NAME(){return jg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Yg))}static jQueryInterface(e){return this.each(function(){const n=Bo.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}G.on(document,Xg,ru,i=>{i.preventDefault();const e=i.target.closest(ru);Bo.getOrCreateInstance(e).toggle()});un(Bo);const Gg="swipe",Mr=".bs.swipe",$g=`touchstart${Mr}`,qg=`touchmove${Mr}`,Kg=`touchend${Mr}`,Zg=`pointerdown${Mr}`,Qg=`pointerup${Mr}`,Jg="touch",ep="pen",tp="pointer-event",np=40,ip={endCallback:null,leftCallback:null,rightCallback:null},rp={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Eo extends Es{constructor(e,n){super(),this._element=e,!(!e||!Eo.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return ip}static get DefaultType(){return rp}static get NAME(){return Gg}dispose(){G.off(this._element,Mr)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Rt(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=np)return;const n=e/this._deltaX;this._deltaX=0,n&&Rt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(G.on(this._element,Zg,e=>this._start(e)),G.on(this._element,Qg,e=>this._end(e)),this._element.classList.add(tp)):(G.on(this._element,$g,e=>this._start(e)),G.on(this._element,qg,e=>this._move(e)),G.on(this._element,Kg,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===ep||e.pointerType===Jg)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const sp="carousel",op="bs.carousel",fi=`.${op}`,Rf=".data-api",ap="ArrowLeft",lp="ArrowRight",cp=500,Zr="next",or="prev",pr="left",lo="right",up=`slide${fi}`,Aa=`slid${fi}`,hp=`keydown${fi}`,fp=`mouseenter${fi}`,dp=`mouseleave${fi}`,gp=`dragstart${fi}`,pp=`load${fi}${Rf}`,mp=`click${fi}${Rf}`,Lf="carousel",ks="active",xp="slide",Ep="carousel-item-end",bp="carousel-item-start",wp="carousel-item-next",yp="carousel-item-prev",Pf=".active",Bf=".carousel-item",Ap=Pf+Bf,Cp=".carousel-item img",_p=".carousel-indicators",vp="[data-bs-slide], [data-bs-slide-to]",Sp='[data-bs-ride="carousel"]',Tp={[ap]:lo,[lp]:pr},Ip={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Op={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class bs extends mn{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=fe.findOne(_p,this._element),this._addEventListeners(),this._config.ride===Lf&&this.cycle()}static get Default(){return Ip}static get DefaultType(){return Op}static get NAME(){return sp}next(){this._slide(Zr)}nextWhenVisible(){!document.hidden&&Nr(this._element)&&this.next()}prev(){this._slide(or)}pause(){this._isSliding&&Af(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){G.one(this._element,Aa,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){G.one(this._element,Aa,()=>this.to(e));return}const o=this._getItemIndex(this._getActive());if(o===e)return;const l=e>o?Zr:or;this._slide(l,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&G.on(this._element,hp,e=>this._keydown(e)),this._config.pause==="hover"&&(G.on(this._element,fp,()=>this.pause()),G.on(this._element,dp,()=>this._maybeEnableCycle())),this._config.touch&&Eo.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const o of fe.find(Cp,this._element))G.on(o,gp,l=>l.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(pr)),rightCallback:()=>this._slide(this._directionToOrder(lo)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),cp+this._config.interval))}};this._swipeHelper=new Eo(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=Tp[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=fe.findOne(Pf,this._indicatorsElement);n.classList.remove(ks),n.removeAttribute("aria-current");const o=fe.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);o&&(o.classList.add(ks),o.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const o=this._getActive(),l=e===Zr,u=n||ql(this._getItems(),o,l,this._config.wrap);if(u===o)return;const f=this._getItemIndex(u),p=v=>G.trigger(this._element,v,{relatedTarget:u,direction:this._orderToDirection(e),from:this._getItemIndex(o),to:f});if(p(up).defaultPrevented||!o||!u)return;const m=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(f),this._activeElement=u;const b=l?bp:Ep,y=l?wp:yp;u.classList.add(y),xs(u),o.classList.add(b),u.classList.add(b);const S=()=>{u.classList.remove(b,y),u.classList.add(ks),o.classList.remove(ks,y,b),this._isSliding=!1,p(Aa)};this._queueCallback(S,o,this._isAnimated()),m&&this.cycle()}_isAnimated(){return this._element.classList.contains(xp)}_getActive(){return fe.findOne(Ap,this._element)}_getItems(){return fe.find(Bf,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return ln()?e===pr?or:Zr:e===pr?Zr:or}_orderToDirection(e){return ln()?e===or?pr:lo:e===or?lo:pr}static jQueryInterface(e){return this.each(function(){const n=bs.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}G.on(document,mp,vp,function(i){const e=fe.getElementFromSelector(this);if(!e||!e.classList.contains(Lf))return;i.preventDefault();const n=bs.getOrCreateInstance(e),o=this.getAttribute("data-bs-slide-to");if(o){n.to(o),n._maybeEnableCycle();return}if(jn.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});G.on(window,pp,()=>{const i=fe.find(Sp);for(const e of i)bs.getOrCreateInstance(e)});un(bs);const Np="collapse",Mp="bs.collapse",ws=`.${Mp}`,Dp=".data-api",Rp=`show${ws}`,Lp=`shown${ws}`,Pp=`hide${ws}`,Bp=`hidden${ws}`,kp=`click${ws}${Dp}`,Ca="show",xr="collapse",Fs="collapsing",Fp="collapsed",Up=`:scope .${xr} .${xr}`,zp="collapse-horizontal",jp="width",Hp="height",Vp=".collapse.show, .collapse.collapsing",al='[data-bs-toggle="collapse"]',Wp={parent:null,toggle:!0},Yp={parent:"(null|element)",toggle:"boolean"};class ds extends mn{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const o=fe.find(al);for(const l of o){const u=fe.getSelectorFromElement(l),f=fe.find(u).filter(p=>p===this._element);u!==null&&f.length&&this._triggerArray.push(l)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Wp}static get DefaultType(){return Yp}static get NAME(){return Np}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(Vp).filter(p=>p!==this._element).map(p=>ds.getOrCreateInstance(p,{toggle:!1}))),e.length&&e[0]._isTransitioning||G.trigger(this._element,Rp).defaultPrevented)return;for(const p of e)p.hide();const o=this._getDimension();this._element.classList.remove(xr),this._element.classList.add(Fs),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const l=()=>{this._isTransitioning=!1,this._element.classList.remove(Fs),this._element.classList.add(xr,Ca),this._element.style[o]="",G.trigger(this._element,Lp)},f=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(l,this._element,!0),this._element.style[o]=`${this._element[f]}px`}hide(){if(this._isTransitioning||!this._isShown()||G.trigger(this._element,Pp).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,xs(this._element),this._element.classList.add(Fs),this._element.classList.remove(xr,Ca);for(const l of this._triggerArray){const u=fe.getElementFromSelector(l);u&&!this._isShown(u)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(Fs),this._element.classList.add(xr),G.trigger(this._element,Bp)};this._element.style[n]="",this._queueCallback(o,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ca)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=si(e.parent),e}_getDimension(){return this._element.classList.contains(zp)?jp:Hp}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(al);for(const n of e){const o=fe.getElementFromSelector(n);o&&this._addAriaAndCollapsedClass([n],this._isShown(o))}}_getFirstLevelChildren(e){const n=fe.find(Up,this._config.parent);return fe.find(e,this._config.parent).filter(o=>!n.includes(o))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const o of e)o.classList.toggle(Fp,!n),o.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const o=ds.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e]()}})}}G.on(document,kp,al,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();for(const e of fe.getMultipleElementsFromSelector(this))ds.getOrCreateInstance(e,{toggle:!1}).toggle()});un(ds);const su="dropdown",Xp="bs.dropdown",Yi=`.${Xp}`,Zl=".data-api",Gp="Escape",ou="Tab",$p="ArrowUp",au="ArrowDown",qp=2,Kp=`hide${Yi}`,Zp=`hidden${Yi}`,Qp=`show${Yi}`,Jp=`shown${Yi}`,kf=`click${Yi}${Zl}`,Ff=`keydown${Yi}${Zl}`,em=`keyup${Yi}${Zl}`,mr="show",tm="dropup",nm="dropend",im="dropstart",rm="dropup-center",sm="dropdown-center",Ii='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',om=`${Ii}.${mr}`,co=".dropdown-menu",am=".navbar",lm=".navbar-nav",cm=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",um=ln()?"top-end":"top-start",hm=ln()?"top-start":"top-end",fm=ln()?"bottom-end":"bottom-start",dm=ln()?"bottom-start":"bottom-end",gm=ln()?"left-start":"right-start",pm=ln()?"right-start":"left-start",mm="top",xm="bottom",Em={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},bm={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Rn extends mn{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=fe.next(this._element,co)[0]||fe.prev(this._element,co)[0]||fe.findOne(co,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Em}static get DefaultType(){return bm}static get NAME(){return su}toggle(){return this._isShown()?this.hide():this.show()}show(){if(oi(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!G.trigger(this._element,Qp,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(lm))for(const o of[].concat(...document.body.children))G.on(o,"mouseover",xo);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(mr),this._element.classList.add(mr),G.trigger(this._element,Jp,e)}}hide(){if(oi(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!G.trigger(this._element,Kp,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))G.off(o,"mouseover",xo);this._popper&&this._popper.destroy(),this._menu.classList.remove(mr),this._element.classList.remove(mr),this._element.setAttribute("aria-expanded","false"),jn.removeDataAttribute(this._menu,"popper"),G.trigger(this._element,Zp,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!zn(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${su.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof wf>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:zn(this._config.reference)?e=si(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=$l(e,this._menu,n)}_isShown(){return this._menu.classList.contains(mr)}_getPlacement(){const e=this._parent;if(e.classList.contains(nm))return gm;if(e.classList.contains(im))return pm;if(e.classList.contains(rm))return mm;if(e.classList.contains(sm))return xm;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(tm)?n?hm:um:n?dm:fm}_detectNavbar(){return this._element.closest(am)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(jn.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Rt(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:n}){const o=fe.find(cm,this._menu).filter(l=>Nr(l));o.length&&ql(o,n,e===au,!o.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Rn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===qp||e.type==="keyup"&&e.key!==ou)return;const n=fe.find(om);for(const o of n){const l=Rn.getInstance(o);if(!l||l._config.autoClose===!1)continue;const u=e.composedPath(),f=u.includes(l._menu);if(u.includes(l._element)||l._config.autoClose==="inside"&&!f||l._config.autoClose==="outside"&&f||l._menu.contains(e.target)&&(e.type==="keyup"&&e.key===ou||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const p={relatedTarget:l._element};e.type==="click"&&(p.clickEvent=e),l._completeHide(p)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),o=e.key===Gp,l=[$p,au].includes(e.key);if(!l&&!o||n&&!o)return;e.preventDefault();const u=this.matches(Ii)?this:fe.prev(this,Ii)[0]||fe.next(this,Ii)[0]||fe.findOne(Ii,e.delegateTarget.parentNode),f=Rn.getOrCreateInstance(u);if(l){e.stopPropagation(),f.show(),f._selectMenuItem(e);return}f._isShown()&&(e.stopPropagation(),f.hide(),u.focus())}}G.on(document,Ff,Ii,Rn.dataApiKeydownHandler);G.on(document,Ff,co,Rn.dataApiKeydownHandler);G.on(document,kf,Rn.clearMenus);G.on(document,em,Rn.clearMenus);G.on(document,kf,Ii,function(i){i.preventDefault(),Rn.getOrCreateInstance(this).toggle()});un(Rn);const Uf="backdrop",wm="fade",lu="show",cu=`mousedown.bs.${Uf}`,ym={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Am={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class zf extends Es{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return ym}static get DefaultType(){return Am}static get NAME(){return Uf}show(e){if(!this._config.isVisible){Rt(e);return}this._append();const n=this._getElement();this._config.isAnimated&&xs(n),n.classList.add(lu),this._emulateAnimation(()=>{Rt(e)})}hide(e){if(!this._config.isVisible){Rt(e);return}this._getElement().classList.remove(lu),this._emulateAnimation(()=>{this.dispose(),Rt(e)})}dispose(){this._isAppended&&(G.off(this._element,cu),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(wm),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=si(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),G.on(e,cu,()=>{Rt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){vf(e,this._getElement(),this._config.isAnimated)}}const Cm="focustrap",_m="bs.focustrap",bo=`.${_m}`,vm=`focusin${bo}`,Sm=`keydown.tab${bo}`,Tm="Tab",Im="forward",uu="backward",Om={autofocus:!0,trapElement:null},Nm={autofocus:"boolean",trapElement:"element"};class jf extends Es{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Om}static get DefaultType(){return Nm}static get NAME(){return Cm}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),G.off(document,bo),G.on(document,vm,e=>this._handleFocusin(e)),G.on(document,Sm,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,G.off(document,bo))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const o=fe.focusableChildren(n);o.length===0?n.focus():this._lastTabNavDirection===uu?o[o.length-1].focus():o[0].focus()}_handleKeydown(e){e.key===Tm&&(this._lastTabNavDirection=e.shiftKey?uu:Im)}}const hu=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",fu=".sticky-top",Us="padding-right",du="margin-right";class ll{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Us,n=>n+e),this._setElementAttributes(hu,Us,n=>n+e),this._setElementAttributes(fu,du,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Us),this._resetElementAttributes(hu,Us),this._resetElementAttributes(fu,du)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,o){const l=this.getWidth(),u=f=>{if(f!==this._element&&window.innerWidth>f.clientWidth+l)return;this._saveInitialAttribute(f,n);const p=window.getComputedStyle(f).getPropertyValue(n);f.style.setProperty(n,`${o(Number.parseFloat(p))}px`)};this._applyManipulationCallback(e,u)}_saveInitialAttribute(e,n){const o=e.style.getPropertyValue(n);o&&jn.setDataAttribute(e,n,o)}_resetElementAttributes(e,n){const o=l=>{const u=jn.getDataAttribute(l,n);if(u===null){l.style.removeProperty(n);return}jn.removeDataAttribute(l,n),l.style.setProperty(n,u)};this._applyManipulationCallback(e,o)}_applyManipulationCallback(e,n){if(zn(e)){n(e);return}for(const o of fe.find(e,this._element))n(o)}}const Mm="modal",Dm="bs.modal",cn=`.${Dm}`,Rm=".data-api",Lm="Escape",Pm=`hide${cn}`,Bm=`hidePrevented${cn}`,Hf=`hidden${cn}`,Vf=`show${cn}`,km=`shown${cn}`,Fm=`resize${cn}`,Um=`click.dismiss${cn}`,zm=`mousedown.dismiss${cn}`,jm=`keydown.dismiss${cn}`,Hm=`click${cn}${Rm}`,gu="modal-open",Vm="fade",pu="show",_a="modal-static",Wm=".modal.show",Ym=".modal-dialog",Xm=".modal-body",Gm='[data-bs-toggle="modal"]',$m={backdrop:!0,focus:!0,keyboard:!0},qm={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class vr extends mn{constructor(e,n){super(e,n),this._dialog=fe.findOne(Ym,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ll,this._addEventListeners()}static get Default(){return $m}static get DefaultType(){return qm}static get NAME(){return Mm}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||G.trigger(this._element,Vf,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(gu),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||G.trigger(this._element,Pm).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(pu),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){G.off(window,cn),G.off(this._dialog,cn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new zf({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new jf({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=fe.findOne(Xm,this._dialog);n&&(n.scrollTop=0),xs(this._element),this._element.classList.add(pu);const o=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,G.trigger(this._element,km,{relatedTarget:e})};this._queueCallback(o,this._dialog,this._isAnimated())}_addEventListeners(){G.on(this._element,jm,e=>{if(e.key===Lm){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),G.on(window,Fm,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),G.on(this._element,zm,e=>{G.one(this._element,Um,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(gu),this._resetAdjustments(),this._scrollBar.reset(),G.trigger(this._element,Hf)})}_isAnimated(){return this._element.classList.contains(Vm)}_triggerBackdropTransition(){if(G.trigger(this._element,Bm).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,o=this._element.style.overflowY;o==="hidden"||this._element.classList.contains(_a)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(_a),this._queueCallback(()=>{this._element.classList.remove(_a),this._queueCallback(()=>{this._element.style.overflowY=o},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),o=n>0;if(o&&!e){const l=ln()?"paddingLeft":"paddingRight";this._element.style[l]=`${n}px`}if(!o&&e){const l=ln()?"paddingRight":"paddingLeft";this._element.style[l]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const o=vr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e](n)}})}}G.on(document,Hm,Gm,function(i){const e=fe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),G.one(e,Vf,l=>{l.defaultPrevented||G.one(e,Hf,()=>{Nr(this)&&this.focus()})});const n=fe.findOne(Wm);n&&vr.getInstance(n).hide(),vr.getOrCreateInstance(e).toggle(this)});Lo(vr);un(vr);const Km="offcanvas",Zm="bs.offcanvas",Yn=`.${Zm}`,Wf=".data-api",Qm=`load${Yn}${Wf}`,Jm="Escape",mu="show",xu="showing",Eu="hiding",ex="offcanvas-backdrop",Yf=".offcanvas.show",tx=`show${Yn}`,nx=`shown${Yn}`,ix=`hide${Yn}`,bu=`hidePrevented${Yn}`,Xf=`hidden${Yn}`,rx=`resize${Yn}`,sx=`click${Yn}${Wf}`,ox=`keydown.dismiss${Yn}`,ax='[data-bs-toggle="offcanvas"]',lx={backdrop:!0,keyboard:!0,scroll:!1},cx={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ai extends mn{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return lx}static get DefaultType(){return cx}static get NAME(){return Km}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||G.trigger(this._element,tx,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ll().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(xu);const o=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(mu),this._element.classList.remove(xu),G.trigger(this._element,nx,{relatedTarget:e})};this._queueCallback(o,this._element,!0)}hide(){if(!this._isShown||G.trigger(this._element,ix).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Eu),this._backdrop.hide();const n=()=>{this._element.classList.remove(mu,Eu),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ll().reset(),G.trigger(this._element,Xf)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){G.trigger(this._element,bu);return}this.hide()},n=!!this._config.backdrop;return new zf({className:ex,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new jf({trapElement:this._element})}_addEventListeners(){G.on(this._element,ox,e=>{if(e.key===Jm){if(this._config.keyboard){this.hide();return}G.trigger(this._element,bu)}})}static jQueryInterface(e){return this.each(function(){const n=ai.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}G.on(document,sx,ax,function(i){const e=fe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),oi(this))return;G.one(e,Xf,()=>{Nr(this)&&this.focus()});const n=fe.findOne(Yf);n&&n!==e&&ai.getInstance(n).hide(),ai.getOrCreateInstance(e).toggle(this)});G.on(window,Qm,()=>{for(const i of fe.find(Yf))ai.getOrCreateInstance(i).show()});G.on(window,rx,()=>{for(const i of fe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&ai.getOrCreateInstance(i).hide()});Lo(ai);un(ai);const ux=/^aria-[\w-]*$/i,Gf={"*":["class","dir","id","lang","role",ux],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},hx=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),fx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,dx=(i,e)=>{const n=i.nodeName.toLowerCase();return e.includes(n)?hx.has(n)?!!fx.test(i.nodeValue):!0:e.filter(o=>o instanceof RegExp).some(o=>o.test(n))};function gx(i,e,n){if(!i.length)return i;if(n&&typeof n=="function")return n(i);const l=new window.DOMParser().parseFromString(i,"text/html"),u=[].concat(...l.body.querySelectorAll("*"));for(const f of u){const p=f.nodeName.toLowerCase();if(!Object.keys(e).includes(p)){f.remove();continue}const E=[].concat(...f.attributes),m=[].concat(e["*"]||[],e[p]||[]);for(const b of E)dx(b,m)||f.removeAttribute(b.nodeName)}return l.body.innerHTML}const px="TemplateFactory",mx={allowList:Gf,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},xx={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ex={entry:"(string|element|function|null)",selector:"(string|element)"};class bx extends Es{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return mx}static get DefaultType(){return xx}static get NAME(){return px}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[l,u]of Object.entries(this._config.content))this._setContent(e,u,l);const n=e.children[0],o=this._resolvePossibleFunction(this._config.extraClass);return o&&n.classList.add(...o.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,o]of Object.entries(e))super._typeCheckConfig({selector:n,entry:o},Ex)}_setContent(e,n,o){const l=fe.findOne(o,e);if(l){if(n=this._resolvePossibleFunction(n),!n){l.remove();return}if(zn(n)){this._putElementInTemplate(si(n),l);return}if(this._config.html){l.innerHTML=this._maybeSanitize(n);return}l.textContent=n}}_maybeSanitize(e){return this._config.sanitize?gx(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Rt(e,[void 0,this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const wx="tooltip",yx=new Set(["sanitize","allowList","sanitizeFn"]),va="fade",Ax="modal",zs="show",Cx=".tooltip-inner",wu=`.${Ax}`,yu="hide.bs.modal",Qr="hover",Sa="focus",_x="click",vx="manual",Sx="hide",Tx="hidden",Ix="show",Ox="shown",Nx="inserted",Mx="click",Dx="focusin",Rx="focusout",Lx="mouseenter",Px="mouseleave",Bx={AUTO:"auto",TOP:"top",RIGHT:ln()?"left":"right",BOTTOM:"bottom",LEFT:ln()?"right":"left"},kx={allowList:Gf,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Fx={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Dr extends mn{constructor(e,n){if(typeof wf>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return kx}static get DefaultType(){return Fx}static get NAME(){return wx}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),G.off(this._element.closest(wu),yu,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=G.trigger(this._element,this.constructor.eventName(Ix)),o=(Cf(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!o)return;this._disposePopper();const l=this._getTipElement();this._element.setAttribute("aria-describedby",l.getAttribute("id"));const{container:u}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(u.append(l),G.trigger(this._element,this.constructor.eventName(Nx))),this._popper=this._createPopper(l),l.classList.add(zs),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))G.on(p,"mouseover",xo);const f=()=>{G.trigger(this._element,this.constructor.eventName(Ox)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(f,this.tip,this._isAnimated())}hide(){if(!this._isShown()||G.trigger(this._element,this.constructor.eventName(Sx)).defaultPrevented)return;if(this._getTipElement().classList.remove(zs),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))G.off(l,"mouseover",xo);this._activeTrigger[_x]=!1,this._activeTrigger[Sa]=!1,this._activeTrigger[Qr]=!1,this._isHovered=null;const o=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),G.trigger(this._element,this.constructor.eventName(Tx)))};this._queueCallback(o,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(va,zs),n.classList.add(`bs-${this.constructor.NAME}-auto`);const o=_g(this.constructor.NAME).toString();return n.setAttribute("id",o),this._isAnimated()&&n.classList.add(va),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new bx({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Cx]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(va)}_isShown(){return this.tip&&this.tip.classList.contains(zs)}_createPopper(e){const n=Rt(this._config.placement,[this,e,this._element]),o=Bx[n.toUpperCase()];return $l(this._element,e,this._getPopperConfig(o))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return Rt(e,[this._element,this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:o=>{this._getTipElement().setAttribute("data-popper-placement",o.state.placement)}}]};return{...n,...Rt(this._config.popperConfig,[void 0,n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")G.on(this._element,this.constructor.eventName(Mx),this._config.selector,o=>{this._initializeOnDelegatedTarget(o).toggle()});else if(n!==vx){const o=n===Qr?this.constructor.eventName(Lx):this.constructor.eventName(Dx),l=n===Qr?this.constructor.eventName(Px):this.constructor.eventName(Rx);G.on(this._element,o,this._config.selector,u=>{const f=this._initializeOnDelegatedTarget(u);f._activeTrigger[u.type==="focusin"?Sa:Qr]=!0,f._enter()}),G.on(this._element,l,this._config.selector,u=>{const f=this._initializeOnDelegatedTarget(u);f._activeTrigger[u.type==="focusout"?Sa:Qr]=f._element.contains(u.relatedTarget),f._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},G.on(this._element.closest(wu),yu,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=jn.getDataAttributes(this._element);for(const o of Object.keys(n))yx.has(o)&&delete n[o];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:si(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,o]of Object.entries(this._config))this.constructor.Default[n]!==o&&(e[n]=o);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Dr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}un(Dr);const Ux="popover",zx=".popover-header",jx=".popover-body",Hx={...Dr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Vx={...Dr.DefaultType,content:"(null|string|element|function)"};class Ql extends Dr{static get Default(){return Hx}static get DefaultType(){return Vx}static get NAME(){return Ux}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[zx]:this._getTitle(),[jx]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Ql.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}un(Ql);const Wx="scrollspy",Yx="bs.scrollspy",Jl=`.${Yx}`,Xx=".data-api",Gx=`activate${Jl}`,Au=`click${Jl}`,$x=`load${Jl}${Xx}`,qx="dropdown-item",ar="active",Kx='[data-bs-spy="scroll"]',Ta="[href]",Zx=".nav, .list-group",Cu=".nav-link",Qx=".nav-item",Jx=".list-group-item",e2=`${Cu}, ${Qx} > ${Cu}, ${Jx}`,t2=".dropdown",n2=".dropdown-toggle",i2={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},r2={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ko extends mn{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return i2}static get DefaultType(){return r2}static get NAME(){return Wx}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=si(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(G.off(this._config.target,Au),G.on(this._config.target,Au,Ta,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const o=this._rootElement||window,l=n.offsetTop-this._element.offsetTop;if(o.scrollTo){o.scrollTo({top:l,behavior:"smooth"});return}o.scrollTop=l}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=f=>this._targetLinks.get(`#${f.target.id}`),o=f=>{this._previousScrollData.visibleEntryTop=f.target.offsetTop,this._process(n(f))},l=(this._rootElement||document.documentElement).scrollTop,u=l>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=l;for(const f of e){if(!f.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(f));continue}const p=f.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(u&&p){if(o(f),!l)return;continue}!u&&!p&&o(f)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=fe.find(Ta,this._config.target);for(const n of e){if(!n.hash||oi(n))continue;const o=fe.findOne(decodeURI(n.hash),this._element);Nr(o)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,o))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ar),this._activateParents(e),G.trigger(this._element,Gx,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(qx)){fe.findOne(n2,e.closest(t2)).classList.add(ar);return}for(const n of fe.parents(e,Zx))for(const o of fe.prev(n,e2))o.classList.add(ar)}_clearActiveClass(e){e.classList.remove(ar);const n=fe.find(`${Ta}.${ar}`,e);for(const o of n)o.classList.remove(ar)}static jQueryInterface(e){return this.each(function(){const n=ko.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}G.on(window,$x,()=>{for(const i of fe.find(Kx))ko.getOrCreateInstance(i)});un(ko);const s2="tab",o2="bs.tab",Xi=`.${o2}`,a2=`hide${Xi}`,l2=`hidden${Xi}`,c2=`show${Xi}`,u2=`shown${Xi}`,h2=`click${Xi}`,f2=`keydown${Xi}`,d2=`load${Xi}`,g2="ArrowLeft",_u="ArrowRight",p2="ArrowUp",vu="ArrowDown",Ia="Home",Su="End",Oi="active",Tu="fade",Oa="show",m2="dropdown",$f=".dropdown-toggle",x2=".dropdown-menu",Na=`:not(${$f})`,E2='.list-group, .nav, [role="tablist"]',b2=".nav-item, .list-group-item",w2=`.nav-link${Na}, .list-group-item${Na}, [role="tab"]${Na}`,qf='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ma=`${w2}, ${qf}`,y2=`.${Oi}[data-bs-toggle="tab"], .${Oi}[data-bs-toggle="pill"], .${Oi}[data-bs-toggle="list"]`;class Sr extends mn{constructor(e){super(e),this._parent=this._element.closest(E2),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),G.on(this._element,f2,n=>this._keydown(n)))}static get NAME(){return s2}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),o=n?G.trigger(n,a2,{relatedTarget:e}):null;G.trigger(e,c2,{relatedTarget:n}).defaultPrevented||o&&o.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(Oi),this._activate(fe.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Oa);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),G.trigger(e,u2,{relatedTarget:n})};this._queueCallback(o,e,e.classList.contains(Tu))}_deactivate(e,n){if(!e)return;e.classList.remove(Oi),e.blur(),this._deactivate(fe.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Oa);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),G.trigger(e,l2,{relatedTarget:n})};this._queueCallback(o,e,e.classList.contains(Tu))}_keydown(e){if(![g2,_u,p2,vu,Ia,Su].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(l=>!oi(l));let o;if([Ia,Su].includes(e.key))o=n[e.key===Ia?0:n.length-1];else{const l=[_u,vu].includes(e.key);o=ql(n,e.target,l,!0)}o&&(o.focus({preventScroll:!0}),Sr.getOrCreateInstance(o).show())}_getChildren(){return fe.find(Ma,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const o of n)this._setInitialAttributesOnChild(o)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),o=this._getOuterElement(e);e.setAttribute("aria-selected",n),o!==e&&this._setAttributeIfNotExists(o,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=fe.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const o=this._getOuterElement(e);if(!o.classList.contains(m2))return;const l=(u,f)=>{const p=fe.findOne(u,o);p&&p.classList.toggle(f,n)};l($f,Oi),l(x2,Oa),o.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,o){e.hasAttribute(n)||e.setAttribute(n,o)}_elemIsActive(e){return e.classList.contains(Oi)}_getInnerElement(e){return e.matches(Ma)?e:fe.findOne(Ma,e)}_getOuterElement(e){return e.closest(b2)||e}static jQueryInterface(e){return this.each(function(){const n=Sr.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}G.on(document,h2,qf,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!oi(this)&&Sr.getOrCreateInstance(this).show()});G.on(window,d2,()=>{for(const i of fe.find(y2))Sr.getOrCreateInstance(i)});un(Sr);const A2="toast",C2="bs.toast",di=`.${C2}`,_2=`mouseover${di}`,v2=`mouseout${di}`,S2=`focusin${di}`,T2=`focusout${di}`,I2=`hide${di}`,O2=`hidden${di}`,N2=`show${di}`,M2=`shown${di}`,D2="fade",Iu="hide",js="show",Hs="showing",R2={animation:"boolean",autohide:"boolean",delay:"number"},L2={animation:!0,autohide:!0,delay:5e3};class Fo extends mn{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return L2}static get DefaultType(){return R2}static get NAME(){return A2}show(){if(G.trigger(this._element,N2).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(D2);const n=()=>{this._element.classList.remove(Hs),G.trigger(this._element,M2),this._maybeScheduleHide()};this._element.classList.remove(Iu),xs(this._element),this._element.classList.add(js,Hs),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||G.trigger(this._element,I2).defaultPrevented)return;const n=()=>{this._element.classList.add(Iu),this._element.classList.remove(Hs,js),G.trigger(this._element,O2)};this._element.classList.add(Hs),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(js),super.dispose()}isShown(){return this._element.classList.contains(js)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const o=e.relatedTarget;this._element===o||this._element.contains(o)||this._maybeScheduleHide()}_setListeners(){G.on(this._element,_2,e=>this._onInteraction(e,!0)),G.on(this._element,v2,e=>this._onInteraction(e,!1)),G.on(this._element,S2,e=>this._onInteraction(e,!0)),G.on(this._element,T2,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Fo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Lo(Fo);un(Fo);function Kf(i,e){return function(){return i.apply(e,arguments)}}const{toString:P2}=Object.prototype,{getPrototypeOf:ec}=Object,Uo=(i=>e=>{const n=P2.call(e);return i[n]||(i[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xn=i=>(i=i.toLowerCase(),e=>Uo(e)===i),zo=i=>e=>typeof e===i,{isArray:Rr}=Array,gs=zo("undefined");function B2(i){return i!==null&&!gs(i)&&i.constructor!==null&&!gs(i.constructor)&&Ht(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Zf=xn("ArrayBuffer");function k2(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&Zf(i.buffer),e}const F2=zo("string"),Ht=zo("function"),Qf=zo("number"),jo=i=>i!==null&&typeof i=="object",U2=i=>i===!0||i===!1,uo=i=>{if(Uo(i)!=="object")return!1;const e=ec(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},z2=xn("Date"),j2=xn("File"),H2=xn("Blob"),V2=xn("FileList"),W2=i=>jo(i)&&Ht(i.pipe),Y2=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||Ht(i.append)&&((e=Uo(i))==="formdata"||e==="object"&&Ht(i.toString)&&i.toString()==="[object FormData]"))},X2=xn("URLSearchParams"),[G2,$2,q2,K2]=["ReadableStream","Request","Response","Headers"].map(xn),Z2=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ys(i,e,{allOwnKeys:n=!1}={}){if(i===null||typeof i>"u")return;let o,l;if(typeof i!="object"&&(i=[i]),Rr(i))for(o=0,l=i.length;o<l;o++)e.call(null,i[o],o,i);else{const u=n?Object.getOwnPropertyNames(i):Object.keys(i),f=u.length;let p;for(o=0;o<f;o++)p=u[o],e.call(null,i[p],p,i)}}function Jf(i,e){e=e.toLowerCase();const n=Object.keys(i);let o=n.length,l;for(;o-- >0;)if(l=n[o],e===l.toLowerCase())return l;return null}const Ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ed=i=>!gs(i)&&i!==Ni;function cl(){const{caseless:i}=ed(this)&&this||{},e={},n=(o,l)=>{const u=i&&Jf(e,l)||l;uo(e[u])&&uo(o)?e[u]=cl(e[u],o):uo(o)?e[u]=cl({},o):Rr(o)?e[u]=o.slice():e[u]=o};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&ys(arguments[o],n);return e}const Q2=(i,e,n,{allOwnKeys:o}={})=>(ys(e,(l,u)=>{n&&Ht(l)?i[u]=Kf(l,n):i[u]=l},{allOwnKeys:o}),i),J2=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),eE=(i,e,n,o)=>{i.prototype=Object.create(e.prototype,o),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),n&&Object.assign(i.prototype,n)},tE=(i,e,n,o)=>{let l,u,f;const p={};if(e=e||{},i==null)return e;do{for(l=Object.getOwnPropertyNames(i),u=l.length;u-- >0;)f=l[u],(!o||o(f,i,e))&&!p[f]&&(e[f]=i[f],p[f]=!0);i=n!==!1&&ec(i)}while(i&&(!n||n(i,e))&&i!==Object.prototype);return e},nE=(i,e,n)=>{i=String(i),(n===void 0||n>i.length)&&(n=i.length),n-=e.length;const o=i.indexOf(e,n);return o!==-1&&o===n},iE=i=>{if(!i)return null;if(Rr(i))return i;let e=i.length;if(!Qf(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=i[e];return n},rE=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&ec(Uint8Array)),sE=(i,e)=>{const o=(i&&i[Symbol.iterator]).call(i);let l;for(;(l=o.next())&&!l.done;){const u=l.value;e.call(i,u[0],u[1])}},oE=(i,e)=>{let n;const o=[];for(;(n=i.exec(e))!==null;)o.push(n);return o},aE=xn("HTMLFormElement"),lE=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,l){return o.toUpperCase()+l}),Ou=(({hasOwnProperty:i})=>(e,n)=>i.call(e,n))(Object.prototype),cE=xn("RegExp"),td=(i,e)=>{const n=Object.getOwnPropertyDescriptors(i),o={};ys(n,(l,u)=>{let f;(f=e(l,u,i))!==!1&&(o[u]=f||l)}),Object.defineProperties(i,o)},uE=i=>{td(i,(e,n)=>{if(Ht(i)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=i[n];if(Ht(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hE=(i,e)=>{const n={},o=l=>{l.forEach(u=>{n[u]=!0})};return Rr(i)?o(i):o(String(i).split(e)),n},fE=()=>{},dE=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e;function gE(i){return!!(i&&Ht(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const pE=i=>{const e=new Array(10),n=(o,l)=>{if(jo(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[l]=o;const u=Rr(o)?[]:{};return ys(o,(f,p)=>{const E=n(f,l+1);!gs(E)&&(u[p]=E)}),e[l]=void 0,u}}return o};return n(i,0)},mE=xn("AsyncFunction"),xE=i=>i&&(jo(i)||Ht(i))&&Ht(i.then)&&Ht(i.catch),nd=((i,e)=>i?setImmediate:e?((n,o)=>(Ni.addEventListener("message",({source:l,data:u})=>{l===Ni&&u===n&&o.length&&o.shift()()},!1),l=>{o.push(l),Ni.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ht(Ni.postMessage)),EE=typeof queueMicrotask<"u"?queueMicrotask.bind(Ni):typeof process<"u"&&process.nextTick||nd,V={isArray:Rr,isArrayBuffer:Zf,isBuffer:B2,isFormData:Y2,isArrayBufferView:k2,isString:F2,isNumber:Qf,isBoolean:U2,isObject:jo,isPlainObject:uo,isReadableStream:G2,isRequest:$2,isResponse:q2,isHeaders:K2,isUndefined:gs,isDate:z2,isFile:j2,isBlob:H2,isRegExp:cE,isFunction:Ht,isStream:W2,isURLSearchParams:X2,isTypedArray:rE,isFileList:V2,forEach:ys,merge:cl,extend:Q2,trim:Z2,stripBOM:J2,inherits:eE,toFlatObject:tE,kindOf:Uo,kindOfTest:xn,endsWith:nE,toArray:iE,forEachEntry:sE,matchAll:oE,isHTMLForm:aE,hasOwnProperty:Ou,hasOwnProp:Ou,reduceDescriptors:td,freezeMethods:uE,toObjectSet:hE,toCamelCase:lE,noop:fE,toFiniteNumber:dE,findKey:Jf,global:Ni,isContextDefined:ed,isSpecCompliantForm:gE,toJSONObject:pE,isAsyncFn:mE,isThenable:xE,setImmediate:nd,asap:EE};function me(i,e,n,o,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),l&&(this.response=l,this.status=l.status?l.status:null)}V.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const id=me.prototype,rd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{rd[i]={value:i}});Object.defineProperties(me,rd);Object.defineProperty(id,"isAxiosError",{value:!0});me.from=(i,e,n,o,l,u)=>{const f=Object.create(id);return V.toFlatObject(i,f,function(E){return E!==Error.prototype},p=>p!=="isAxiosError"),me.call(f,i.message,e,n,o,l),f.cause=i,f.name=i.name,u&&Object.assign(f,u),f};const bE=null;function ul(i){return V.isPlainObject(i)||V.isArray(i)}function sd(i){return V.endsWith(i,"[]")?i.slice(0,-2):i}function Nu(i,e,n){return i?i.concat(e).map(function(l,u){return l=sd(l),!n&&u?"["+l+"]":l}).join(n?".":""):e}function wE(i){return V.isArray(i)&&!i.some(ul)}const yE=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function Ho(i,e,n){if(!V.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,O){return!V.isUndefined(O[M])});const o=n.metaTokens,l=n.visitor||b,u=n.dots,f=n.indexes,E=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(l))throw new TypeError("visitor must be a function");function m(N){if(N===null)return"";if(V.isDate(N))return N.toISOString();if(!E&&V.isBlob(N))throw new me("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(N)||V.isTypedArray(N)?E&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function b(N,M,O){let L=N;if(N&&!O&&typeof N=="object"){if(V.endsWith(M,"{}"))M=o?M:M.slice(0,-2),N=JSON.stringify(N);else if(V.isArray(N)&&wE(N)||(V.isFileList(N)||V.endsWith(M,"[]"))&&(L=V.toArray(N)))return M=sd(M),L.forEach(function(F,W){!(V.isUndefined(F)||F===null)&&e.append(f===!0?Nu([M],W,u):f===null?M:M+"[]",m(F))}),!1}return ul(N)?!0:(e.append(Nu(O,M,u),m(N)),!1)}const y=[],S=Object.assign(yE,{defaultVisitor:b,convertValue:m,isVisitable:ul});function v(N,M){if(!V.isUndefined(N)){if(y.indexOf(N)!==-1)throw Error("Circular reference detected in "+M.join("."));y.push(N),V.forEach(N,function(L,k){(!(V.isUndefined(L)||L===null)&&l.call(e,L,V.isString(k)?k.trim():k,M,S))===!0&&v(L,M?M.concat(k):[k])}),y.pop()}}if(!V.isObject(i))throw new TypeError("data must be an object");return v(i),e}function Mu(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function tc(i,e){this._pairs=[],i&&Ho(i,this,e)}const od=tc.prototype;od.append=function(e,n){this._pairs.push([e,n])};od.toString=function(e){const n=e?function(o){return e.call(this,o,Mu)}:Mu;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function AE(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ad(i,e,n){if(!e)return i;const o=n&&n.encode||AE;V.isFunction(n)&&(n={serialize:n});const l=n&&n.serialize;let u;if(l?u=l(e,n):u=V.isURLSearchParams(e)?e.toString():new tc(e,n).toString(o),u){const f=i.indexOf("#");f!==-1&&(i=i.slice(0,f)),i+=(i.indexOf("?")===-1?"?":"&")+u}return i}class Du{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(o){o!==null&&e(o)})}}const ld={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CE=typeof URLSearchParams<"u"?URLSearchParams:tc,_E=typeof FormData<"u"?FormData:null,vE=typeof Blob<"u"?Blob:null,SE={isBrowser:!0,classes:{URLSearchParams:CE,FormData:_E,Blob:vE},protocols:["http","https","file","blob","url","data"]},nc=typeof window<"u"&&typeof document<"u",hl=typeof navigator=="object"&&navigator||void 0,TE=nc&&(!hl||["ReactNative","NativeScript","NS"].indexOf(hl.product)<0),IE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",OE=nc&&window.location.href||"http://localhost",NE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nc,hasStandardBrowserEnv:TE,hasStandardBrowserWebWorkerEnv:IE,navigator:hl,origin:OE},Symbol.toStringTag,{value:"Module"})),wt={...NE,...SE};function ME(i,e){return Ho(i,new wt.classes.URLSearchParams,Object.assign({visitor:function(n,o,l,u){return wt.isNode&&V.isBuffer(n)?(this.append(o,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},e))}function DE(i){return V.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function RE(i){const e={},n=Object.keys(i);let o;const l=n.length;let u;for(o=0;o<l;o++)u=n[o],e[u]=i[u];return e}function cd(i){function e(n,o,l,u){let f=n[u++];if(f==="__proto__")return!0;const p=Number.isFinite(+f),E=u>=n.length;return f=!f&&V.isArray(l)?l.length:f,E?(V.hasOwnProp(l,f)?l[f]=[l[f],o]:l[f]=o,!p):((!l[f]||!V.isObject(l[f]))&&(l[f]=[]),e(n,o,l[f],u)&&V.isArray(l[f])&&(l[f]=RE(l[f])),!p)}if(V.isFormData(i)&&V.isFunction(i.entries)){const n={};return V.forEachEntry(i,(o,l)=>{e(DE(o),l,n,0)}),n}return null}function LE(i,e,n){if(V.isString(i))try{return(e||JSON.parse)(i),V.trim(i)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(i)}const As={transitional:ld,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const o=n.getContentType()||"",l=o.indexOf("application/json")>-1,u=V.isObject(e);if(u&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return l?JSON.stringify(cd(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let p;if(u){if(o.indexOf("application/x-www-form-urlencoded")>-1)return ME(e,this.formSerializer).toString();if((p=V.isFileList(e))||o.indexOf("multipart/form-data")>-1){const E=this.env&&this.env.FormData;return Ho(p?{"files[]":e}:e,E&&new E,this.formSerializer)}}return u||l?(n.setContentType("application/json",!1),LE(e)):e}],transformResponse:[function(e){const n=this.transitional||As.transitional,o=n&&n.forcedJSONParsing,l=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(o&&!this.responseType||l)){const f=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(e)}catch(p){if(f)throw p.name==="SyntaxError"?me.from(p,me.ERR_BAD_RESPONSE,this,null,this.response):p}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wt.classes.FormData,Blob:wt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],i=>{As.headers[i]={}});const PE=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BE=i=>{const e={};let n,o,l;return i&&i.split(`
`).forEach(function(f){l=f.indexOf(":"),n=f.substring(0,l).trim().toLowerCase(),o=f.substring(l+1).trim(),!(!n||e[n]&&PE[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},Ru=Symbol("internals");function Jr(i){return i&&String(i).trim().toLowerCase()}function ho(i){return i===!1||i==null?i:V.isArray(i)?i.map(ho):String(i)}function kE(i){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(i);)e[o[1]]=o[2];return e}const FE=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Da(i,e,n,o,l){if(V.isFunction(o))return o.call(this,e,n);if(l&&(e=n),!!V.isString(e)){if(V.isString(o))return e.indexOf(o)!==-1;if(V.isRegExp(o))return o.test(e)}}function UE(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function zE(i,e){const n=V.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(i,o+n,{value:function(l,u,f){return this[o].call(this,e,l,u,f)},configurable:!0})})}let Pt=class{constructor(e){e&&this.set(e)}set(e,n,o){const l=this;function u(p,E,m){const b=Jr(E);if(!b)throw new Error("header name must be a non-empty string");const y=V.findKey(l,b);(!y||l[y]===void 0||m===!0||m===void 0&&l[y]!==!1)&&(l[y||E]=ho(p))}const f=(p,E)=>V.forEach(p,(m,b)=>u(m,b,E));if(V.isPlainObject(e)||e instanceof this.constructor)f(e,n);else if(V.isString(e)&&(e=e.trim())&&!FE(e))f(BE(e),n);else if(V.isHeaders(e))for(const[p,E]of e.entries())u(E,p,o);else e!=null&&u(n,e,o);return this}get(e,n){if(e=Jr(e),e){const o=V.findKey(this,e);if(o){const l=this[o];if(!n)return l;if(n===!0)return kE(l);if(V.isFunction(n))return n.call(this,l,o);if(V.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Jr(e),e){const o=V.findKey(this,e);return!!(o&&this[o]!==void 0&&(!n||Da(this,this[o],o,n)))}return!1}delete(e,n){const o=this;let l=!1;function u(f){if(f=Jr(f),f){const p=V.findKey(o,f);p&&(!n||Da(o,o[p],p,n))&&(delete o[p],l=!0)}}return V.isArray(e)?e.forEach(u):u(e),l}clear(e){const n=Object.keys(this);let o=n.length,l=!1;for(;o--;){const u=n[o];(!e||Da(this,this[u],u,e,!0))&&(delete this[u],l=!0)}return l}normalize(e){const n=this,o={};return V.forEach(this,(l,u)=>{const f=V.findKey(o,u);if(f){n[f]=ho(l),delete n[u];return}const p=e?UE(u):String(u).trim();p!==u&&delete n[u],n[p]=ho(l),o[p]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return V.forEach(this,(o,l)=>{o!=null&&o!==!1&&(n[l]=e&&V.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const o=new this(e);return n.forEach(l=>o.set(l)),o}static accessor(e){const o=(this[Ru]=this[Ru]={accessors:{}}).accessors,l=this.prototype;function u(f){const p=Jr(f);o[p]||(zE(l,f),o[p]=!0)}return V.isArray(e)?e.forEach(u):u(e),this}};Pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Pt.prototype,({value:i},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(o){this[n]=o}}});V.freezeMethods(Pt);function Ra(i,e){const n=this||As,o=e||n,l=Pt.from(o.headers);let u=o.data;return V.forEach(i,function(p){u=p.call(n,u,l.normalize(),e?e.status:void 0)}),l.normalize(),u}function ud(i){return!!(i&&i.__CANCEL__)}function Lr(i,e,n){me.call(this,i??"canceled",me.ERR_CANCELED,e,n),this.name="CanceledError"}V.inherits(Lr,me,{__CANCEL__:!0});function hd(i,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?i(n):e(new me("Request failed with status code "+n.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function jE(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function HE(i,e){i=i||10;const n=new Array(i),o=new Array(i);let l=0,u=0,f;return e=e!==void 0?e:1e3,function(E){const m=Date.now(),b=o[u];f||(f=m),n[l]=E,o[l]=m;let y=u,S=0;for(;y!==l;)S+=n[y++],y=y%i;if(l=(l+1)%i,l===u&&(u=(u+1)%i),m-f<e)return;const v=b&&m-b;return v?Math.round(S*1e3/v):void 0}}function VE(i,e){let n=0,o=1e3/e,l,u;const f=(m,b=Date.now())=>{n=b,l=null,u&&(clearTimeout(u),u=null),i.apply(null,m)};return[(...m)=>{const b=Date.now(),y=b-n;y>=o?f(m,b):(l=m,u||(u=setTimeout(()=>{u=null,f(l)},o-y)))},()=>l&&f(l)]}const wo=(i,e,n=3)=>{let o=0;const l=HE(50,250);return VE(u=>{const f=u.loaded,p=u.lengthComputable?u.total:void 0,E=f-o,m=l(E),b=f<=p;o=f;const y={loaded:f,total:p,progress:p?f/p:void 0,bytes:E,rate:m||void 0,estimated:m&&p&&b?(p-f)/m:void 0,event:u,lengthComputable:p!=null,[e?"download":"upload"]:!0};i(y)},n)},Lu=(i,e)=>{const n=i!=null;return[o=>e[0]({lengthComputable:n,total:i,loaded:o}),e[1]]},Pu=i=>(...e)=>V.asap(()=>i(...e)),WE=wt.hasStandardBrowserEnv?((i,e)=>n=>(n=new URL(n,wt.origin),i.protocol===n.protocol&&i.host===n.host&&(e||i.port===n.port)))(new URL(wt.origin),wt.navigator&&/(msie|trident)/i.test(wt.navigator.userAgent)):()=>!0,YE=wt.hasStandardBrowserEnv?{write(i,e,n,o,l,u){const f=[i+"="+encodeURIComponent(e)];V.isNumber(n)&&f.push("expires="+new Date(n).toGMTString()),V.isString(o)&&f.push("path="+o),V.isString(l)&&f.push("domain="+l),u===!0&&f.push("secure"),document.cookie=f.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function XE(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function GE(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function fd(i,e,n){let o=!XE(e);return i&&(o||n==!1)?GE(i,e):e}const Bu=i=>i instanceof Pt?{...i}:i;function Hi(i,e){e=e||{};const n={};function o(m,b,y,S){return V.isPlainObject(m)&&V.isPlainObject(b)?V.merge.call({caseless:S},m,b):V.isPlainObject(b)?V.merge({},b):V.isArray(b)?b.slice():b}function l(m,b,y,S){if(V.isUndefined(b)){if(!V.isUndefined(m))return o(void 0,m,y,S)}else return o(m,b,y,S)}function u(m,b){if(!V.isUndefined(b))return o(void 0,b)}function f(m,b){if(V.isUndefined(b)){if(!V.isUndefined(m))return o(void 0,m)}else return o(void 0,b)}function p(m,b,y){if(y in e)return o(m,b);if(y in i)return o(void 0,m)}const E={url:u,method:u,data:u,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:p,headers:(m,b,y)=>l(Bu(m),Bu(b),y,!0)};return V.forEach(Object.keys(Object.assign({},i,e)),function(b){const y=E[b]||l,S=y(i[b],e[b],b);V.isUndefined(S)&&y!==p||(n[b]=S)}),n}const dd=i=>{const e=Hi({},i);let{data:n,withXSRFToken:o,xsrfHeaderName:l,xsrfCookieName:u,headers:f,auth:p}=e;e.headers=f=Pt.from(f),e.url=ad(fd(e.baseURL,e.url,e.allowAbsoluteUrls),i.params,i.paramsSerializer),p&&f.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let E;if(V.isFormData(n)){if(wt.hasStandardBrowserEnv||wt.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((E=f.getContentType())!==!1){const[m,...b]=E?E.split(";").map(y=>y.trim()).filter(Boolean):[];f.setContentType([m||"multipart/form-data",...b].join("; "))}}if(wt.hasStandardBrowserEnv&&(o&&V.isFunction(o)&&(o=o(e)),o||o!==!1&&WE(e.url))){const m=l&&u&&YE.read(u);m&&f.set(l,m)}return e},$E=typeof XMLHttpRequest<"u",qE=$E&&function(i){return new Promise(function(n,o){const l=dd(i);let u=l.data;const f=Pt.from(l.headers).normalize();let{responseType:p,onUploadProgress:E,onDownloadProgress:m}=l,b,y,S,v,N;function M(){v&&v(),N&&N(),l.cancelToken&&l.cancelToken.unsubscribe(b),l.signal&&l.signal.removeEventListener("abort",b)}let O=new XMLHttpRequest;O.open(l.method.toUpperCase(),l.url,!0),O.timeout=l.timeout;function L(){if(!O)return;const F=Pt.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),ee={data:!p||p==="text"||p==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:F,config:i,request:O};hd(function(j){n(j),M()},function(j){o(j),M()},ee),O=null}"onloadend"in O?O.onloadend=L:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(L)},O.onabort=function(){O&&(o(new me("Request aborted",me.ECONNABORTED,i,O)),O=null)},O.onerror=function(){o(new me("Network Error",me.ERR_NETWORK,i,O)),O=null},O.ontimeout=function(){let W=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const ee=l.transitional||ld;l.timeoutErrorMessage&&(W=l.timeoutErrorMessage),o(new me(W,ee.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,i,O)),O=null},u===void 0&&f.setContentType(null),"setRequestHeader"in O&&V.forEach(f.toJSON(),function(W,ee){O.setRequestHeader(ee,W)}),V.isUndefined(l.withCredentials)||(O.withCredentials=!!l.withCredentials),p&&p!=="json"&&(O.responseType=l.responseType),m&&([S,N]=wo(m,!0),O.addEventListener("progress",S)),E&&O.upload&&([y,v]=wo(E),O.upload.addEventListener("progress",y),O.upload.addEventListener("loadend",v)),(l.cancelToken||l.signal)&&(b=F=>{O&&(o(!F||F.type?new Lr(null,i,O):F),O.abort(),O=null)},l.cancelToken&&l.cancelToken.subscribe(b),l.signal&&(l.signal.aborted?b():l.signal.addEventListener("abort",b)));const k=jE(l.url);if(k&&wt.protocols.indexOf(k)===-1){o(new me("Unsupported protocol "+k+":",me.ERR_BAD_REQUEST,i));return}O.send(u||null)})},KE=(i,e)=>{const{length:n}=i=i?i.filter(Boolean):[];if(e||n){let o=new AbortController,l;const u=function(m){if(!l){l=!0,p();const b=m instanceof Error?m:this.reason;o.abort(b instanceof me?b:new Lr(b instanceof Error?b.message:b))}};let f=e&&setTimeout(()=>{f=null,u(new me(`timeout ${e} of ms exceeded`,me.ETIMEDOUT))},e);const p=()=>{i&&(f&&clearTimeout(f),f=null,i.forEach(m=>{m.unsubscribe?m.unsubscribe(u):m.removeEventListener("abort",u)}),i=null)};i.forEach(m=>m.addEventListener("abort",u));const{signal:E}=o;return E.unsubscribe=()=>V.asap(p),E}},ZE=function*(i,e){let n=i.byteLength;if(n<e){yield i;return}let o=0,l;for(;o<n;)l=o+e,yield i.slice(o,l),o=l},QE=async function*(i,e){for await(const n of JE(i))yield*ZE(n,e)},JE=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:n,value:o}=await e.read();if(n)break;yield o}}finally{await e.cancel()}},ku=(i,e,n,o)=>{const l=QE(i,e);let u=0,f,p=E=>{f||(f=!0,o&&o(E))};return new ReadableStream({async pull(E){try{const{done:m,value:b}=await l.next();if(m){p(),E.close();return}let y=b.byteLength;if(n){let S=u+=y;n(S)}E.enqueue(new Uint8Array(b))}catch(m){throw p(m),m}},cancel(E){return p(E),l.return()}},{highWaterMark:2})},Vo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gd=Vo&&typeof ReadableStream=="function",eb=Vo&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),pd=(i,...e)=>{try{return!!i(...e)}catch{return!1}},tb=gd&&pd(()=>{let i=!1;const e=new Request(wt.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),Fu=64*1024,fl=gd&&pd(()=>V.isReadableStream(new Response("").body)),yo={stream:fl&&(i=>i.body)};Vo&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!yo[e]&&(yo[e]=V.isFunction(i[e])?n=>n[e]():(n,o)=>{throw new me(`Response type '${e}' is not supported`,me.ERR_NOT_SUPPORT,o)})})})(new Response);const nb=async i=>{if(i==null)return 0;if(V.isBlob(i))return i.size;if(V.isSpecCompliantForm(i))return(await new Request(wt.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(V.isArrayBufferView(i)||V.isArrayBuffer(i))return i.byteLength;if(V.isURLSearchParams(i)&&(i=i+""),V.isString(i))return(await eb(i)).byteLength},ib=async(i,e)=>{const n=V.toFiniteNumber(i.getContentLength());return n??nb(e)},rb=Vo&&(async i=>{let{url:e,method:n,data:o,signal:l,cancelToken:u,timeout:f,onDownloadProgress:p,onUploadProgress:E,responseType:m,headers:b,withCredentials:y="same-origin",fetchOptions:S}=dd(i);m=m?(m+"").toLowerCase():"text";let v=KE([l,u&&u.toAbortSignal()],f),N;const M=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let O;try{if(E&&tb&&n!=="get"&&n!=="head"&&(O=await ib(b,o))!==0){let ee=new Request(e,{method:"POST",body:o,duplex:"half"}),Z;if(V.isFormData(o)&&(Z=ee.headers.get("content-type"))&&b.setContentType(Z),ee.body){const[j,ie]=Lu(O,wo(Pu(E)));o=ku(ee.body,Fu,j,ie)}}V.isString(y)||(y=y?"include":"omit");const L="credentials"in Request.prototype;N=new Request(e,{...S,signal:v,method:n.toUpperCase(),headers:b.normalize().toJSON(),body:o,duplex:"half",credentials:L?y:void 0});let k=await fetch(N);const F=fl&&(m==="stream"||m==="response");if(fl&&(p||F&&M)){const ee={};["status","statusText","headers"].forEach(Y=>{ee[Y]=k[Y]});const Z=V.toFiniteNumber(k.headers.get("content-length")),[j,ie]=p&&Lu(Z,wo(Pu(p),!0))||[];k=new Response(ku(k.body,Fu,j,()=>{ie&&ie(),M&&M()}),ee)}m=m||"text";let W=await yo[V.findKey(yo,m)||"text"](k,i);return!F&&M&&M(),await new Promise((ee,Z)=>{hd(ee,Z,{data:W,headers:Pt.from(k.headers),status:k.status,statusText:k.statusText,config:i,request:N})})}catch(L){throw M&&M(),L&&L.name==="TypeError"&&/fetch/i.test(L.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,i,N),{cause:L.cause||L}):me.from(L,L&&L.code,i,N)}}),dl={http:bE,xhr:qE,fetch:rb};V.forEach(dl,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const Uu=i=>`- ${i}`,sb=i=>V.isFunction(i)||i===null||i===!1,md={getAdapter:i=>{i=V.isArray(i)?i:[i];const{length:e}=i;let n,o;const l={};for(let u=0;u<e;u++){n=i[u];let f;if(o=n,!sb(n)&&(o=dl[(f=String(n)).toLowerCase()],o===void 0))throw new me(`Unknown adapter '${f}'`);if(o)break;l[f||"#"+u]=o}if(!o){const u=Object.entries(l).map(([p,E])=>`adapter ${p} `+(E===!1?"is not supported by the environment":"is not available in the build"));let f=e?u.length>1?`since :
`+u.map(Uu).join(`
`):" "+Uu(u[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return o},adapters:dl};function La(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Lr(null,i)}function zu(i){return La(i),i.headers=Pt.from(i.headers),i.data=Ra.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),md.getAdapter(i.adapter||As.adapter)(i).then(function(o){return La(i),o.data=Ra.call(i,i.transformResponse,o),o.headers=Pt.from(o.headers),o},function(o){return ud(o)||(La(i),o&&o.response&&(o.response.data=Ra.call(i,i.transformResponse,o.response),o.response.headers=Pt.from(o.response.headers))),Promise.reject(o)})}const xd="1.8.4",Wo={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Wo[i]=function(o){return typeof o===i||"a"+(e<1?"n ":" ")+i}});const ju={};Wo.transitional=function(e,n,o){function l(u,f){return"[Axios v"+xd+"] Transitional option '"+u+"'"+f+(o?". "+o:"")}return(u,f,p)=>{if(e===!1)throw new me(l(f," has been removed"+(n?" in "+n:"")),me.ERR_DEPRECATED);return n&&!ju[f]&&(ju[f]=!0,console.warn(l(f," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(u,f,p):!0}};Wo.spelling=function(e){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${e}`),!0)};function ob(i,e,n){if(typeof i!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const o=Object.keys(i);let l=o.length;for(;l-- >0;){const u=o[l],f=e[u];if(f){const p=i[u],E=p===void 0||f(p,u,i);if(E!==!0)throw new me("option "+u+" must be "+E,me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new me("Unknown option "+u,me.ERR_BAD_OPTION)}}const fo={assertOptions:ob,validators:Wo},Sn=fo.validators;let Li=class{constructor(e){this.defaults=e,this.interceptors={request:new Du,response:new Du}}async request(e,n){try{return await this._request(e,n)}catch(o){if(o instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const u=l.stack?l.stack.replace(/^.+\n/,""):"";try{o.stack?u&&!String(o.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+u):o.stack=u}catch{}}throw o}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Hi(this.defaults,n);const{transitional:o,paramsSerializer:l,headers:u}=n;o!==void 0&&fo.assertOptions(o,{silentJSONParsing:Sn.transitional(Sn.boolean),forcedJSONParsing:Sn.transitional(Sn.boolean),clarifyTimeoutError:Sn.transitional(Sn.boolean)},!1),l!=null&&(V.isFunction(l)?n.paramsSerializer={serialize:l}:fo.assertOptions(l,{encode:Sn.function,serialize:Sn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),fo.assertOptions(n,{baseUrl:Sn.spelling("baseURL"),withXsrfToken:Sn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=u&&V.merge(u.common,u[n.method]);u&&V.forEach(["delete","get","head","post","put","patch","common"],N=>{delete u[N]}),n.headers=Pt.concat(f,u);const p=[];let E=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(n)===!1||(E=E&&M.synchronous,p.unshift(M.fulfilled,M.rejected))});const m=[];this.interceptors.response.forEach(function(M){m.push(M.fulfilled,M.rejected)});let b,y=0,S;if(!E){const N=[zu.bind(this),void 0];for(N.unshift.apply(N,p),N.push.apply(N,m),S=N.length,b=Promise.resolve(n);y<S;)b=b.then(N[y++],N[y++]);return b}S=p.length;let v=n;for(y=0;y<S;){const N=p[y++],M=p[y++];try{v=N(v)}catch(O){M.call(this,O);break}}try{b=zu.call(this,v)}catch(N){return Promise.reject(N)}for(y=0,S=m.length;y<S;)b=b.then(m[y++],m[y++]);return b}getUri(e){e=Hi(this.defaults,e);const n=fd(e.baseURL,e.url,e.allowAbsoluteUrls);return ad(n,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){Li.prototype[e]=function(n,o){return this.request(Hi(o||{},{method:e,url:n,data:(o||{}).data}))}});V.forEach(["post","put","patch"],function(e){function n(o){return function(u,f,p){return this.request(Hi(p||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:f}))}}Li.prototype[e]=n(),Li.prototype[e+"Form"]=n(!0)});let ab=class Ed{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const o=this;this.promise.then(l=>{if(!o._listeners)return;let u=o._listeners.length;for(;u-- >0;)o._listeners[u](l);o._listeners=null}),this.promise.then=l=>{let u;const f=new Promise(p=>{o.subscribe(p),u=p}).then(l);return f.cancel=function(){o.unsubscribe(u)},f},e(function(u,f,p){o.reason||(o.reason=new Lr(u,f,p),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=o=>{e.abort(o)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Ed(function(l){e=l}),cancel:e}}};function lb(i){return function(n){return i.apply(null,n)}}function cb(i){return V.isObject(i)&&i.isAxiosError===!0}const gl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gl).forEach(([i,e])=>{gl[e]=i});function bd(i){const e=new Li(i),n=Kf(Li.prototype.request,e);return V.extend(n,Li.prototype,e,{allOwnKeys:!0}),V.extend(n,e,null,{allOwnKeys:!0}),n.create=function(l){return bd(Hi(i,l))},n}const tt=bd(As);tt.Axios=Li;tt.CanceledError=Lr;tt.CancelToken=ab;tt.isCancel=ud;tt.VERSION=xd;tt.toFormData=Ho;tt.AxiosError=me;tt.Cancel=tt.CanceledError;tt.all=function(e){return Promise.all(e)};tt.spread=lb;tt.isAxiosError=cb;tt.mergeConfig=Hi;tt.AxiosHeaders=Pt;tt.formToJSON=i=>cd(V.isHTMLForm(i)?new FormData(i):i);tt.getAdapter=md.getAdapter;tt.HttpStatusCode=gl;tt.default=tt;const{Axios:AA,AxiosError:CA,CanceledError:_A,isCancel:vA,CancelToken:SA,VERSION:TA,all:IA,Cancel:OA,isAxiosError:NA,spread:MA,toFormData:DA,AxiosHeaders:RA,HttpStatusCode:LA,formToJSON:PA,getAdapter:BA,mergeConfig:kA}=tt;window.axios=tt;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var ne;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ne||(ne={}));var Hu=new Map([[ne.QR_CODE,"QR_CODE"],[ne.AZTEC,"AZTEC"],[ne.CODABAR,"CODABAR"],[ne.CODE_39,"CODE_39"],[ne.CODE_93,"CODE_93"],[ne.CODE_128,"CODE_128"],[ne.DATA_MATRIX,"DATA_MATRIX"],[ne.MAXICODE,"MAXICODE"],[ne.ITF,"ITF"],[ne.EAN_13,"EAN_13"],[ne.EAN_8,"EAN_8"],[ne.PDF_417,"PDF_417"],[ne.RSS_14,"RSS_14"],[ne.RSS_EXPANDED,"RSS_EXPANDED"],[ne.UPC_A,"UPC_A"],[ne.UPC_E,"UPC_E"],[ne.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Vu;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(Vu||(Vu={}));function ub(i){return Object.values(ne).includes(i)}var li;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(li||(li={}));var gn=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[li.SCAN_TYPE_CAMERA,li.SCAN_TYPE_FILE],i}(),wd=function(){function i(e,n){this.format=e,this.formatName=n}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!Hu.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,Hu.get(e))},i}(),Wu=function(){function i(){}return i.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i}(),pl;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(pl||(pl={}));var yd=function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:pl.UNKWOWN_ERROR}},i}(),Ad=function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i}();function In(i){return typeof i>"u"||i===null}function hb(i,e,n){return i>n?n:i<e?e:i}var Er=function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),Le=function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i}(),Yu=function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i}(),Cd=function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),f=Object.keys(e),p=0,E=f;p<E.length;p++){var m=E[p];if(u.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},i}(),Vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ss={exports:{}},db=ss.exports,Xu;function gb(){return Xu||(Xu=1,function(i,e){(function(n,o){o(e)})(db,function(n){function o(A){return A==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,t){A.__proto__=t}||function(A,t){for(var r in t)t.hasOwnProperty(r)&&(A[r]=t[r])};function u(A,t){l(A,t);function r(){this.constructor=A}A.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function f(A,t){var r=Object.setPrototypeOf;r?r(A,t):A.__proto__=t}function p(A,t){t===void 0&&(t=A.constructor);var r=Error.captureStackTrace;r&&r(A,t)}var E=function(A){u(t,A);function t(r){var s=this.constructor,a=A.call(this,r)||this;return Object.defineProperty(a,"name",{value:s.name,enumerable:!1}),f(a,s.prototype),p(a),a}return t}(Error);class m extends E{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}m.kind="Exception";class b extends m{}b.kind="ArgumentException";class y extends m{}y.kind="IllegalArgumentException";class S{constructor(t){if(this.binarizer=t,t===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,s,a){const c=this.binarizer.getLuminanceSource().crop(t,r,s,a);return new S(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class v extends m{static getChecksumInstance(){return new v}}v.kind="ChecksumException";class N{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(t,r,s,a,c){for(;c--;)s[a++]=t[r++]}static currentTimeMillis(){return Date.now()}}class O extends m{}O.kind="IndexOutOfBoundsException";class L extends O{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}L.kind="ArrayIndexOutOfBoundsException";class k{static fill(t,r){for(let s=0,a=t.length;s<a;s++)t[s]=r}static fillWithin(t,r,s,a){k.rangeCheck(t.length,r,s);for(let c=r;c<s;c++)t[c]=a}static rangeCheck(t,r,s){if(r>s)throw new y("fromIndex("+r+") > toIndex("+s+")");if(r<0)throw new L(r);if(s>t)throw new L(s)}static asList(...t){return t}static create(t,r,s){return Array.from({length:t}).map(c=>Array.from({length:r}).fill(s))}static createInt32Array(t,r,s){return Array.from({length:t}).map(c=>Int32Array.from({length:r}).fill(s))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let s=0,a=t.length;s<a;s++)if(t[s]!==r[s])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const s of t)r=31*r+s;return r}static fillUint8Array(t,r){for(let s=0;s!==t.length;s++)t[s]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const s=new Uint8Array(r);return s.set(t),s}return t.slice(0,r)}static copyOfRange(t,r,s){const a=s-r,c=new Int32Array(a);return M.arraycopy(t,r,c,0,a),c}static binarySearch(t,r,s){s===void 0&&(s=k.numberComparator);let a=0,c=t.length-1;for(;a<=c;){const h=c+a>>1,d=s(r,t[h]);if(d>0)a=h+1;else if(d<0)c=h-1;else return h}return-a-1}static numberComparator(t,r){return t-r}}class F{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let s=31;return r=t<<16,r!==0&&(s-=16,t=r),r=t<<8,r!==0&&(s-=8,t=r),r=t<<4,r!==0&&(s-=4,t=r),r=t<<2,r!==0&&(s-=2,t=r),s-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class W{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=W.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=W.makeArray(t);M.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const s=this.bits;let a=Math.floor(t/32),c=s[a];c&=~((1<<(t&31))-1);const h=s.length;for(;c===0;){if(++a===h)return r;c=s[a]}const d=a*32+F.numberOfTrailingZeros(c);return d>r?r:d}getNextUnset(t){const r=this.size;if(t>=r)return r;const s=this.bits;let a=Math.floor(t/32),c=~s[a];c&=~((1<<(t&31))-1);const h=s.length;for(;c===0;){if(++a===h)return r;c=~s[a]}const d=a*32+F.numberOfTrailingZeros(c);return d>r?r:d}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new y;if(r===t)return;r--;const s=Math.floor(t/32),a=Math.floor(r/32),c=this.bits;for(let h=s;h<=a;h++){const d=h>s?0:t&31,x=(2<<(h<a?31:r&31))-(1<<d);c[h]|=x}}clear(){const t=this.bits.length,r=this.bits;for(let s=0;s<t;s++)r[s]=0}isRange(t,r,s){if(r<t||t<0||r>this.size)throw new y;if(r===t)return!0;r--;const a=Math.floor(t/32),c=Math.floor(r/32),h=this.bits;for(let d=a;d<=c;d++){const g=d>a?0:t&31,w=(2<<(d<c?31:r&31))-(1<<g)&4294967295;if((h[d]&w)!==(s?w:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let s=r;s>0;s--)this.appendBit((t>>s-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let s=0;s<r;s++)this.appendBit(t.get(s))}xor(t){if(this.size!==t.size)throw new y("Sizes don't match");const r=this.bits;for(let s=0,a=r.length;s<a;s++)r[s]^=t.bits[s]}toBytes(t,r,s,a){for(let c=0;c<a;c++){let h=0;for(let d=0;d<8;d++)this.get(t)&&(h|=1<<7-d),t++;r[s+c]=h}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),s=r+1,a=this.bits;for(let c=0;c<s;c++){let h=a[c];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,t[r-c]=h}if(this.size!==s*32){const c=s*32-this.size;let h=t[0]>>>c;for(let d=1;d<s;d++){const g=t[d];h|=g<<32-c,t[d-1]=h,h=g>>>c}t[s-1]=h}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof W))return!1;const r=t;return this.size===r.size&&k.equals(this.bits,r.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let t="";for(let r=0,s=this.size;r<s;r++)(r&7)===0&&(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new W(this.size,this.bits.slice())}}var ee;(function(A){A[A.OTHER=0]="OTHER",A[A.PURE_BARCODE=1]="PURE_BARCODE",A[A.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",A[A.TRY_HARDER=3]="TRY_HARDER",A[A.CHARACTER_SET=4]="CHARACTER_SET",A[A.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",A[A.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",A[A.ASSUME_GS1=7]="ASSUME_GS1",A[A.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",A[A.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",A[A.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ee||(ee={}));var Z=ee;class j extends m{static getFormatInstance(){return new j}}j.kind="FormatException";var ie;(function(A){A[A.Cp437=0]="Cp437",A[A.ISO8859_1=1]="ISO8859_1",A[A.ISO8859_2=2]="ISO8859_2",A[A.ISO8859_3=3]="ISO8859_3",A[A.ISO8859_4=4]="ISO8859_4",A[A.ISO8859_5=5]="ISO8859_5",A[A.ISO8859_6=6]="ISO8859_6",A[A.ISO8859_7=7]="ISO8859_7",A[A.ISO8859_8=8]="ISO8859_8",A[A.ISO8859_9=9]="ISO8859_9",A[A.ISO8859_10=10]="ISO8859_10",A[A.ISO8859_11=11]="ISO8859_11",A[A.ISO8859_13=12]="ISO8859_13",A[A.ISO8859_14=13]="ISO8859_14",A[A.ISO8859_15=14]="ISO8859_15",A[A.ISO8859_16=15]="ISO8859_16",A[A.SJIS=16]="SJIS",A[A.Cp1250=17]="Cp1250",A[A.Cp1251=18]="Cp1251",A[A.Cp1252=19]="Cp1252",A[A.Cp1256=20]="Cp1256",A[A.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",A[A.UTF8=22]="UTF8",A[A.ASCII=23]="ASCII",A[A.Big5=24]="Big5",A[A.GB18030=25]="GB18030",A[A.EUC_KR=26]="EUC_KR"})(ie||(ie={}));class Y{constructor(t,r,s,...a){this.valueIdentifier=t,this.name=s,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,Y.VALUE_IDENTIFIER_TO_ECI.set(t,this),Y.NAME_TO_ECI.set(s,this);const c=this.values;for(let h=0,d=c.length;h!==d;h++){const g=c[h];Y.VALUES_TO_ECI.set(g,this)}for(const h of a)Y.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new j("incorect value");const r=Y.VALUES_TO_ECI.get(t);if(r===void 0)throw new j("incorect value");return r}static getCharacterSetECIByName(t){const r=Y.NAME_TO_ECI.get(t);if(r===void 0)throw new j("incorect value");return r}equals(t){if(!(t instanceof Y))return!1;const r=t;return this.getName()===r.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(ie.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(ie.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(ie.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(ie.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(ie.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(ie.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(ie.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(ie.Big5,28,"Big5"),Y.GB18030=new Y(ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(ie.EUC_KR,30,"EUC_KR","EUC-KR");class Me extends m{}Me.kind="UnsupportedOperationException";class Ce{static decode(t,r){const s=this.encodingName(r);return this.customDecoder?this.customDecoder(t,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(t,s):new TextDecoder(s).decode(t)}static shouldDecodeOnFallback(t){return!Ce.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const s=this.encodingName(r);return this.customEncoder?this.customEncoder(t,s):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof Y?t:Y.getCharacterSetECIByName(t)}static decodeFallback(t,r){const s=this.encodingCharacterSet(r);if(Ce.isDecodeFallbackSupported(s)){let a="";for(let c=0,h=t.length;c<h;c++){let d=t[c].toString(16);d.length<2&&(d="0"+d),a+="%"+d}return decodeURIComponent(a)}if(s.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Me(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(Y.UTF8)||t.equals(Y.ISO8859_1)||t.equals(Y.ASCII)}static encodeFallback(t){const s=btoa(unescape(encodeURIComponent(t))).split(""),a=[];for(let c=0;c<s.length;c++)a.push(s[c].charCodeAt(0));return new Uint8Array(a)}}class se{static castAsNonUtf8Char(t,r=null){const s=r?r.getName():this.ISO88591;return Ce.decode(new Uint8Array([t]),s)}static guessEncoding(t,r){if(r!=null&&r.get(Z.CHARACTER_SET)!==void 0)return r.get(Z.CHARACTER_SET).toString();const s=t.length;let a=!0,c=!0,h=!0,d=0,g=0,x=0,w=0,C=0,_=0,I=0,D=0,R=0,P=0,z=0;const q=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let K=0;K<s&&(a||c||h);K++){const $=t[K]&255;h&&(d>0?($&128)===0?h=!1:d--:($&128)!==0&&(($&64)===0?h=!1:(d++,($&32)===0?g++:(d++,($&16)===0?x++:(d++,($&8)===0?w++:h=!1))))),a&&($>127&&$<160?a=!1:$>159&&($<192||$===215||$===247)&&z++),c&&(C>0?$<64||$===127||$>252?c=!1:C--:$===128||$===160||$>239?c=!1:$>160&&$<224?(_++,D=0,I++,I>R&&(R=I)):$>127?(C++,I=0,D++,D>P&&(P=D)):(I=0,D=0))}return h&&d>0&&(h=!1),c&&C>0&&(c=!1),h&&(q||g+x+w>0)?se.UTF8:c&&(se.ASSUME_SHIFT_JIS||R>=3||P>=3)?se.SHIFT_JIS:a&&c?R===2&&_===2||z*10>=s?se.SHIFT_JIS:se.ISO88591:a?se.ISO88591:c?se.SHIFT_JIS:h?se.UTF8:se.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let s=-1;function a(h,d,g,x,w,C){if(h==="%%")return"%";if(r[++s]===void 0)return;h=x?parseInt(x.substr(1)):void 0;let _=w?parseInt(w.substr(1)):void 0,I;switch(C){case"s":I=r[s];break;case"c":I=r[s][0];break;case"f":I=parseFloat(r[s]).toFixed(h);break;case"p":I=parseFloat(r[s]).toPrecision(h);break;case"e":I=parseFloat(r[s]).toExponential(h);break;case"x":I=parseInt(r[s]).toString(_||16);break;case"d":I=parseFloat(parseInt(r[s],_||10).toPrecision(h)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(_);let D=parseInt(g),R=g&&g[0]+""=="0"?"0":" ";for(;I.length<D;)I=d!==void 0?I+R:R+I;return I}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,a)}static getBytes(t,r){return Ce.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}se.SHIFT_JIS=Y.SJIS.getName(),se.GB2312="GB2312",se.ISO88591=Y.ISO8859_1.getName(),se.EUC_JP="EUC_JP",se.UTF8=Y.UTF8.getName(),se.PLATFORM_DEFAULT_ENCODING=se.UTF8,se.ASSUME_SHIFT_JIS=!1;class oe{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=se.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,s){for(let a=r;r<r+s;a++)this.append(t[a]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class we{constructor(t,r,s,a){if(this.width=t,this.height=r,this.rowSize=s,this.bits=a,r==null&&(r=t),this.height=r,t<1||r<1)throw new y("Both dimensions must be greater than 0");s==null&&(s=Math.floor((t+31)/32)),this.rowSize=s,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,s=t[0].length,a=new we(s,r);for(let c=0;c<r;c++){const h=t[c];for(let d=0;d<s;d++)h[d]&&a.set(d,c)}return a}static parseFromString(t,r,s){if(t===null)throw new y("stringRepresentation cannot be null");const a=new Array(t.length);let c=0,h=0,d=-1,g=0,x=0;for(;x<t.length;)if(t.charAt(x)===`
`||t.charAt(x)==="\r"){if(c>h){if(d===-1)d=c-h;else if(c-h!==d)throw new y("row lengths do not match");h=c,g++}x++}else if(t.substring(x,x+r.length)===r)x+=r.length,a[c]=!0,c++;else if(t.substring(x,x+s.length)===s)x+=s.length,a[c]=!1,c++;else throw new y("illegal character encountered: "+t.substring(x));if(c>h){if(d===-1)d=c-h;else if(c-h!==d)throw new y("row lengths do not match");g++}const w=new we(d,g);for(let C=0;C<c;C++)a[C]&&w.set(Math.floor(C%d),Math.floor(C/d));return w}get(t,r){const s=r*this.rowSize+Math.floor(t/32);return(this.bits[s]>>>(t&31)&1)!==0}set(t,r){const s=r*this.rowSize+Math.floor(t/32);this.bits[s]|=1<<(t&31)&4294967295}unset(t,r){const s=r*this.rowSize+Math.floor(t/32);this.bits[s]&=~(1<<(t&31)&4294967295)}flip(t,r){const s=r*this.rowSize+Math.floor(t/32);this.bits[s]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new y("input matrix dimensions do not match");const r=new W(Math.floor(this.width/32)+1),s=this.rowSize,a=this.bits;for(let c=0,h=this.height;c<h;c++){const d=c*s,g=t.getRow(c,r).getBitArray();for(let x=0;x<s;x++)a[d+x]^=g[x]}}clear(){const t=this.bits,r=t.length;for(let s=0;s<r;s++)t[s]=0}setRegion(t,r,s,a){if(r<0||t<0)throw new y("Left and top must be nonnegative");if(a<1||s<1)throw new y("Height and width must be at least 1");const c=t+s,h=r+a;if(h>this.height||c>this.width)throw new y("The region must fit inside the matrix");const d=this.rowSize,g=this.bits;for(let x=r;x<h;x++){const w=x*d;for(let C=t;C<c;C++)g[w+Math.floor(C/32)]|=1<<(C&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new W(this.width):r.clear();const s=this.rowSize,a=this.bits,c=t*s;for(let h=0;h<s;h++)r.setBulk(h*32,a[c+h]);return r}setRow(t,r){M.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let s=new W(t),a=new W(t);for(let c=0,h=Math.floor((r+1)/2);c<h;c++)s=this.getRow(c,s),a=this.getRow(r-1-c,a),s.reverse(),a.reverse(),this.setRow(c,a),this.setRow(r-1-c,s)}getEnclosingRectangle(){const t=this.width,r=this.height,s=this.rowSize,a=this.bits;let c=t,h=r,d=-1,g=-1;for(let x=0;x<r;x++)for(let w=0;w<s;w++){const C=a[x*s+w];if(C!==0){if(x<h&&(h=x),x>g&&(g=x),w*32<c){let _=0;for(;(C<<31-_&4294967295)===0;)_++;w*32+_<c&&(c=w*32+_)}if(w*32+31>d){let _=31;for(;!(C>>>_);)_--;w*32+_>d&&(d=w*32+_)}}}return d<c||g<h?null:Int32Array.from([c,h,d-c+1,g-h+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let s=0;for(;s<r.length&&r[s]===0;)s++;if(s===r.length)return null;const a=s/t;let c=s%t*32;const h=r[s];let d=0;for(;(h<<31-d&4294967295)===0;)d++;return c+=d,Int32Array.from([c,a])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let s=r.length-1;for(;s>=0&&r[s]===0;)s--;if(s<0)return null;const a=Math.floor(s/t);let c=Math.floor(s%t)*32;const h=r[s];let d=31;for(;!(h>>>d);)d--;return c+=d,Int32Array.from([c,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof we))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&k.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+k.hashCode(this.bits),t}toString(t="X ",r="  ",s=`
`){return this.buildToString(t,r,s)}buildToString(t,r,s){let a=new oe;for(let c=0,h=this.height;c<h;c++){for(let d=0,g=this.width;d<g;d++)a.append(this.get(d,c)?t:r);a.append(s)}return a.toString()}clone(){return new we(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends m{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class _e extends N{constructor(t){super(t),this.luminances=_e.EMPTY,this.buckets=new Int32Array(_e.LUMINANCE_BUCKETS)}getBlackRow(t,r){const s=this.getLuminanceSource(),a=s.getWidth();r==null||r.getSize()<a?r=new W(a):r.clear(),this.initArrays(a);const c=s.getRow(t,this.luminances),h=this.buckets;for(let g=0;g<a;g++)h[(c[g]&255)>>_e.LUMINANCE_SHIFT]++;const d=_e.estimateBlackPoint(h);if(a<3)for(let g=0;g<a;g++)(c[g]&255)<d&&r.set(g);else{let g=c[0]&255,x=c[1]&255;for(let w=1;w<a-1;w++){const C=c[w+1]&255;(x*4-g-C)/2<d&&r.set(w),g=x,x=C}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),s=t.getHeight(),a=new we(r,s);this.initArrays(r);const c=this.buckets;for(let g=1;g<5;g++){const x=Math.floor(s*g/5),w=t.getRow(x,this.luminances),C=Math.floor(r*4/5);for(let _=Math.floor(r/5);_<C;_++){const I=w[_]&255;c[I>>_e.LUMINANCE_SHIFT]++}}const h=_e.estimateBlackPoint(c),d=t.getMatrix();for(let g=0;g<s;g++){const x=g*r;for(let w=0;w<r;w++)(d[x+w]&255)<h&&a.set(w,g)}return a}createBinarizer(t){return new _e(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let s=0;s<_e.LUMINANCE_BUCKETS;s++)r[s]=0}static estimateBlackPoint(t){const r=t.length;let s=0,a=0,c=0;for(let w=0;w<r;w++)t[w]>c&&(a=w,c=t[w]),t[w]>s&&(s=t[w]);let h=0,d=0;for(let w=0;w<r;w++){const C=w-a,_=t[w]*C*C;_>d&&(h=w,d=_)}if(a>h){const w=a;a=h,h=w}if(h-a<=r/16)throw new H;let g=h-1,x=-1;for(let w=h-1;w>a;w--){const C=w-a,_=C*C*(h-w)*(s-t[w]);_>x&&(g=w,x=_)}return g<<_e.LUMINANCE_SHIFT}}_e.LUMINANCE_BITS=5,_e.LUMINANCE_SHIFT=8-_e.LUMINANCE_BITS,_e.LUMINANCE_BUCKETS=1<<_e.LUMINANCE_BITS,_e.EMPTY=Uint8ClampedArray.from([0]);class ue extends _e{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),s=t.getHeight();if(r>=ue.MINIMUM_DIMENSION&&s>=ue.MINIMUM_DIMENSION){const a=t.getMatrix();let c=r>>ue.BLOCK_SIZE_POWER;(r&ue.BLOCK_SIZE_MASK)!==0&&c++;let h=s>>ue.BLOCK_SIZE_POWER;(s&ue.BLOCK_SIZE_MASK)!==0&&h++;const d=ue.calculateBlackPoints(a,c,h,r,s),g=new we(r,s);ue.calculateThresholdForBlock(a,c,h,r,s,d,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new ue(t)}static calculateThresholdForBlock(t,r,s,a,c,h,d){const g=c-ue.BLOCK_SIZE,x=a-ue.BLOCK_SIZE;for(let w=0;w<s;w++){let C=w<<ue.BLOCK_SIZE_POWER;C>g&&(C=g);const _=ue.cap(w,2,s-3);for(let I=0;I<r;I++){let D=I<<ue.BLOCK_SIZE_POWER;D>x&&(D=x);const R=ue.cap(I,2,r-3);let P=0;for(let q=-2;q<=2;q++){const K=h[_+q];P+=K[R-2]+K[R-1]+K[R]+K[R+1]+K[R+2]}const z=P/25;ue.thresholdBlock(t,D,C,z,a,d)}}}static cap(t,r,s){return t<r?r:t>s?s:t}static thresholdBlock(t,r,s,a,c,h){for(let d=0,g=s*c+r;d<ue.BLOCK_SIZE;d++,g+=c)for(let x=0;x<ue.BLOCK_SIZE;x++)(t[g+x]&255)<=a&&h.set(r+x,s+d)}static calculateBlackPoints(t,r,s,a,c){const h=c-ue.BLOCK_SIZE,d=a-ue.BLOCK_SIZE,g=new Array(s);for(let x=0;x<s;x++){g[x]=new Int32Array(r);let w=x<<ue.BLOCK_SIZE_POWER;w>h&&(w=h);for(let C=0;C<r;C++){let _=C<<ue.BLOCK_SIZE_POWER;_>d&&(_=d);let I=0,D=255,R=0;for(let z=0,q=w*a+_;z<ue.BLOCK_SIZE;z++,q+=a){for(let K=0;K<ue.BLOCK_SIZE;K++){const $=t[q+K]&255;I+=$,$<D&&(D=$),$>R&&(R=$)}if(R-D>ue.MIN_DYNAMIC_RANGE)for(z++,q+=a;z<ue.BLOCK_SIZE;z++,q+=a)for(let K=0;K<ue.BLOCK_SIZE;K++)I+=t[q+K]&255}let P=I>>ue.BLOCK_SIZE_POWER*2;if(R-D<=ue.MIN_DYNAMIC_RANGE&&(P=D/2,x>0&&C>0)){const z=(g[x-1][C]+2*g[x][C-1]+g[x-1][C-1])/4;D<z&&(P=z)}g[x][C]=P}}return g}}ue.BLOCK_SIZE_POWER=3,ue.BLOCK_SIZE=1<<ue.BLOCK_SIZE_POWER,ue.BLOCK_SIZE_MASK=ue.BLOCK_SIZE-1,ue.MINIMUM_DIMENSION=ue.BLOCK_SIZE*5,ue.MIN_DYNAMIC_RANGE=24;class Xt{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,s,a){throw new Me("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Me("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Me("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new oe;for(let s=0;s<this.height;s++){const a=this.getRow(s,t);for(let c=0;c<this.width;c++){const h=a[c]&255;let d;h<64?d="#":h<128?d="+":h<192?d=".":d=" ",r.append(d)}r.append(`
`)}return r.toString()}}class ot extends Xt{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const s=this.delegate.getRow(t,r),a=this.getWidth();for(let c=0;c<a;c++)s[c]=255-(s[c]&255);return s}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(r);for(let a=0;a<r;a++)s[a]=255-(t[a]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,s,a){return new ot(this.delegate.crop(t,r,s,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ot(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ot(this.delegate.rotateCounterClockwise45())}}class Bt extends Xt{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=Bt.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return Bt.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,s){const a=new Uint8ClampedArray(r*s);for(let c=0,h=0,d=t.length;c<d;c+=4,h++){let g;if(t[c+3]===0)g=255;else{const w=t[c],C=t[c+1],_=t[c+2];g=306*w+601*C+117*_+512>>10}a[h]=g}return a}getRow(t,r){if(t<0||t>=this.getHeight())throw new y("Requested row is outside the image: "+t);const s=this.getWidth(),a=t*s;return r===null?r=this.buffer.slice(a,a+s):(r.length<s&&(r=new Uint8ClampedArray(s)),r.set(this.buffer.slice(a,a+s))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,s,a){return super.crop(t,r,s,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),s=r.getContext("2d"),a=t*Bt.DEGREE_TO_RADIANS,c=this.canvas.width,h=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(a))*c+Math.abs(Math.sin(a))*h),g=Math.ceil(Math.abs(Math.sin(a))*c+Math.abs(Math.cos(a))*h);return r.width=d,r.height=g,s.translate(d/2,g/2),s.rotate(a),s.drawImage(this.canvas,c/-2,h/-2),this.buffer=Bt.makeBufferFromCanvasImageData(r),this}invert(){return new ot(this)}}Bt.DEGREE_TO_RADIANS=Math.PI/180;class $i{constructor(t,r,s){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Je=(globalThis||Vs||self||window||void 0)&&(globalThis||Vs||self||window||void 0).__awaiter||function(A,t,r,s){function a(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function d(w){try{x(s.next(w))}catch(C){h(C)}}function g(w){try{x(s.throw(w))}catch(C){h(C)}}function x(w){w.done?c(w.value):a(w.value).then(d,g)}x((s=s.apply(A,t||[])).next())})};class Gt{constructor(t,r=500,s){this.reader=t,this.timeBetweenScansMillis=r,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return Je(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const s of t){const a=s.kind==="video"?"videoinput":s.kind;if(a!=="videoinput")continue;const c=s.deviceId||s.id,h=s.label||`Video device ${r.length+1}`,d=s.groupId,g={deviceId:c,label:h,kind:a,groupId:d};r.push(g)}return r})}getVideoInputDevices(){return Je(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new $i(r.deviceId,r.label))})}findDeviceById(t){return Je(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(s=>s.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return Je(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return Je(this,void 0,void 0,function*(){this.reset();let s;t?s={deviceId:{exact:t}}:s={facingMode:"environment"};const a={video:s};return yield this.decodeOnceFromConstraints(a,r)})}decodeOnceFromConstraints(t,r){return Je(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(s,r)})}decodeOnceFromStream(t,r){return Je(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(t,r,s){return Je(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,s)})}decodeFromVideoDevice(t,r,s){return Je(this,void 0,void 0,function*(){let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeFromConstraints(c,r,s)})}decodeFromConstraints(t,r,s){return Je(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(a,r,s)})}decodeFromStream(t,r,s){return Je(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(a,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return Je(this,void 0,void 0,function*(){const s=this.prepareVideoElement(r);return this.addVideoSource(s,t),this.videoElement=s,this.stream=t,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(t){return new Promise((r,s)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return Je(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const s=document.getElementById(t);if(!s)throw new b(`element with id '${t}' not found`);if(s.nodeName.toLowerCase()!==r.toLowerCase())throw new b(`element with id '${t}' must be an ${r} element`);return s}decodeFromImage(t,r){if(!t&&!r)throw new b("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new b("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,s){if(t===void 0&&r===void 0)throw new b("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,s):this.decodeFromVideoElementContinuously(t,s)}decodeFromImageElement(t){if(!t)throw new b("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let s;return this.isImageLoaded(r)?s=this.decodeOnce(r,!1,!0):s=this._decodeOnLoadImage(r),s}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const s=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(s,r)}_decodeFromVideoElementSetup(t){if(!t)throw new b("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new b("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const s=this._decodeOnLoadImage(r);return r.src=t,s}decodeFromVideoUrl(t){if(!t)throw new b("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),s=this.decodeFromVideoElement(r);return r.src=t,s}decodeFromVideoUrlContinuously(t,r){if(!t)throw new b("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(s,r);return s.src=t,a}_decodeOnLoadImage(t){return new Promise((r,s)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,s),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return Je(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return Je(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,s=!0){this._stopAsyncDecode=!1;const a=(c,h)=>{if(this._stopAsyncDecode){h(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(t);c(d)}catch(d){const g=r&&d instanceof H,w=(d instanceof v||d instanceof j)&&s;if(g||w)return setTimeout(a,this._timeBetweenDecodingAttempts,c,h);h(d)}};return new Promise((c,h)=>a(c,h))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(t);r(a,null),setTimeout(s,this.timeBetweenScansMillis)}catch(a){r(null,a);const c=a instanceof v||a instanceof j,h=a instanceof H;(c||h)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,s){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,s=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),s=new Bt(r),a=new ue(s);return new S(a)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let s,a;return typeof t<"u"&&(t instanceof HTMLVideoElement?(s=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(s=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),r.style.width=s+"px",r.style.height=a+"px",r.width=s,r.height=a,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class $e{constructor(t,r,s=r==null?0:8*r.length,a,c,h=M.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=s,this.resultPoints=a,this.format=c,this.timestamp=h,this.text=t,this.rawBytes=r,s==null?this.numBits=r==null?0:8*r.length:this.numBits=s,this.resultPoints=a,this.format=c,this.resultMetadata=null,h==null?this.timestamp=M.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const s=new Array(r.length+t.length);M.arraycopy(r,0,s,0,r.length),M.arraycopy(t,0,s,r.length,t.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $t;(function(A){A[A.AZTEC=0]="AZTEC",A[A.CODABAR=1]="CODABAR",A[A.CODE_39=2]="CODE_39",A[A.CODE_93=3]="CODE_93",A[A.CODE_128=4]="CODE_128",A[A.DATA_MATRIX=5]="DATA_MATRIX",A[A.EAN_8=6]="EAN_8",A[A.EAN_13=7]="EAN_13",A[A.ITF=8]="ITF",A[A.MAXICODE=9]="MAXICODE",A[A.PDF_417=10]="PDF_417",A[A.QR_CODE=11]="QR_CODE",A[A.RSS_14=12]="RSS_14",A[A.RSS_EXPANDED=13]="RSS_EXPANDED",A[A.UPC_A=14]="UPC_A",A[A.UPC_E=15]="UPC_E",A[A.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($t||($t={}));var le=$t,Xn;(function(A){A[A.OTHER=0]="OTHER",A[A.ORIENTATION=1]="ORIENTATION",A[A.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",A[A.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",A[A.ISSUE_NUMBER=4]="ISSUE_NUMBER",A[A.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",A[A.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",A[A.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",A[A.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",A[A.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",A[A.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Xn||(Xn={}));var ze=Xn;class Pn{constructor(t,r,s,a,c=-1,h=-1){this.rawBytes=t,this.text=r,this.byteSegments=s,this.ecLevel=a,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=h,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class pi{exp(t){return this.expTable[t]}log(t){if(t===0)throw new y;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class ut{constructor(t,r){if(r.length===0)throw new y;this.field=t;const s=r.length;if(s>1&&r[0]===0){let a=1;for(;a<s&&r[a]===0;)a++;a===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-a),M.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let s;if(t===1){s=0;for(let h=0,d=r.length;h!==d;h++){const g=r[h];s=pi.addOrSubtract(s,g)}return s}s=r[0];const a=r.length,c=this.field;for(let h=1;h<a;h++)s=pi.addOrSubtract(c.multiply(t,s),r[h]);return s}addOrSubtract(t){if(!this.field.equals(t.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,s=t.coefficients;if(r.length>s.length){const h=r;r=s,s=h}let a=new Int32Array(s.length);const c=s.length-r.length;M.arraycopy(s,0,a,0,c);for(let h=c;h<s.length;h++)a[h]=pi.addOrSubtract(r[h-c],s[h]);return new ut(this.field,a)}multiply(t){if(!this.field.equals(t.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,s=r.length,a=t.coefficients,c=a.length,h=new Int32Array(s+c-1),d=this.field;for(let g=0;g<s;g++){const x=r[g];for(let w=0;w<c;w++)h[g+w]=pi.addOrSubtract(h[g+w],d.multiply(x,a[w]))}return new ut(d,h)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,s=this.field,a=new Int32Array(r),c=this.coefficients;for(let h=0;h<r;h++)a[h]=s.multiply(c[h],t);return new ut(s,a)}multiplyByMonomial(t,r){if(t<0)throw new y;if(r===0)return this.field.getZero();const s=this.coefficients,a=s.length,c=new Int32Array(a+t),h=this.field;for(let d=0;d<a;d++)c[d]=h.multiply(s[d],r);return new ut(h,c)}divide(t){if(!this.field.equals(t.field))throw new y("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new y("Divide by 0");const r=this.field;let s=r.getZero(),a=this;const c=t.getCoefficient(t.getDegree()),h=r.inverse(c);for(;a.getDegree()>=t.getDegree()&&!a.isZero();){const d=a.getDegree()-t.getDegree(),g=r.multiply(a.getCoefficient(a.getDegree()),h),x=t.multiplyByMonomial(d,g),w=r.buildMonomial(d,g);s=s.addOrSubtract(w),a=a.addOrSubtract(x)}return[s,a]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);if(s!==0){if(s<0?(t+=" - ",s=-s):t.length>0&&(t+=" + "),r===0||s!==1){const a=this.field.log(s);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class qi extends m{}qi.kind="ArithmeticException";class ve extends pi{constructor(t,r,s){super(),this.primitive=t,this.size=r,this.generatorBase=s;const a=new Int32Array(r);let c=1;for(let d=0;d<r;d++)a[d]=c,c*=2,c>=r&&(c^=t,c&=r-1);this.expTable=a;const h=new Int32Array(r);for(let d=0;d<r-1;d++)h[a[d]]=d;this.logTable=h,this.zero=new ut(this,Int32Array.from([0])),this.one=new ut(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new y;if(r===0)return this.zero;const s=new Int32Array(t+1);return s[0]=r,new ut(this,s)}inverse(t){if(t===0)throw new qi;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}ve.AZTEC_DATA_12=new ve(4201,4096,1),ve.AZTEC_DATA_10=new ve(1033,1024,1),ve.AZTEC_DATA_6=new ve(67,64,1),ve.AZTEC_PARAM=new ve(19,16,1),ve.QR_CODE_FIELD_256=new ve(285,256,0),ve.DATA_MATRIX_FIELD_256=new ve(301,256,1),ve.AZTEC_DATA_8=ve.DATA_MATRIX_FIELD_256,ve.MAXICODE_FIELD_64=ve.AZTEC_DATA_6;class Gn extends m{}Gn.kind="ReedSolomonException";class qt extends m{}qt.kind="IllegalStateException";class $n{constructor(t){this.field=t}decode(t,r){const s=this.field,a=new ut(s,t),c=new Int32Array(r);let h=!0;for(let I=0;I<r;I++){const D=a.evaluateAt(s.exp(I+s.getGeneratorBase()));c[c.length-1-I]=D,D!==0&&(h=!1)}if(h)return;const d=new ut(s,c),g=this.runEuclideanAlgorithm(s.buildMonomial(r,1),d,r),x=g[0],w=g[1],C=this.findErrorLocations(x),_=this.findErrorMagnitudes(w,C);for(let I=0;I<C.length;I++){const D=t.length-1-s.log(C[I]);if(D<0)throw new Gn("Bad error location");t[D]=ve.addOrSubtract(t[D],_[I])}}runEuclideanAlgorithm(t,r,s){if(t.getDegree()<r.getDegree()){const I=t;t=r,r=I}const a=this.field;let c=t,h=r,d=a.getZero(),g=a.getOne();for(;h.getDegree()>=(s/2|0);){let I=c,D=d;if(c=h,d=g,c.isZero())throw new Gn("r_{i-1} was zero");h=I;let R=a.getZero();const P=c.getCoefficient(c.getDegree()),z=a.inverse(P);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){const q=h.getDegree()-c.getDegree(),K=a.multiply(h.getCoefficient(h.getDegree()),z);R=R.addOrSubtract(a.buildMonomial(q,K)),h=h.addOrSubtract(c.multiplyByMonomial(q,K))}if(g=R.multiply(d).addOrSubtract(D),h.getDegree()>=c.getDegree())throw new qt("Division algorithm failed to reduce polynomial?")}const x=g.getCoefficient(0);if(x===0)throw new Gn("sigmaTilde(0) was zero");const w=a.inverse(x),C=g.multiplyScalar(w),_=h.multiplyScalar(w);return[C,_]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const s=new Int32Array(r);let a=0;const c=this.field;for(let h=1;h<c.getSize()&&a<r;h++)t.evaluateAt(h)===0&&(s[a]=c.inverse(h),a++);if(a!==r)throw new Gn("Error locator degree does not match number of roots");return s}findErrorMagnitudes(t,r){const s=r.length,a=new Int32Array(s),c=this.field;for(let h=0;h<s;h++){const d=c.inverse(r[h]);let g=1;for(let x=0;x<s;x++)if(h!==x){const w=c.multiply(r[x],d),C=(w&1)===0?w|1:w&-2;g=c.multiply(g,C)}a[h]=c.multiply(t.evaluateAt(d),c.inverse(g)),c.getGeneratorBase()!==0&&(a[h]=c.multiply(a[h],d))}return a}}var nt;(function(A){A[A.UPPER=0]="UPPER",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.DIGIT=3]="DIGIT",A[A.PUNCT=4]="PUNCT",A[A.BINARY=5]="BINARY"})(nt||(nt={}));class Pe{decode(t){this.ddata=t;let r=t.getBits(),s=this.extractBits(r),a=this.correctBits(s),c=Pe.convertBoolArrayToByteArray(a),h=Pe.getEncodedData(a),d=new Pn(c,h,null,null);return d.setNumBits(a.length),d}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,s=nt.UPPER,a=nt.UPPER,c="",h=0;for(;h<r;)if(a===nt.BINARY){if(r-h<5)break;let d=Pe.readCode(t,h,5);if(h+=5,d===0){if(r-h<11)break;d=Pe.readCode(t,h,11)+31,h+=11}for(let g=0;g<d;g++){if(r-h<8){h=r;break}const x=Pe.readCode(t,h,8);c+=se.castAsNonUtf8Char(x),h+=8}a=s}else{let d=a===nt.DIGIT?4:5;if(r-h<d)break;let g=Pe.readCode(t,h,d);h+=d;let x=Pe.getCharacter(a,g);x.startsWith("CTRL_")?(s=a,a=Pe.getTable(x.charAt(5)),x.charAt(6)==="L"&&(s=a)):(c+=x,a=s)}return c}static getTable(t){switch(t){case"L":return nt.LOWER;case"P":return nt.PUNCT;case"M":return nt.MIXED;case"D":return nt.DIGIT;case"B":return nt.BINARY;case"U":default:return nt.UPPER}}static getCharacter(t,r){switch(t){case nt.UPPER:return Pe.UPPER_TABLE[r];case nt.LOWER:return Pe.LOWER_TABLE[r];case nt.MIXED:return Pe.MIXED_TABLE[r];case nt.PUNCT:return Pe.PUNCT_TABLE[r];case nt.DIGIT:return Pe.DIGIT_TABLE[r];default:throw new qt("Bad table")}}correctBits(t){let r,s;this.ddata.getNbLayers()<=2?(s=6,r=ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,r=ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,r=ve.AZTEC_DATA_10):(s=12,r=ve.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),c=t.length/s;if(c<a)throw new j;let h=t.length%s,d=new Int32Array(c);for(let _=0;_<c;_++,h+=s)d[_]=Pe.readCode(t,h,s);try{new $n(r).decode(d,c-a)}catch(_){throw new j(_)}let g=(1<<s)-1,x=0;for(let _=0;_<a;_++){let I=d[_];if(I===0||I===g)throw new j;(I===1||I===g-1)&&x++}let w=new Array(a*s-x),C=0;for(let _=0;_<a;_++){let I=d[_];if(I===1||I===g-1)w.fill(I>1,C,C+s-1),C+=s-1;else for(let D=s-1;D>=0;--D)w[C++]=(I&1<<D)!==0}return w}extractBits(t){let r=this.ddata.isCompact(),s=this.ddata.getNbLayers(),a=(r?11:14)+s*4,c=new Int32Array(a),h=new Array(this.totalBitsInLayer(s,r));if(r)for(let d=0;d<c.length;d++)c[d]=d;else{let d=a+1+2*F.truncDivision(F.truncDivision(a,2)-1,15),g=a/2,x=F.truncDivision(d,2);for(let w=0;w<g;w++){let C=w+F.truncDivision(w,15);c[g-w-1]=x-C-1,c[g+w]=x+C+1}}for(let d=0,g=0;d<s;d++){let x=(s-d)*4+(r?9:12),w=d*2,C=a-1-w;for(let _=0;_<x;_++){let I=_*2;for(let D=0;D<2;D++)h[g+I+D]=t.get(c[w+D],c[w+_]),h[g+2*x+I+D]=t.get(c[w+_],c[C-D]),h[g+4*x+I+D]=t.get(c[C-D],c[C-_]),h[g+6*x+I+D]=t.get(c[C-_],c[w+D])}g+=x*8}return h}static readCode(t,r,s){let a=0;for(let c=r;c<r+s;c++)a<<=1,t[c]&&(a|=1);return a}static readByte(t,r){let s=t.length-r;return s>=8?Pe.readCode(t,r,8):Pe.readCode(t,r,s)<<8-s}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let s=0;s<r.length;s++)r[s]=Pe.readByte(t,8*s);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Pe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Pe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Pe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Pe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Pe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ye{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,s,a){const c=t-s,h=r-a;return Math.sqrt(c*c+h*h)}static sum(t){let r=0;for(let s=0,a=t.length;s!==a;s++){const c=t[s];r+=c}return r}}class Kt{static floatToIntBits(t){return t}}Kt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class re{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof re){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Kt.floatToIntBits(this.x)+Kt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),s=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);let c,h,d;if(s>=r&&s>=a?(h=t[0],c=t[1],d=t[2]):a>=s&&a>=r?(h=t[1],c=t[0],d=t[2]):(h=t[2],c=t[0],d=t[1]),this.crossProductZ(c,h,d)<0){const g=c;c=d,d=g}t[0]=c,t[1]=h,t[2]=d}static distance(t,r){return ye.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,s){const a=r.x,c=r.y;return(s.x-a)*(t.y-c)-(s.y-c)*(t.x-a)}}class mi{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class zr extends mi{constructor(t,r,s,a,c){super(t,r),this.compact=s,this.nbDatablocks=a,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class kt{constructor(t,r,s,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=kt.INIT_SIZE),s==null&&(s=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);const c=r/2|0;if(this.leftInit=s-c,this.rightInit=s+c,this.upInit=a-c,this.downInit=a+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let t=this.leftInit,r=this.rightInit,s=this.upInit,a=this.downInit,c=!1,h=!0,d=!1,g=!1,x=!1,w=!1,C=!1;const _=this.width,I=this.height;for(;h;){h=!1;let D=!0;for(;(D||!g)&&r<_;)D=this.containsBlackPoint(s,a,r,!1),D?(r++,h=!0,g=!0):g||r++;if(r>=_){c=!0;break}let R=!0;for(;(R||!x)&&a<I;)R=this.containsBlackPoint(t,r,a,!0),R?(a++,h=!0,x=!0):x||a++;if(a>=I){c=!0;break}let P=!0;for(;(P||!w)&&t>=0;)P=this.containsBlackPoint(s,a,t,!1),P?(t--,h=!0,w=!0):w||t--;if(t<0){c=!0;break}let z=!0;for(;(z||!C)&&s>=0;)z=this.containsBlackPoint(t,r,s,!0),z?(s--,h=!0,C=!0):C||s--;if(s<0){c=!0;break}h&&(d=!0)}if(!c&&d){const D=r-t;let R=null;for(let K=1;R===null&&K<D;K++)R=this.getBlackPointOnSegment(t,a-K,t+K,a);if(R==null)throw new H;let P=null;for(let K=1;P===null&&K<D;K++)P=this.getBlackPointOnSegment(t,s+K,t+K,s);if(P==null)throw new H;let z=null;for(let K=1;z===null&&K<D;K++)z=this.getBlackPointOnSegment(r,s+K,r-K,s);if(z==null)throw new H;let q=null;for(let K=1;q===null&&K<D;K++)q=this.getBlackPointOnSegment(r,a-K,r-K,a);if(q==null)throw new H;return this.centerEdges(q,R,z,P)}else throw new H}getBlackPointOnSegment(t,r,s,a){const c=ye.round(ye.distance(t,r,s,a)),h=(s-t)/c,d=(a-r)/c,g=this.image;for(let x=0;x<c;x++){const w=ye.round(t+x*h),C=ye.round(r+x*d);if(g.get(w,C))return new re(w,C)}return null}centerEdges(t,r,s,a){const c=t.getX(),h=t.getY(),d=r.getX(),g=r.getY(),x=s.getX(),w=s.getY(),C=a.getX(),_=a.getY(),I=kt.CORR;return c<this.width/2?[new re(C-I,_+I),new re(d+I,g+I),new re(x-I,w-I),new re(c+I,h-I)]:[new re(C+I,_+I),new re(d+I,g-I),new re(x-I,w+I),new re(c-I,h-I)]}containsBlackPoint(t,r,s,a){const c=this.image;if(a){for(let h=t;h<=r;h++)if(c.get(h,s))return!0}else for(let h=t;h<=r;h++)if(c.get(s,h))return!0;return!1}}kt.INIT_SIZE=10,kt.CORR=1;class Ki{static checkAndNudgePoints(t,r){const s=t.getWidth(),a=t.getHeight();let c=!0;for(let h=0;h<r.length&&c;h+=2){const d=Math.floor(r[h]),g=Math.floor(r[h+1]);if(d<-1||d>s||g<-1||g>a)throw new H;c=!1,d===-1?(r[h]=0,c=!0):d===s&&(r[h]=s-1,c=!0),g===-1?(r[h+1]=0,c=!0):g===a&&(r[h+1]=a-1,c=!0)}c=!0;for(let h=r.length-2;h>=0&&c;h-=2){const d=Math.floor(r[h]),g=Math.floor(r[h+1]);if(d<-1||d>s||g<-1||g>a)throw new H;c=!1,d===-1?(r[h]=0,c=!0):d===s&&(r[h]=s-1,c=!0),g===-1?(r[h+1]=0,c=!0):g===a&&(r[h+1]=a-1,c=!0)}}}class St{constructor(t,r,s,a,c,h,d,g,x){this.a11=t,this.a21=r,this.a31=s,this.a12=a,this.a22=c,this.a32=h,this.a13=d,this.a23=g,this.a33=x}static quadrilateralToQuadrilateral(t,r,s,a,c,h,d,g,x,w,C,_,I,D,R,P){const z=St.quadrilateralToSquare(t,r,s,a,c,h,d,g);return St.squareToQuadrilateral(x,w,C,_,I,D,R,P).times(z)}transformPoints(t){const r=t.length,s=this.a11,a=this.a12,c=this.a13,h=this.a21,d=this.a22,g=this.a23,x=this.a31,w=this.a32,C=this.a33;for(let _=0;_<r;_+=2){const I=t[_],D=t[_+1],R=c*I+g*D+C;t[_]=(s*I+h*D+x)/R,t[_+1]=(a*I+d*D+w)/R}}transformPointsWithValues(t,r){const s=this.a11,a=this.a12,c=this.a13,h=this.a21,d=this.a22,g=this.a23,x=this.a31,w=this.a32,C=this.a33,_=t.length;for(let I=0;I<_;I++){const D=t[I],R=r[I],P=c*D+g*R+C;t[I]=(s*D+h*R+x)/P,r[I]=(a*D+d*R+w)/P}}static squareToQuadrilateral(t,r,s,a,c,h,d,g){const x=t-s+c-d,w=r-a+h-g;if(x===0&&w===0)return new St(s-t,c-s,t,a-r,h-a,r,0,0,1);{const C=s-c,_=d-c,I=a-h,D=g-h,R=C*D-_*I,P=(x*D-_*w)/R,z=(C*w-x*I)/R;return new St(s-t+P*s,d-t+z*d,t,a-r+P*a,g-r+z*g,r,P,z,1)}}static quadrilateralToSquare(t,r,s,a,c,h,d,g){return St.squareToQuadrilateral(t,r,s,a,c,h,d,g).buildAdjoint()}buildAdjoint(){return new St(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new St(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class jr extends Ki{sampleGrid(t,r,s,a,c,h,d,g,x,w,C,_,I,D,R,P,z,q,K){const $=St.quadrilateralToQuadrilateral(a,c,h,d,g,x,w,C,_,I,D,R,P,z,q,K);return this.sampleGridWithTransform(t,r,s,$)}sampleGridWithTransform(t,r,s,a){if(r<=0||s<=0)throw new H;const c=new we(r,s),h=new Float32Array(2*r);for(let d=0;d<s;d++){const g=h.length,x=d+.5;for(let w=0;w<g;w+=2)h[w]=w/2+.5,h[w+1]=x;a.transformPoints(h),Ki.checkAndNudgePoints(t,h);try{for(let w=0;w<g;w+=2)t.get(Math.floor(h[w]),Math.floor(h[w+1]))&&c.set(w/2,d)}catch{throw new H}}return c}}class hn{static setGridSampler(t){hn.gridSampler=t}static getInstance(){return hn.gridSampler}}hn.gridSampler=new jr;class yt{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new re(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Oc{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),s=this.getBullsEyeCorners(r);if(t){let h=s[0];s[0]=s[2],s[2]=h}this.extractParameters(s);let a=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),c=this.getMatrixCornerPoints(s);return new zr(a,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new H;let r=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(s,r);let a=0;for(let h=0;h<4;h++){let d=s[(this.shift+h)%4];this.compact?(a<<=7,a+=d>>1&127):(a<<=10,a+=(d>>2&992)+(d>>1&31))}let c=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(t,r){let s=0;t.forEach((a,c,h)=>{let d=(a>>r-2<<1)+(a&1);s=(s<<3)+d}),s=((s&1)<<11)+(s>>1);for(let a=0;a<4;a++)if(F.bitCount(s^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new H}getCorrectedParameterData(t,r){let s,a;r?(s=7,a=2):(s=10,a=4);let c=s-a,h=new Int32Array(s);for(let g=s-1;g>=0;--g)h[g]=t&15,t>>=4;try{new $n(ve.AZTEC_PARAM).decode(h,c)}catch{throw new H}let d=0;for(let g=0;g<a;g++)d=(d<<4)+h[g];return d}getBullsEyeCorners(t){let r=t,s=t,a=t,c=t,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let C=this.getFirstDifferent(r,h,1,-1),_=this.getFirstDifferent(s,h,1,1),I=this.getFirstDifferent(a,h,-1,1),D=this.getFirstDifferent(c,h,-1,-1);if(this.nbCenterLayers>2){let R=this.distancePoint(D,C)*this.nbCenterLayers/(this.distancePoint(c,r)*(this.nbCenterLayers+2));if(R<.75||R>1.25||!this.isWhiteOrBlackRectangle(C,_,I,D))break}r=C,s=_,a=I,c=D,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let d=new re(r.getX()+.5,r.getY()-.5),g=new re(s.getX()+.5,s.getY()+.5),x=new re(a.getX()-.5,a.getY()+.5),w=new re(c.getX()-.5,c.getY()-.5);return this.expandSquare([d,g,x,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,s,a;try{let d=new kt(this.image).detect();t=d[0],r=d[1],s=d[2],a=d[3]}catch{let g=this.image.getWidth()/2,x=this.image.getHeight()/2;t=this.getFirstDifferent(new yt(g+7,x-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new yt(g+7,x+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new yt(g-7,x+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new yt(g-7,x-7),!1,-1,-1).toResultPoint()}let c=ye.round((t.getX()+a.getX()+r.getX()+s.getX())/4),h=ye.round((t.getY()+a.getY()+r.getY()+s.getY())/4);try{let d=new kt(this.image,15,c,h).detect();t=d[0],r=d[1],s=d[2],a=d[3]}catch{t=this.getFirstDifferent(new yt(c+7,h-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new yt(c+7,h+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new yt(c-7,h+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new yt(c-7,h-7),!1,-1,-1).toResultPoint()}return c=ye.round((t.getX()+a.getX()+r.getX()+s.getX())/4),h=ye.round((t.getY()+a.getY()+r.getY()+s.getY())/4),new yt(c,h)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,s,a,c){let h=hn.getInstance(),d=this.getDimension(),g=d/2-this.nbCenterLayers,x=d/2+this.nbCenterLayers;return h.sampleGrid(t,d,d,g,g,x,g,x,x,g,x,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY())}sampleLine(t,r,s){let a=0,c=this.distanceResultPoint(t,r),h=c/s,d=t.getX(),g=t.getY(),x=h*(r.getX()-t.getX())/c,w=h*(r.getY()-t.getY())/c;for(let C=0;C<s;C++)this.image.get(ye.round(d+C*x),ye.round(g+C*w))&&(a|=1<<s-C-1);return a}isWhiteOrBlackRectangle(t,r,s,a){let c=3;t=new yt(t.getX()-c,t.getY()+c),r=new yt(r.getX()-c,r.getY()-c),s=new yt(s.getX()+c,s.getY()-c),a=new yt(a.getX()+c,a.getY()+c);let h=this.getColor(a,t);if(h===0)return!1;let d=this.getColor(t,r);return d!==h||(d=this.getColor(r,s),d!==h)?!1:(d=this.getColor(s,a),d===h)}getColor(t,r){let s=this.distancePoint(t,r),a=(r.getX()-t.getX())/s,c=(r.getY()-t.getY())/s,h=0,d=t.getX(),g=t.getY(),x=this.image.get(t.getX(),t.getY()),w=Math.ceil(s);for(let _=0;_<w;_++)d+=a,g+=c,this.image.get(ye.round(d),ye.round(g))!==x&&h++;let C=h/s;return C>.1&&C<.9?0:C<=.1===x?1:-1}getFirstDifferent(t,r,s,a){let c=t.getX()+s,h=t.getY()+a;for(;this.isValid(c,h)&&this.image.get(c,h)===r;)c+=s,h+=a;for(c-=s,h-=a;this.isValid(c,h)&&this.image.get(c,h)===r;)c+=s;for(c-=s;this.isValid(c,h)&&this.image.get(c,h)===r;)h+=a;return h-=a,new yt(c,h)}expandSquare(t,r,s){let a=s/(2*r),c=t[0].getX()-t[2].getX(),h=t[0].getY()-t[2].getY(),d=(t[0].getX()+t[2].getX())/2,g=(t[0].getY()+t[2].getY())/2,x=new re(d+a*c,g+a*h),w=new re(d-a*c,g-a*h);c=t[1].getX()-t[3].getX(),h=t[1].getY()-t[3].getY(),d=(t[1].getX()+t[3].getX())/2,g=(t[1].getY()+t[3].getY())/2;let C=new re(d+a*c,g+a*h),_=new re(d-a*c,g-a*h);return[x,C,w,_]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=ye.round(t.getX()),s=ye.round(t.getY());return this.isValid(r,s)}distancePoint(t,r){return ye.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return ye.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class Ss{decode(t,r=null){let s=null,a=new Oc(t.getBlackMatrix()),c=null,h=null;try{let w=a.detectMirror(!1);c=w.getPoints(),this.reportFoundResultPoints(r,c),h=new Pe().decode(w)}catch(w){s=w}if(h==null)try{let w=a.detectMirror(!0);c=w.getPoints(),this.reportFoundResultPoints(r,c),h=new Pe().decode(w)}catch(w){throw s??w}let d=new $e(h.getText(),h.getRawBytes(),h.getNumBits(),c,le.AZTEC,M.currentTimeMillis()),g=h.getByteSegments();g!=null&&d.putMetadata(ze.BYTE_SEGMENTS,g);let x=h.getECLevel();return x!=null&&d.putMetadata(ze.ERROR_CORRECTION_LEVEL,x),d}reportFoundResultPoints(t,r){if(t!=null){let s=t.get(Z.NEED_RESULT_POINT_CALLBACK);s!=null&&r.forEach((a,c,h)=>{s.foundPossibleResultPoint(a)})}}reset(){}}class i0 extends Gt{constructor(t=500){super(new Ss,t)}}class it{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(Z.TRY_HARDER)===!0&&t.isRotateSupported()){const c=t.rotateCounterClockwise(),h=this.doDecode(c,r),d=h.getResultMetadata();let g=270;d!==null&&d.get(ze.ORIENTATION)===!0&&(g=g+d.get(ze.ORIENTATION)%360),h.putMetadata(ze.ORIENTATION,g);const x=h.getResultPoints();if(x!==null){const w=c.getHeight();for(let C=0;C<x.length;C++)x[C]=new re(w-x[C].getY()-1,x[C].getX())}return h}else throw new H}}reset(){}doDecode(t,r){const s=t.getWidth(),a=t.getHeight();let c=new W(s);const h=r&&r.get(Z.TRY_HARDER)===!0,d=Math.max(1,a>>(h?8:5));let g;h?g=a:g=15;const x=Math.trunc(a/2);for(let w=0;w<g;w++){const C=Math.trunc((w+1)/2),_=(w&1)===0,I=x+d*(_?C:-C);if(I<0||I>=a)break;try{c=t.getBlackRow(I,c)}catch{continue}for(let D=0;D<2;D++){if(D===1&&(c.reverse(),r&&r.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const R=new Map;r.forEach((P,z)=>R.set(z,P)),R.delete(Z.NEED_RESULT_POINT_CALLBACK),r=R}try{const R=this.decodeRow(I,c,r);if(D===1){R.putMetadata(ze.ORIENTATION,180);const P=R.getResultPoints();P!==null&&(P[0]=new re(s-P[0].getX()-1,P[0].getY()),P[1]=new re(s-P[1].getX()-1,P[1].getY()))}return R}catch{}}}throw new H}static recordPattern(t,r,s){const a=s.length;for(let x=0;x<a;x++)s[x]=0;const c=t.getSize();if(r>=c)throw new H;let h=!t.get(r),d=0,g=r;for(;g<c;){if(t.get(g)!==h)s[d]++;else{if(++d===a)break;s[d]=1,h=!h}g++}if(!(d===a||d===a-1&&g===c))throw new H}static recordPatternInReverse(t,r,s){let a=s.length,c=t.get(r);for(;r>0&&a>=0;)t.get(--r)!==c&&(a--,c=!c);if(a>=0)throw new H;it.recordPattern(t,r+1,s)}static patternMatchVariance(t,r,s){const a=t.length;let c=0,h=0;for(let x=0;x<a;x++)c+=t[x],h+=r[x];if(c<h)return Number.POSITIVE_INFINITY;const d=c/h;s*=d;let g=0;for(let x=0;x<a;x++){const w=t[x],C=r[x]*d,_=w>C?w-C:C-w;if(_>s)return Number.POSITIVE_INFINITY;g+=_}return g/c}}class Q extends it{static findStartPattern(t){const r=t.getSize(),s=t.getNextSet(0);let a=0,c=Int32Array.from([0,0,0,0,0,0]),h=s,d=!1;const g=6;for(let x=s;x<r;x++)if(t.get(x)!==d)c[a]++;else{if(a===g-1){let w=Q.MAX_AVG_VARIANCE,C=-1;for(let _=Q.CODE_START_A;_<=Q.CODE_START_C;_++){const I=it.patternMatchVariance(c,Q.CODE_PATTERNS[_],Q.MAX_INDIVIDUAL_VARIANCE);I<w&&(w=I,C=_)}if(C>=0&&t.isRange(Math.max(0,h-(x-h)/2),h,!1))return Int32Array.from([h,x,C]);h+=c[0]+c[1],c=c.slice(2,c.length-1),c[a-1]=0,c[a]=0,a--}else a++;c[a]=1,d=!d}throw new H}static decodeCode(t,r,s){it.recordPattern(t,s,r);let a=Q.MAX_AVG_VARIANCE,c=-1;for(let h=0;h<Q.CODE_PATTERNS.length;h++){const d=Q.CODE_PATTERNS[h],g=this.patternMatchVariance(r,d,Q.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,c=h)}if(c>=0)return c;throw new H}decodeRow(t,r,s){const a=s&&s.get(Z.ASSUME_GS1)===!0,c=Q.findStartPattern(r),h=c[2];let d=0;const g=new Uint8Array(20);g[d++]=h;let x;switch(h){case Q.CODE_START_A:x=Q.CODE_CODE_A;break;case Q.CODE_START_B:x=Q.CODE_CODE_B;break;case Q.CODE_START_C:x=Q.CODE_CODE_C;break;default:throw new j}let w=!1,C=!1,_="",I=c[0],D=c[1];const R=Int32Array.from([0,0,0,0,0,0]);let P=0,z=0,q=h,K=0,$=!0,be=!1,pe=!1;for(;!w;){const sr=C;switch(C=!1,P=z,z=Q.decodeCode(r,R,D),g[d++]=z,z!==Q.CODE_STOP&&($=!0),z!==Q.CODE_STOP&&(K++,q+=K*z),I=D,D+=R.reduce((D0,R0)=>D0+R0,0),z){case Q.CODE_START_A:case Q.CODE_START_B:case Q.CODE_START_C:throw new j}switch(x){case Q.CODE_CODE_A:if(z<64)pe===be?_+=String.fromCharCode(32+z):_+=String.fromCharCode(32+z+128),pe=!1;else if(z<96)pe===be?_+=String.fromCharCode(z-64):_+=String.fromCharCode(z+64),pe=!1;else switch(z!==Q.CODE_STOP&&($=!1),z){case Q.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case Q.CODE_FNC_2:case Q.CODE_FNC_3:break;case Q.CODE_FNC_4_A:!be&&pe?(be=!0,pe=!1):be&&pe?(be=!1,pe=!1):pe=!0;break;case Q.CODE_SHIFT:C=!0,x=Q.CODE_CODE_B;break;case Q.CODE_CODE_B:x=Q.CODE_CODE_B;break;case Q.CODE_CODE_C:x=Q.CODE_CODE_C;break;case Q.CODE_STOP:w=!0;break}break;case Q.CODE_CODE_B:if(z<96)pe===be?_+=String.fromCharCode(32+z):_+=String.fromCharCode(32+z+128),pe=!1;else switch(z!==Q.CODE_STOP&&($=!1),z){case Q.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case Q.CODE_FNC_2:case Q.CODE_FNC_3:break;case Q.CODE_FNC_4_B:!be&&pe?(be=!0,pe=!1):be&&pe?(be=!1,pe=!1):pe=!0;break;case Q.CODE_SHIFT:C=!0,x=Q.CODE_CODE_A;break;case Q.CODE_CODE_A:x=Q.CODE_CODE_A;break;case Q.CODE_CODE_C:x=Q.CODE_CODE_C;break;case Q.CODE_STOP:w=!0;break}break;case Q.CODE_CODE_C:if(z<100)z<10&&(_+="0"),_+=z;else switch(z!==Q.CODE_STOP&&($=!1),z){case Q.CODE_FNC_1:a&&(_.length===0?_+="]C1":_+="");break;case Q.CODE_CODE_A:x=Q.CODE_CODE_A;break;case Q.CODE_CODE_B:x=Q.CODE_CODE_B;break;case Q.CODE_STOP:w=!0;break}break}sr&&(x=x===Q.CODE_CODE_A?Q.CODE_CODE_B:Q.CODE_CODE_A)}const Nt=D-I;if(D=r.getNextUnset(D),!r.isRange(D,Math.min(r.getSize(),D+(D-I)/2),!1))throw new H;if(q-=K*P,q%103!==P)throw new v;const dn=_.length;if(dn===0)throw new H;dn>0&&$&&(x===Q.CODE_CODE_C?_=_.substring(0,dn-2):_=_.substring(0,dn-1));const Mt=(c[1]+c[0])/2,Ue=I+Nt/2,mt=g.length,Ft=new Uint8Array(mt);for(let sr=0;sr<mt;sr++)Ft[sr]=g[sr];const rr=[new re(Mt,t),new re(Ue,t)];return new $e(_,Ft,0,rr,le.CODE_128,new Date().getTime())}}Q.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Q.MAX_AVG_VARIANCE=.25,Q.MAX_INDIVIDUAL_VARIANCE=.7,Q.CODE_SHIFT=98,Q.CODE_CODE_C=99,Q.CODE_CODE_B=100,Q.CODE_CODE_A=101,Q.CODE_FNC_1=102,Q.CODE_FNC_2=97,Q.CODE_FNC_3=96,Q.CODE_FNC_4_A=101,Q.CODE_FNC_4_B=100,Q.CODE_START_A=103,Q.CODE_START_B=104,Q.CODE_START_C=105,Q.CODE_STOP=106;class at extends it{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,s){let a=this.counters;a.fill(0),this.decodeRowResult="";let c=at.findAsteriskPattern(r,a),h=r.getNextSet(c[1]),d=r.getSize(),g,x;do{at.recordPattern(r,h,a);let R=at.toNarrowWidePattern(a);if(R<0)throw new H;g=at.patternToChar(R),this.decodeRowResult+=g,x=h;for(let P of a)h+=P;h=r.getNextSet(h)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let w=0;for(let R of a)w+=R;let C=h-x-w;if(h!==d&&C*2<w)throw new H;if(this.usingCheckDigit){let R=this.decodeRowResult.length-1,P=0;for(let z=0;z<R;z++)P+=at.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(z));if(this.decodeRowResult.charAt(R)!==at.ALPHABET_STRING.charAt(P%43))throw new v;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new H;let _;this.extendedMode?_=at.decodeExtended(this.decodeRowResult):_=this.decodeRowResult;let I=(c[1]+c[0])/2,D=x+w/2;return new $e(_,null,0,[new re(I,t),new re(D,t)],le.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let s=t.getSize(),a=t.getNextSet(0),c=0,h=a,d=!1,g=r.length;for(let x=a;x<s;x++)if(t.get(x)!==d)r[c]++;else{if(c===g-1){if(this.toNarrowWidePattern(r)===at.ASTERISK_ENCODING&&t.isRange(Math.max(0,h-Math.floor((x-h)/2)),h,!1))return[h,x];h+=r[0]+r[1],r.copyWithin(0,2,2+c-1),r[c-1]=0,r[c]=0,c--}else c++;r[c]=1,d=!d}throw new H}static toNarrowWidePattern(t){let r=t.length,s=0,a;do{let c=2147483647;for(let g of t)g<c&&g>s&&(c=g);s=c,a=0;let h=0,d=0;for(let g=0;g<r;g++){let x=t[g];x>s&&(d|=1<<r-1-g,a++,h+=x)}if(a===3){for(let g=0;g<r&&a>0;g++){let x=t[g];if(x>s&&(a--,x*2>=h))return-1}return d}}while(a>3);return-1}static patternToChar(t){for(let r=0;r<at.CHARACTER_ENCODINGS.length;r++)if(at.CHARACTER_ENCODINGS[r]===t)return at.ALPHABET_STRING.charAt(r);if(t===at.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(t){let r=t.length,s="";for(let a=0;a<r;a++){let c=t.charAt(a);if(c==="+"||c==="$"||c==="%"||c==="/"){let h=t.charAt(a+1),d="\0";switch(c){case"+":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)+32);else throw new j;break;case"$":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)-64);else throw new j;break;case"%":if(h>="A"&&h<="E")d=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")d=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")d=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")d="\0";else if(h==="V")d="@";else if(h==="W")d="`";else if(h==="X"||h==="Y"||h==="Z")d="";else throw new j;break;case"/":if(h>="A"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")d=":";else throw new j;break}s+=d,a++}else s+=c}return s}}at.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",at.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],at.ASTERISK_ENCODING=148;class ke extends it{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,s){let a=this.decodeStart(r),c=this.decodeEnd(r),h=new oe;ke.decodeMiddle(r,a[1],c[0],h);let d=h.toString(),g=null;s!=null&&(g=s.get(Z.ALLOWED_LENGTHS)),g==null&&(g=ke.DEFAULT_ALLOWED_LENGTHS);let x=d.length,w=!1,C=0;for(let D of g){if(x===D){w=!0;break}D>C&&(C=D)}if(!w&&x>C&&(w=!0),!w)throw new j;const _=[new re(a[1],t),new re(c[0],t)];return new $e(d,null,0,_,le.ITF,new Date().getTime())}static decodeMiddle(t,r,s,a){let c=new Int32Array(10),h=new Int32Array(5),d=new Int32Array(5);for(c.fill(0),h.fill(0),d.fill(0);r<s;){it.recordPattern(t,r,c);for(let x=0;x<5;x++){let w=2*x;h[x]=c[w],d[x]=c[w+1]}let g=ke.decodeDigit(h);a.append(g.toString()),g=this.decodeDigit(d),a.append(g.toString()),c.forEach(function(x){r+=x})}}decodeStart(t){let r=ke.skipWhiteSpace(t),s=ke.findGuardPattern(t,r,ke.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(t,s[0]),s}validateQuietZone(t,r){let s=this.narrowLineWidth*10;s=s<r?s:r;for(let a=r-1;s>0&&a>=0&&!t.get(a);a--)s--;if(s!==0)throw new H}static skipWhiteSpace(t){const r=t.getSize(),s=t.getNextSet(0);if(s===r)throw new H;return s}decodeEnd(t){t.reverse();try{let r=ke.skipWhiteSpace(t),s;try{s=ke.findGuardPattern(t,r,ke.END_PATTERN_REVERSED[0])}catch(c){c instanceof H&&(s=ke.findGuardPattern(t,r,ke.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,s[0]);let a=s[0];return s[0]=t.getSize()-s[1],s[1]=t.getSize()-a,s}finally{t.reverse()}}static findGuardPattern(t,r,s){let a=s.length,c=new Int32Array(a),h=t.getSize(),d=!1,g=0,x=r;c.fill(0);for(let w=r;w<h;w++)if(t.get(w)!==d)c[g]++;else{if(g===a-1){if(it.patternMatchVariance(c,s,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE)return[x,w];x+=c[0]+c[1],M.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,d=!d}throw new H}static decodeDigit(t){let r=ke.MAX_AVG_VARIANCE,s=-1,a=ke.PATTERNS.length;for(let c=0;c<a;c++){let h=ke.PATTERNS[c],d=it.patternMatchVariance(t,h,ke.MAX_INDIVIDUAL_VARIANCE);d<r?(r=d,s=c):d===r&&(s=-1)}if(s>=0)return s%10;throw new H}}ke.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ke.MAX_AVG_VARIANCE=.38,ke.MAX_INDIVIDUAL_VARIANCE=.5,ke.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ke.START_PATTERN=Int32Array.from([1,1,1,1]),ke.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class qe extends it{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,s,a=0,c=Int32Array.from([0,0,0]);for(;!r;){c=Int32Array.from([0,0,0]),s=qe.findGuardPattern(t,a,!1,this.START_END_PATTERN,c);let h=s[0];a=s[1];let d=h-(a-h);d>=0&&(r=t.isRange(d,h,!1))}return s}static checkChecksum(t){return qe.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let s=parseInt(t.charAt(r-1),10);return qe.getStandardUPCEANChecksum(t.substring(0,r-1))===s}static getStandardUPCEANChecksum(t){let r=t.length,s=0;for(let a=r-1;a>=0;a-=2){let c=t.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new j;s+=c}s*=3;for(let a=r-2;a>=0;a-=2){let c=t.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new j;s+=c}return(1e3-s)%10}static decodeEnd(t,r){return qe.findGuardPattern(t,r,!1,qe.START_END_PATTERN,new Int32Array(qe.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,s,a){return this.findGuardPattern(t,r,s,a,new Int32Array(a.length))}static findGuardPattern(t,r,s,a,c){let h=t.getSize();r=s?t.getNextUnset(r):t.getNextSet(r);let d=0,g=r,x=a.length,w=s;for(let C=r;C<h;C++)if(t.get(C)!==w)c[d]++;else{if(d===x-1){if(it.patternMatchVariance(c,a,qe.MAX_INDIVIDUAL_VARIANCE)<qe.MAX_AVG_VARIANCE)return Int32Array.from([g,C]);g+=c[0]+c[1];let _=c.slice(2,c.length-1);for(let I=0;I<d-1;I++)c[I]=_[I];c[d-1]=0,c[d]=0,d--}else d++;c[d]=1,w=!w}throw new H}static decodeDigit(t,r,s,a){this.recordPattern(t,s,r);let c=this.MAX_AVG_VARIANCE,h=-1,d=a.length;for(let g=0;g<d;g++){let x=a[g],w=it.patternMatchVariance(r,x,qe.MAX_INDIVIDUAL_VARIANCE);w<c&&(c=w,h=g)}if(h>=0)return h;throw new H}}qe.MAX_AVG_VARIANCE=.48,qe.MAX_INDIVIDUAL_VARIANCE=.7,qe.START_END_PATTERN=Int32Array.from([1,1,1]),qe.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),qe.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qe.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Hr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,s){let a=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,a),h=a.toString(),d=Hr.parseExtensionString(h),g=[new re((s[0]+s[1])/2,t),new re(c,t)],x=new $e(h,null,0,g,le.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&x.putAllMetadata(d),x}decodeMiddle(t,r,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=r[1],d=0;for(let x=0;x<5&&h<c;x++){let w=qe.decodeDigit(t,a,h,qe.L_AND_G_PATTERNS);s+=String.fromCharCode(48+w%10);for(let C of a)h+=C;w>=10&&(d|=1<<4-x),x!==4&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(s.length!==5)throw new H;let g=this.determineCheckDigit(d);if(Hr.extensionChecksum(s.toString())!==g)throw new H;return h}static extensionChecksum(t){let r=t.length,s=0;for(let a=r-2;a>=0;a-=2)s+=t.charAt(a).charCodeAt(0)-48;s*=3;for(let a=r-1;a>=0;a-=2)s+=t.charAt(a).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new H}static parseExtensionString(t){if(t.length!==5)return null;let r=Hr.parseExtension5String(t);return r==null?null:new Map([[ze.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let s=parseInt(t.substring(1)),a=(s/100).toString(),c=s%100,h=c<10?"0"+c:c.toString();return r+a+"."+h}}class Qo{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,s){let a=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,a),h=a.toString(),d=Qo.parseExtensionString(h),g=[new re((s[0]+s[1])/2,t),new re(c,t)],x=new $e(h,null,0,g,le.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&x.putAllMetadata(d),x}decodeMiddle(t,r,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=r[1],d=0;for(let g=0;g<2&&h<c;g++){let x=qe.decodeDigit(t,a,h,qe.L_AND_G_PATTERNS);s+=String.fromCharCode(48+x%10);for(let w of a)h+=w;x>=10&&(d|=1<<1-g),g!==1&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(s.length!==2)throw new H;if(parseInt(s.toString())%4!==d)throw new H;return h}static parseExtensionString(t){return t.length!==2?null:new Map([[ze.ISSUE_NUMBER,parseInt(t)]])}}class Nc{static decodeRow(t,r,s){let a=qe.findGuardPattern(r,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Hr().decodeRow(t,r,a)}catch{return new Qo().decodeRow(t,r,a)}}}Nc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ie extends qe{constructor(){super(),this.decodeRowStringBuffer="",Ie.L_AND_G_PATTERNS=Ie.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=Ie.L_PATTERNS[t-10],s=new Int32Array(r.length);for(let a=0;a<r.length;a++)s[a]=r[r.length-a-1];Ie.L_AND_G_PATTERNS[t]=s}}decodeRow(t,r,s){let a=Ie.findStartGuardPattern(r),c=s==null?null:s.get(Z.NEED_RESULT_POINT_CALLBACK);if(c!=null){const $=new re((a[0]+a[1])/2,t);c.foundPossibleResultPoint($)}let h=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=h.rowOffset,g=h.resultString;if(c!=null){const $=new re(d,t);c.foundPossibleResultPoint($)}let x=this.decodeEnd(r,d);if(c!=null){const $=new re((x[0]+x[1])/2,t);c.foundPossibleResultPoint($)}let w=x[1],C=w+(w-x[0]);if(C>=r.getSize()||!r.isRange(w,C,!1))throw new H;let _=g.toString();if(_.length<8)throw new j;if(!Ie.checkChecksum(_))throw new v;let I=(a[1]+a[0])/2,D=(x[1]+x[0])/2,R=this.getBarcodeFormat(),P=[new re(I,t),new re(D,t)],z=new $e(_,null,0,P,R,new Date().getTime()),q=0;try{let $=Nc.decodeRow(t,r,x[1]);z.putMetadata(ze.UPC_EAN_EXTENSION,$.getText()),z.putAllMetadata($.getResultMetadata()),z.addResultPoints($.getResultPoints()),q=$.getText().length}catch{}let K=s==null?null:s.get(Z.ALLOWED_EAN_EXTENSIONS);if(K!=null){let $=!1;for(let be in K)if(q.toString()===be){$=!0;break}if(!$)throw new H}return z}decodeEnd(t,r){return Ie.findGuardPattern(t,r,!1,Ie.START_END_PATTERN,new Int32Array(Ie.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Ie.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let s=parseInt(t.charAt(r-1),10);return Ie.getStandardUPCEANChecksum(t.substring(0,r-1))===s}static getStandardUPCEANChecksum(t){let r=t.length,s=0;for(let a=r-1;a>=0;a-=2){let c=t.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new j;s+=c}s*=3;for(let a=r-2;a>=0;a-=2){let c=t.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new j;s+=c}return(1e3-s)%10}}class xi extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=r[1],d=0;for(let x=0;x<6&&h<c;x++){let w=Ie.decodeDigit(t,a,h,Ie.L_AND_G_PATTERNS);s+=String.fromCharCode(48+w%10);for(let C of a)h+=C;w>=10&&(d|=1<<5-x)}s=xi.determineFirstDigit(s,d),h=Ie.findGuardPattern(t,h,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&h<c;x++){let w=Ie.decodeDigit(t,a,h,Ie.L_PATTERNS);s+=String.fromCharCode(48+w);for(let C of a)h+=C}return{rowOffset:h,resultString:s}}getBarcodeFormat(){return le.EAN_13}static determineFirstDigit(t,r){for(let s=0;s<10;s++)if(r===this.FIRST_DIGIT_ENCODINGS[s])return t=String.fromCharCode(48+s)+t,t;throw new H}}xi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Mc extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,s){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=r[1];for(let g=0;g<4&&h<c;g++){let x=Ie.decodeDigit(t,a,h,Ie.L_PATTERNS);s+=String.fromCharCode(48+x);for(let w of a)h+=w}h=Ie.findGuardPattern(t,h,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&h<c;g++){let x=Ie.decodeDigit(t,a,h,Ie.L_PATTERNS);s+=String.fromCharCode(48+x);for(let w of a)h+=w}return{rowOffset:h,resultString:s}}getBarcodeFormat(){return le.EAN_8}}class Dc extends Ie{constructor(){super(...arguments),this.ean13Reader=new xi}getBarcodeFormat(){return le.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,s))}decodeMiddle(t,r,s){return this.ean13Reader.decodeMiddle(t,r,s)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let s=new $e(r.substring(1),null,null,t.getResultPoints(),le.UPC_A);return t.getResultMetadata()!=null&&s.putAllMetadata(t.getResultMetadata()),s}else throw new H}reset(){this.ean13Reader.reset()}}class fn extends Ie{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,s){const a=this.decodeMiddleCounters.map(x=>x);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const c=t.getSize();let h=r[1],d=0;for(let x=0;x<6&&h<c;x++){const w=fn.decodeDigit(t,a,h,fn.L_AND_G_PATTERNS);s+=String.fromCharCode(48+w%10);for(let C of a)h+=C;w>=10&&(d|=1<<5-x)}let g=fn.determineNumSysAndCheckDigit(s,d);return{rowOffset:h,resultString:g}}decodeEnd(t,r){return fn.findGuardPatternWithoutCounters(t,r,!0,fn.MIDDLE_END_PATTERN)}checkChecksum(t){return Ie.checkChecksum(fn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let s=0;s<=1;s++)for(let a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][a]){let c=String.fromCharCode(48+s),h=String.fromCharCode(48+a);return c+t+h}throw H.getNotFoundInstance()}getBarcodeFormat(){return le.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(c=>c.charCodeAt(0)),s=new oe;s.append(t.charAt(0));let a=r[5];switch(a){case 0:case 1:case 2:s.appendChars(r,0,2),s.append(a),s.append("0000"),s.appendChars(r,2,3);break;case 3:s.appendChars(r,0,3),s.append("00000"),s.appendChars(r,3,2);break;case 4:s.appendChars(r,0,4),s.append("00000"),s.append(r[4]);break;default:s.appendChars(r,0,5),s.append("0000"),s.append(a);break}return t.length>=8&&s.append(t.charAt(7)),s.toString()}}fn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Jo extends it{constructor(t){super();let r=t==null?null:t.get(Z.POSSIBLE_FORMATS),s=[];o(r)?(s.push(new xi),s.push(new Dc),s.push(new Mc),s.push(new fn)):(r.indexOf(le.EAN_13)>-1&&s.push(new xi),r.indexOf(le.UPC_A)>-1&&s.push(new Dc),r.indexOf(le.EAN_8)>-1&&s.push(new Mc),r.indexOf(le.UPC_E)>-1&&s.push(new fn)),this.readers=s}decodeRow(t,r,s){for(let a of this.readers)try{const c=a.decodeRow(t,r,s),h=c.getBarcodeFormat()===le.EAN_13&&c.getText().charAt(0)==="0",d=s==null?null:s.get(Z.POSSIBLE_FORMATS),g=d==null||d.includes(le.UPC_A);if(h&&g){const x=c.getRawBytes(),w=new $e(c.getText().substring(1),x,x?x.length:null,c.getResultPoints(),le.UPC_A);return w.putAllMetadata(c.getResultMetadata()),w}return c}catch{}throw new H}reset(){for(let t of this.readers)t.reset()}}class xt extends it{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let s=0;s<r.length;s++)if(it.patternMatchVariance(t,r[s],xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return s;throw new H}static count(t){return ye.sum(new Int32Array(t))}static increment(t,r){let s=0,a=r[0];for(let c=1;c<t.length;c++)r[c]>a&&(a=r[c],s=c);t[s]++}static decrement(t,r){let s=0,a=r[0];for(let c=1;c<t.length;c++)r[c]<a&&(a=r[c],s=c);t[s]--}static isFinderPattern(t){let r=t[0]+t[1],s=r+t[2]+t[3],a=r/s;if(a>=xt.MIN_FINDER_PATTERN_RATIO&&a<=xt.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let d of t)d>h&&(h=d),d<c&&(c=d);return h<10*c}return!1}}xt.MAX_AVG_VARIANCE=.2,xt.MAX_INDIVIDUAL_VARIANCE=.45,xt.MIN_FINDER_PATTERN_RATIO=9.5/12,xt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Zi{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Zi))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ts{constructor(t,r,s,a,c){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new re(s,c)),this.resultPoints.push(new re(a,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Ts))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class wn{constructor(){}static getRSSvalue(t,r,s){let a=0;for(let g of t)a+=g;let c=0,h=0,d=t.length;for(let g=0;g<d-1;g++){let x;for(x=1,h|=1<<g;x<t[g];x++,h&=~(1<<g)){let w=wn.combins(a-x-1,d-g-2);if(s&&h===0&&a-x-(d-g-1)>=d-g-1&&(w-=wn.combins(a-x-(d-g),d-g-2)),d-g-1>1){let C=0;for(let _=a-x-(d-g-2);_>r;_--)C+=wn.combins(a-x-_-1,d-g-3);w-=C*(d-1-g)}else a-x>r&&w--;c+=w}a-=x}return c}static combins(t,r){let s,a;t-r>r?(a=r,s=t-r):(a=t-r,s=r);let c=1,h=1;for(let d=t;d>s;d--)c*=d,h<=a&&(c/=h,h++);for(;h<=a;)c/=h,h++;return c}}class r0{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let s=12*r,a=new W(s),c=0,d=t[0].getRightChar().getValue();for(let g=11;g>=0;--g)(d&1<<g)!=0&&a.set(c),c++;for(let g=1;g<t.length;++g){let x=t[g],w=x.getLeftChar().getValue();for(let C=11;C>=0;--C)(w&1<<C)!=0&&a.set(c),c++;if(x.getRightChar()!=null){let C=x.getRightChar().getValue();for(let _=11;_>=0;--_)(C&1<<_)!=0&&a.set(c),c++}}return a}}class Ei{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ea{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Tt extends ea{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Tt.FNC1}}Tt.FNC1="$";class bi extends ea{constructor(t,r,s){super(t),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Zt extends ea{constructor(t,r,s){if(super(t),r<0||r>10||s<0||s>10)throw new j;this.firstDigit=r,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Zt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Zt.FNC1}isAnyFNC1(){return this.firstDigit===Zt.FNC1||this.secondDigit===Zt.FNC1}}Zt.FNC1=10;class te{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new H;let r=t.substring(0,2);for(let c of te.TWO_DIGIT_DATA_LENGTH)if(c[0]===r)return c[1]===te.VARIABLE_LENGTH?te.processVariableAI(2,c[2],t):te.processFixedAI(2,c[1],t);if(t.length<3)throw new H;let s=t.substring(0,3);for(let c of te.THREE_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===te.VARIABLE_LENGTH?te.processVariableAI(3,c[2],t):te.processFixedAI(3,c[1],t);for(let c of te.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===te.VARIABLE_LENGTH?te.processVariableAI(4,c[2],t):te.processFixedAI(4,c[1],t);if(t.length<4)throw new H;let a=t.substring(0,4);for(let c of te.FOUR_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===te.VARIABLE_LENGTH?te.processVariableAI(4,c[2],t):te.processFixedAI(4,c[1],t);throw new H}static processFixedAI(t,r,s){if(s.length<t)throw new H;let a=s.substring(0,t);if(s.length<t+r)throw new H;let c=s.substring(t,t+r),h=s.substring(t+r),d="("+a+")"+c,g=te.parseFieldsInGeneralPurpose(h);return g==null?d:d+g}static processVariableAI(t,r,s){let a=s.substring(0,t),c;s.length<t+r?c=s.length:c=t+r;let h=s.substring(t,c),d=s.substring(c),g="("+a+")"+h,x=te.parseFieldsInGeneralPurpose(d);return x==null?g:g+x}}te.VARIABLE_LENGTH=[],te.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",te.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",te.VARIABLE_LENGTH,20],["22",te.VARIABLE_LENGTH,29],["30",te.VARIABLE_LENGTH,8],["37",te.VARIABLE_LENGTH,8],["90",te.VARIABLE_LENGTH,30],["91",te.VARIABLE_LENGTH,30],["92",te.VARIABLE_LENGTH,30],["93",te.VARIABLE_LENGTH,30],["94",te.VARIABLE_LENGTH,30],["95",te.VARIABLE_LENGTH,30],["96",te.VARIABLE_LENGTH,30],["97",te.VARIABLE_LENGTH,3],["98",te.VARIABLE_LENGTH,30],["99",te.VARIABLE_LENGTH,30]],te.THREE_DIGIT_DATA_LENGTH=[["240",te.VARIABLE_LENGTH,30],["241",te.VARIABLE_LENGTH,30],["242",te.VARIABLE_LENGTH,6],["250",te.VARIABLE_LENGTH,30],["251",te.VARIABLE_LENGTH,30],["253",te.VARIABLE_LENGTH,17],["254",te.VARIABLE_LENGTH,20],["400",te.VARIABLE_LENGTH,30],["401",te.VARIABLE_LENGTH,30],["402",17],["403",te.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",te.VARIABLE_LENGTH,20],["421",te.VARIABLE_LENGTH,15],["422",3],["423",te.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],te.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",te.VARIABLE_LENGTH,15],["391",te.VARIABLE_LENGTH,18],["392",te.VARIABLE_LENGTH,15],["393",te.VARIABLE_LENGTH,18],["703",te.VARIABLE_LENGTH,30]],te.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",te.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",te.VARIABLE_LENGTH,20],["8003",te.VARIABLE_LENGTH,30],["8004",te.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",te.VARIABLE_LENGTH,30],["8008",te.VARIABLE_LENGTH,12],["8018",18],["8020",te.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",te.VARIABLE_LENGTH,70],["8200",te.VARIABLE_LENGTH,70]];class Qi{constructor(t){this.buffer=new oe,this.information=t}decodeAllCodes(t,r){let s=r,a=null;do{let c=this.decodeGeneralPurposeField(s,a),h=te.parseFieldsInGeneralPurpose(c.getNewString());if(h!=null&&t.append(h),c.isRemaining()?a=""+c.getRemainingValue():a=null,s===c.getNewPosition())break;s=c.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(t,4);return c===0?new Zt(this.information.getSize(),Zt.FNC1,Zt.FNC1):new Zt(this.information.getSize(),c-1,Zt.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),s=(r-8)/11,a=(r-8)%11;return new Zt(t+7,s,a)}extractNumericValueFromBitArray(t,r){return Qi.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,s){let a=0;for(let c=0;c<s;++c)t.get(r+c)&&(a|=1<<s-c-1);return a}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new bi(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new bi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let s=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(s!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new bi(this.current.getPosition(),this.buffer.toString()):r=new bi(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Ei(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new bi(this.current.getPosition(),this.buffer.toString());return new Ei(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ei(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new bi(this.current.getPosition(),this.buffer.toString());return new Ei(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ei(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new bi(this.current.getPosition(),this.buffer.toString());return new Ei(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ei(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,7);if(s>=64&&s<116)return!0;if(t+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Tt(t+5,Tt.FNC1);if(r>=5&&r<15)return new Tt(t+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(t,7);if(s>=64&&s<90)return new Tt(t+7,""+(s+1));if(s>=90&&s<116)return new Tt(t+7,""+(s+7));let a=this.extractNumericValueFromBitArray(t,8),c;switch(a){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new j}return new Tt(t+8,c)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,6);return s>=16&&s<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Tt(t+5,Tt.FNC1);if(r>=5&&r<15)return new Tt(t+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(t,6);if(s>=32&&s<58)return new Tt(t+6,""+(s+33));let a;switch(s){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new qt("Decoding invalid alphanumeric value: "+s)}return new Tt(t+6,a)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class ta{constructor(t){this.information=t,this.generalDecoder=new Qi(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class It extends ta{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let s=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,s)}encodeCompressedGtinWithoutAI(t,r,s){for(let a=0;a<4;++a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);c/100===0&&t.append("0"),c/10===0&&t.append("0"),t.append(c)}It.appendCheckDigit(t,s)}static appendCheckDigit(t,r){let s=0;for(let a=0;a<13;a++){let c=t.charAt(a+r).charCodeAt(0)-48;s+=(a&1)===0?3*c:c}s=10-s%10,s===10&&(s=0),t.append(s)}}It.GTIN_SIZE=40;class Ji extends It{constructor(t){super(t)}parseInformation(){let t=new oe;t.append("(01)");let r=t.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ji.HEADER_SIZE,4);return t.append(s),this.encodeCompressedGtinWithoutAI(t,Ji.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,Ji.HEADER_SIZE+44)}}Ji.HEADER_SIZE=4;class Is extends ta{constructor(t){super(t)}parseInformation(){let t=new oe;return this.getGeneralDecoder().decodeAllCodes(t,Is.HEADER_SIZE)}}Is.HEADER_SIZE=5;class Os extends It{constructor(t){super(t)}encodeCompressedWeight(t,r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,s);this.addWeightCode(t,a);let c=this.checkWeight(a),h=1e5;for(let d=0;d<5;++d)c/h===0&&t.append("0"),h/=10;t.append(c)}}class yn extends Os{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=yn.HEADER_SIZE+Os.GTIN_SIZE+yn.WEIGHT_SIZE)throw new H;let t=new oe;return this.encodeCompressedGtin(t,yn.HEADER_SIZE),this.encodeCompressedWeight(t,yn.HEADER_SIZE+Os.GTIN_SIZE,yn.WEIGHT_SIZE),t.toString()}}yn.HEADER_SIZE=5,yn.WEIGHT_SIZE=15;class s0 extends yn{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class o0 extends yn{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class An extends It{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<An.HEADER_SIZE+It.GTIN_SIZE)throw new H;let t=new oe;this.encodeCompressedGtin(t,An.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(An.HEADER_SIZE+It.GTIN_SIZE,An.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(An.HEADER_SIZE+It.GTIN_SIZE+An.LAST_DIGIT_SIZE,null);return t.append(s.getNewString()),t.toString()}}An.HEADER_SIZE=8,An.LAST_DIGIT_SIZE=2;class At extends It{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<At.HEADER_SIZE+It.GTIN_SIZE)throw new H;let t=new oe;this.encodeCompressedGtin(t,At.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+It.GTIN_SIZE,At.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+It.GTIN_SIZE+At.LAST_DIGIT_SIZE,At.FIRST_THREE_DIGITS_SIZE);s/100==0&&t.append("0"),s/10==0&&t.append("0"),t.append(s);let a=this.getGeneralDecoder().decodeGeneralPurposeField(At.HEADER_SIZE+It.GTIN_SIZE+At.LAST_DIGIT_SIZE+At.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()}}At.HEADER_SIZE=8,At.LAST_DIGIT_SIZE=2,At.FIRST_THREE_DIGITS_SIZE=10;class Ye extends Os{constructor(t,r,s){super(t),this.dateCode=s,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Ye.HEADER_SIZE+Ye.GTIN_SIZE+Ye.WEIGHT_SIZE+Ye.DATE_SIZE)throw new H;let t=new oe;return this.encodeCompressedGtin(t,Ye.HEADER_SIZE),this.encodeCompressedWeight(t,Ye.HEADER_SIZE+Ye.GTIN_SIZE,Ye.WEIGHT_SIZE),this.encodeCompressedDate(t,Ye.HEADER_SIZE+Ye.GTIN_SIZE+Ye.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Ye.DATE_SIZE);if(s==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let a=s%32;s/=32;let c=s%12+1;s/=12;let h=s;h/10==0&&t.append("0"),t.append(h),c/10==0&&t.append("0"),t.append(c),a/10==0&&t.append("0"),t.append(a)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Ye.HEADER_SIZE=8,Ye.WEIGHT_SIZE=20,Ye.DATE_SIZE=16;function Rc(A){try{if(A.get(1))return new Ji(A);if(!A.get(2))return new Is(A);switch(Qi.extractNumericValueFromBitArray(A,1,4)){case 4:return new s0(A);case 5:return new o0(A)}switch(Qi.extractNumericValueFromBitArray(A,1,5)){case 12:return new An(A);case 13:return new At(A)}switch(Qi.extractNumericValueFromBitArray(A,1,7)){case 56:return new Ye(A,"310","11");case 57:return new Ye(A,"320","11");case 58:return new Ye(A,"310","13");case 59:return new Ye(A,"320","13");case 60:return new Ye(A,"310","15");case 61:return new Ye(A,"320","15");case 62:return new Ye(A,"310","17");case 63:return new Ye(A,"320","17")}}catch(t){throw console.log(t),new qt("unknown decoder: "+A)}}class qn{constructor(t,r,s,a){this.leftchar=t,this.rightchar=r,this.finderpattern=s,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof qn?qn.equalsOrNull(t.leftchar,r.leftchar)&&qn.equalsOrNull(t.rightchar,r.rightchar)&&qn.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:qn.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class na{constructor(t,r,s){this.pairs=t,this.rowNumber=r,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof na?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let s;return t.forEach((a,c)=>{r.forEach(h=>{a.getLeftChar().getValue()===h.getLeftChar().getValue()&&a.getRightChar().getValue()===h.getRightChar().getValue()&&a.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(s=!0)})}),s}}class X extends xt{constructor(t){super(...arguments),this.pairs=new Array(X.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,s){this.pairs.length=0,this.startFromEven=!1;try{return X.constructResult(this.decodeRow2pairs(t,r))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,X.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof H){if(!this.pairs.length)throw new H;s=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new H}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let s=r;s<this.rows.length;s++){let a=this.rows[s];this.pairs.length=0;for(let h of t)this.pairs.push(h.getPairs());if(this.pairs.push(a.getPairs()),!X.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(t);c.push(a);try{return this.checkRows(c,s+1)}catch(h){this.verbose&&console.log(h)}}throw new H}static isValidSequence(t){for(let r of X.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let s=!0;for(let a=0;a<t.length;a++)if(t[a].getFinderPattern().getValue()!=r[a]){s=!1;break}if(s)return!0}return!1}storeRow(t,r){let s=0,a=!1,c=!1;for(;s<this.rows.length;){let h=this.rows[s];if(h.getRowNumber()>t){c=h.isEquivalent(this.pairs);break}a=h.isEquivalent(this.pairs),s++}c||a||X.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new na(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let s of r)if(s.getPairs().length!==t.length){for(let a of s.getPairs())for(let c of t)if(qn.equals(a,c))break}}static isPartialRow(t,r){for(let s of r){let a=!0;for(let c of t){let h=!1;for(let d of s.getPairs())if(c.equals(d)){h=!0;break}if(!h){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=r0.buildBitArray(t),a=Rc(r).parseInformation(),c=t[0].getFinderPattern().getResultPoints(),h=t[t.length-1].getFinderPattern().getResultPoints(),d=[c[0],c[1],h[0],h[1]];return new $e(a,null,null,d,le.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),s=t.getRightChar();if(s==null)return!1;let a=s.getChecksumPortion(),c=2;for(let d=1;d<this.pairs.size();++d){let g=this.pairs.get(d);a+=g.getLeftChar().getChecksumPortion(),c++;let x=g.getRightChar();x!=null&&(a+=x.getChecksumPortion(),c++)}return a%=211,211*(c-4)+a==r.getValue()}static getNextSecondBar(t,r){let s;return t.get(r)?(s=t.getNextUnset(r),s=t.getNextSet(s)):(s=t.getNextSet(r),s=t.getNextUnset(s)),s}retrieveNextPair(t,r,s){let a=r.length%2==0;this.startFromEven&&(a=!a);let c,h=!0,d=-1;do this.findNextPair(t,r,d),c=this.parseFoundFinderPattern(t,s,a),c==null?d=X.getNextSecondBar(t,this.startEnd[0]):h=!1;while(h);let g=this.decodeDataCharacter(t,c,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new H;let x;try{x=this.decodeDataCharacter(t,c,a,!1)}catch(w){x=null,this.verbose&&console.log(w)}return new qn(g,x,c,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h;s>=0?h=s:this.isEmptyPair(r)?h=0:h=r[r.length-1].getFinderPattern().getStartEnd()[1];let d=r.length%2!=0;this.startFromEven&&(d=!d);let g=!1;for(;h<c&&(g=!t.get(h),!!g);)h++;let x=0,w=h;for(let C=h;C<c;C++)if(t.get(C)!=g)a[x]++;else{if(x==3){if(d&&X.reverseCounters(a),X.isFinderPattern(a)){this.startEnd[0]=w,this.startEnd[1]=C;return}d&&X.reverseCounters(a),w+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,x--}else x++;a[x]=1,g=!g}throw new H}static reverseCounters(t){let r=t.length;for(let s=0;s<r/2;++s){let a=t[s];t[s]=t[r-s-1],t[r-s-1]=a}}parseFoundFinderPattern(t,r,s){let a,c,h;if(s){let x=this.startEnd[0]-1;for(;x>=0&&!t.get(x);)x--;x++,a=this.startEnd[0]-x,c=x,h=this.startEnd[1]}else c=this.startEnd[0],h=t.getNextUnset(this.startEnd[1]+1),a=h-this.startEnd[1];let d=this.getDecodeFinderCounters();M.arraycopy(d,0,d,1,d.length-1),d[0]=a;let g;try{g=this.parseFinderValue(d,X.FINDER_PATTERNS)}catch{return null}return new Ts(g,[c,h],c,h,r)}decodeDataCharacter(t,r,s,a){let c=this.getDataCharacterCounters();for(let Ue=0;Ue<c.length;Ue++)c[Ue]=0;if(a)X.recordPatternInReverse(t,r.getStartEnd()[0],c);else{X.recordPattern(t,r.getStartEnd()[1],c);for(let Ue=0,mt=c.length-1;Ue<mt;Ue++,mt--){let Ft=c[Ue];c[Ue]=c[mt],c[mt]=Ft}}let h=17,d=ye.sum(new Int32Array(c))/h,g=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(d-g)/g>.3)throw new H;let x=this.getOddCounts(),w=this.getEvenCounts(),C=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let Ue=0;Ue<c.length;Ue++){let mt=1*c[Ue]/d,Ft=mt+.5;if(Ft<1){if(mt<.3)throw new H;Ft=1}else if(Ft>8){if(mt>8.7)throw new H;Ft=8}let rr=Ue/2;(Ue&1)==0?(x[rr]=Ft,C[rr]=mt-Ft):(w[rr]=Ft,_[rr]=mt-Ft)}this.adjustOddEvenCounts(h);let I=4*r.getValue()+(s?0:2)+(a?0:1)-1,D=0,R=0;for(let Ue=x.length-1;Ue>=0;Ue--){if(X.isNotA1left(r,s,a)){let mt=X.WEIGHTS[I][2*Ue];R+=x[Ue]*mt}D+=x[Ue]}let P=0;for(let Ue=w.length-1;Ue>=0;Ue--)if(X.isNotA1left(r,s,a)){let mt=X.WEIGHTS[I][2*Ue+1];P+=w[Ue]*mt}let z=R+P;if((D&1)!=0||D>13||D<4)throw new H;let q=(13-D)/2,K=X.SYMBOL_WIDEST[q],$=9-K,be=wn.getRSSvalue(x,K,!0),pe=wn.getRSSvalue(w,$,!1),Nt=X.EVEN_TOTAL_SUBSET[q],dn=X.GSUM[q],Mt=be*Nt+pe+dn;return new Zi(Mt,z)}static isNotA1left(t,r,s){return!(t.getValue()==0&&r&&s)}adjustOddEvenCounts(t){let r=ye.sum(new Int32Array(this.getOddCounts())),s=ye.sum(new Int32Array(this.getEvenCounts())),a=!1,c=!1;r>13?c=!0:r<4&&(a=!0);let h=!1,d=!1;s>13?d=!0:s<4&&(h=!0);let g=r+s-t,x=(r&1)==1,w=(s&1)==0;if(g==1)if(x){if(w)throw new H;c=!0}else{if(!w)throw new H;d=!0}else if(g==-1)if(x){if(w)throw new H;a=!0}else{if(!w)throw new H;h=!0}else if(g==0){if(x){if(!w)throw new H;r<s?(a=!0,d=!0):(c=!0,h=!0)}else if(w)throw new H}else throw new H;if(a){if(c)throw new H;X.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&X.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(d)throw new H;X.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&X.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}X.SYMBOL_WIDEST=[7,5,4,3,1],X.EVEN_TOTAL_SUBSET=[4,20,52,104,204],X.GSUM=[0,348,1388,2948,3988],X.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],X.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],X.FINDER_PAT_A=0,X.FINDER_PAT_B=1,X.FINDER_PAT_C=2,X.FINDER_PAT_D=3,X.FINDER_PAT_E=4,X.FINDER_PAT_F=5,X.FINDER_PATTERN_SEQUENCES=[[X.FINDER_PAT_A,X.FINDER_PAT_A],[X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B],[X.FINDER_PAT_A,X.FINDER_PAT_C,X.FINDER_PAT_B,X.FINDER_PAT_D],[X.FINDER_PAT_A,X.FINDER_PAT_E,X.FINDER_PAT_B,X.FINDER_PAT_D,X.FINDER_PAT_C],[X.FINDER_PAT_A,X.FINDER_PAT_E,X.FINDER_PAT_B,X.FINDER_PAT_D,X.FINDER_PAT_D,X.FINDER_PAT_F],[X.FINDER_PAT_A,X.FINDER_PAT_E,X.FINDER_PAT_B,X.FINDER_PAT_D,X.FINDER_PAT_E,X.FINDER_PAT_F,X.FINDER_PAT_F],[X.FINDER_PAT_A,X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B,X.FINDER_PAT_C,X.FINDER_PAT_C,X.FINDER_PAT_D,X.FINDER_PAT_D],[X.FINDER_PAT_A,X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B,X.FINDER_PAT_C,X.FINDER_PAT_C,X.FINDER_PAT_D,X.FINDER_PAT_E,X.FINDER_PAT_E],[X.FINDER_PAT_A,X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B,X.FINDER_PAT_C,X.FINDER_PAT_C,X.FINDER_PAT_D,X.FINDER_PAT_E,X.FINDER_PAT_F,X.FINDER_PAT_F],[X.FINDER_PAT_A,X.FINDER_PAT_A,X.FINDER_PAT_B,X.FINDER_PAT_B,X.FINDER_PAT_C,X.FINDER_PAT_D,X.FINDER_PAT_D,X.FINDER_PAT_E,X.FINDER_PAT_E,X.FINDER_PAT_F,X.FINDER_PAT_F]],X.MAX_PAIRS=11;class a0 extends Zi{constructor(t,r,s){super(t,r),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ke extends xt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,s){const a=this.decodePair(r,!1,t,s);Ke.addOrTally(this.possibleLeftPairs,a),r.reverse();let c=this.decodePair(r,!0,t,s);Ke.addOrTally(this.possibleRightPairs,c),r.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&Ke.checkChecksum(h,d))return Ke.constructResult(h,d)}throw new H}static addOrTally(t,r){if(r==null)return;let s=!1;for(let a of t)if(a.getValue()===r.getValue()){a.incrementCount(),s=!0;break}s||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let s=4537077*t.getValue()+r.getValue(),a=new String(s).toString(),c=new oe;for(let x=13-a.length;x>0;x--)c.append("0");c.append(a);let h=0;for(let x=0;x<13;x++){let w=c.charAt(x).charCodeAt(0)-48;h+=(x&1)===0?3*w:w}h=10-h%10,h===10&&(h=0),c.append(h.toString());let d=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new $e(c.toString(),null,0,[d[0],d[1],g[0],g[1]],le.RSS_14,new Date().getTime())}static checkChecksum(t,r){let s=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,s===a}decodePair(t,r,s,a){try{let c=this.findFinderPattern(t,r),h=this.parseFoundFinderPattern(t,s,r,c),d=a==null?null:a.get(Z.NEED_RESULT_POINT_CALLBACK);if(d!=null){let w=(c[0]+c[1])/2;r&&(w=t.getSize()-1-w),d.foundPossibleResultPoint(new re(w,s))}let g=this.decodeDataCharacter(t,h,!0),x=this.decodeDataCharacter(t,h,!1);return new a0(1597*g.getValue()+x.getValue(),g.getChecksumPortion()+4*x.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(t,r,s){let a=this.getDataCharacterCounters();for(let P=0;P<a.length;P++)a[P]=0;if(s)it.recordPatternInReverse(t,r.getStartEnd()[0],a);else{it.recordPattern(t,r.getStartEnd()[1]+1,a);for(let P=0,z=a.length-1;P<z;P++,z--){let q=a[P];a[P]=a[z],a[z]=q}}let c=s?16:15,h=ye.sum(new Int32Array(a))/c,d=this.getOddCounts(),g=this.getEvenCounts(),x=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let P=0;P<a.length;P++){let z=a[P]/h,q=Math.floor(z+.5);q<1?q=1:q>8&&(q=8);let K=Math.floor(P/2);(P&1)===0?(d[K]=q,x[K]=z-q):(g[K]=q,w[K]=z-q)}this.adjustOddEvenCounts(s,c);let C=0,_=0;for(let P=d.length-1;P>=0;P--)_*=9,_+=d[P],C+=d[P];let I=0,D=0;for(let P=g.length-1;P>=0;P--)I*=9,I+=g[P],D+=g[P];let R=_+3*I;if(s){if((C&1)!==0||C>12||C<4)throw new H;let P=(12-C)/2,z=Ke.OUTSIDE_ODD_WIDEST[P],q=9-z,K=wn.getRSSvalue(d,z,!1),$=wn.getRSSvalue(g,q,!0),be=Ke.OUTSIDE_EVEN_TOTAL_SUBSET[P],pe=Ke.OUTSIDE_GSUM[P];return new Zi(K*be+$+pe,R)}else{if((D&1)!==0||D>10||D<4)throw new H;let P=(10-D)/2,z=Ke.INSIDE_ODD_WIDEST[P],q=9-z,K=wn.getRSSvalue(d,z,!0),$=wn.getRSSvalue(g,q,!1),be=Ke.INSIDE_ODD_TOTAL_SUBSET[P],pe=Ke.INSIDE_GSUM[P];return new Zi($*be+K+pe,R)}}findFinderPattern(t,r){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let a=t.getSize(),c=!1,h=0;for(;h<a&&(c=!t.get(h),r!==c);)h++;let d=0,g=h;for(let x=h;x<a;x++)if(t.get(x)!==c)s[d]++;else{if(d===3){if(xt.isFinderPattern(s))return[g,x];g+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,d--}else d++;s[d]=1,c=!c}throw new H}parseFoundFinderPattern(t,r,s,a){let c=t.get(a[0]),h=a[0]-1;for(;h>=0&&c!==t.get(h);)h--;h++;const d=a[0]-h,g=this.getDecodeFinderCounters(),x=new Int32Array(g.length);M.arraycopy(g,0,x,1,g.length-1),x[0]=d;const w=this.parseFinderValue(x,Ke.FINDER_PATTERNS);let C=h,_=a[1];return s&&(C=t.getSize()-1-C,_=t.getSize()-1-_),new Ts(w,[h,a[1]],C,_,r)}adjustOddEvenCounts(t,r){let s=ye.sum(new Int32Array(this.getOddCounts())),a=ye.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1,d=!1,g=!1;t?(s>12?h=!0:s<4&&(c=!0),a>12?g=!0:a<4&&(d=!0)):(s>11?h=!0:s<5&&(c=!0),a>10?g=!0:a<4&&(d=!0));let x=s+a-r,w=(s&1)===(t?1:0),C=(a&1)===1;if(x===1)if(w){if(C)throw new H;h=!0}else{if(!C)throw new H;g=!0}else if(x===-1)if(w){if(C)throw new H;c=!0}else{if(!C)throw new H;d=!0}else if(x===0){if(w){if(!C)throw new H;s<a?(c=!0,g=!0):(h=!0,d=!0)}else if(C)throw new H}else throw new H;if(c){if(h)throw new H;xt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&xt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(g)throw new H;xt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&xt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ke.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ke.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ke.OUTSIDE_GSUM=[0,161,961,2015,2715],Ke.INSIDE_GSUM=[0,336,1036,1516],Ke.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ke.INSIDE_ODD_WIDEST=[2,4,6,8],Ke.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class er extends it{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const s=t?t.get(Z.POSSIBLE_FORMATS):null,a=t&&t.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(le.EAN_13)||s.includes(le.UPC_A)||s.includes(le.EAN_8)||s.includes(le.UPC_E))&&this.readers.push(new Jo(t)),s.includes(le.CODE_39)&&this.readers.push(new at(a)),s.includes(le.CODE_128)&&this.readers.push(new Q),s.includes(le.ITF)&&this.readers.push(new ke),s.includes(le.RSS_14)&&this.readers.push(new Ke),s.includes(le.RSS_EXPANDED)&&this.readers.push(new X(this.verbose))):(this.readers.push(new Jo(t)),this.readers.push(new at),this.readers.push(new Jo(t)),this.readers.push(new Q),this.readers.push(new ke),this.readers.push(new Ke),this.readers.push(new X(this.verbose)))}decodeRow(t,r,s){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,s)}catch{}throw new H}reset(){this.readers.forEach(t=>t.reset())}}class l0 extends Gt{constructor(t=500,r){super(new er(r),t,r)}}class De{constructor(t,r,s){this.ecCodewords=t,this.ecBlocks=[r],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Oe{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ae{constructor(t,r,s,a,c,h){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=s,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=c,this.ecBlocks=h;let d=0;const g=h.getECCodewords(),x=h.getECBlocks();for(let w of x)d+=w.getCount()*(w.getDataCodewords()+g);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if((t&1)!==0||(r&1)!==0)throw new j;for(let s of Ae.VERSIONS)if(s.symbolSizeRows===t&&s.symbolSizeColumns===r)return s;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new Ae(1,10,10,8,8,new De(5,new Oe(1,3))),new Ae(2,12,12,10,10,new De(7,new Oe(1,5))),new Ae(3,14,14,12,12,new De(10,new Oe(1,8))),new Ae(4,16,16,14,14,new De(12,new Oe(1,12))),new Ae(5,18,18,16,16,new De(14,new Oe(1,18))),new Ae(6,20,20,18,18,new De(18,new Oe(1,22))),new Ae(7,22,22,20,20,new De(20,new Oe(1,30))),new Ae(8,24,24,22,22,new De(24,new Oe(1,36))),new Ae(9,26,26,24,24,new De(28,new Oe(1,44))),new Ae(10,32,32,14,14,new De(36,new Oe(1,62))),new Ae(11,36,36,16,16,new De(42,new Oe(1,86))),new Ae(12,40,40,18,18,new De(48,new Oe(1,114))),new Ae(13,44,44,20,20,new De(56,new Oe(1,144))),new Ae(14,48,48,22,22,new De(68,new Oe(1,174))),new Ae(15,52,52,24,24,new De(42,new Oe(2,102))),new Ae(16,64,64,14,14,new De(56,new Oe(2,140))),new Ae(17,72,72,16,16,new De(36,new Oe(4,92))),new Ae(18,80,80,18,18,new De(48,new Oe(4,114))),new Ae(19,88,88,20,20,new De(56,new Oe(4,144))),new Ae(20,96,96,22,22,new De(68,new Oe(4,174))),new Ae(21,104,104,24,24,new De(56,new Oe(6,136))),new Ae(22,120,120,18,18,new De(68,new Oe(6,175))),new Ae(23,132,132,20,20,new De(62,new Oe(8,163))),new Ae(24,144,144,22,22,new De(62,new Oe(8,156),new Oe(2,155))),new Ae(25,8,18,6,16,new De(7,new Oe(1,5))),new Ae(26,8,32,6,14,new De(11,new Oe(1,10))),new Ae(27,12,26,10,24,new De(14,new Oe(1,16))),new Ae(28,12,36,10,16,new De(18,new Oe(1,22))),new Ae(29,16,36,14,16,new De(24,new Oe(1,32))),new Ae(30,16,48,14,22,new De(28,new Oe(1,49)))]}}Ae.VERSIONS=Ae.buildVersions();class ia{constructor(t){const r=t.getHeight();if(r<8||r>144||(r&1)!==0)throw new j;this.version=ia.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new we(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),s=t.getWidth();return Ae.getVersionForDimensions(r,s)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,s=4,a=0;const c=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let d=!1,g=!1,x=!1,w=!1;do if(s===c&&a===0&&!d)t[r++]=this.readCorner1(c,h)&255,s-=2,a+=2,d=!0;else if(s===c-2&&a===0&&(h&3)!==0&&!g)t[r++]=this.readCorner2(c,h)&255,s-=2,a+=2,g=!0;else if(s===c+4&&a===2&&(h&7)===0&&!x)t[r++]=this.readCorner3(c,h)&255,s-=2,a+=2,x=!0;else if(s===c-2&&a===0&&(h&7)===4&&!w)t[r++]=this.readCorner4(c,h)&255,s-=2,a+=2,w=!0;else{do s<c&&a>=0&&!this.readMappingMatrix.get(a,s)&&(t[r++]=this.readUtah(s,a,c,h)&255),s-=2,a+=2;while(s>=0&&a<h);s+=1,a+=3;do s>=0&&a<h&&!this.readMappingMatrix.get(a,s)&&(t[r++]=this.readUtah(s,a,c,h)&255),s+=2,a-=2;while(s<c&&a>=0);s+=3,a+=1}while(s<c||a<h);if(r!==this.version.getTotalCodewords())throw new j;return t}readModule(t,r,s,a){return t<0&&(t+=s,r+=4-(s+4&7)),r<0&&(r+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,s,a){let c=0;return this.readModule(t-2,r-2,s,a)&&(c|=1),c<<=1,this.readModule(t-2,r-1,s,a)&&(c|=1),c<<=1,this.readModule(t-1,r-2,s,a)&&(c|=1),c<<=1,this.readModule(t-1,r-1,s,a)&&(c|=1),c<<=1,this.readModule(t-1,r,s,a)&&(c|=1),c<<=1,this.readModule(t,r-2,s,a)&&(c|=1),c<<=1,this.readModule(t,r-1,s,a)&&(c|=1),c<<=1,this.readModule(t,r,s,a)&&(c|=1),c}readCorner1(t,r){let s=0;return this.readModule(t-1,0,t,r)&&(s|=1),s<<=1,this.readModule(t-1,1,t,r)&&(s|=1),s<<=1,this.readModule(t-1,2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-1,t,r)&&(s|=1),s<<=1,this.readModule(1,r-1,t,r)&&(s|=1),s<<=1,this.readModule(2,r-1,t,r)&&(s|=1),s<<=1,this.readModule(3,r-1,t,r)&&(s|=1),s}readCorner2(t,r){let s=0;return this.readModule(t-3,0,t,r)&&(s|=1),s<<=1,this.readModule(t-2,0,t,r)&&(s|=1),s<<=1,this.readModule(t-1,0,t,r)&&(s|=1),s<<=1,this.readModule(0,r-4,t,r)&&(s|=1),s<<=1,this.readModule(0,r-3,t,r)&&(s|=1),s<<=1,this.readModule(0,r-2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-1,t,r)&&(s|=1),s<<=1,this.readModule(1,r-1,t,r)&&(s|=1),s}readCorner3(t,r){let s=0;return this.readModule(t-1,0,t,r)&&(s|=1),s<<=1,this.readModule(t-1,r-1,t,r)&&(s|=1),s<<=1,this.readModule(0,r-3,t,r)&&(s|=1),s<<=1,this.readModule(0,r-2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-1,t,r)&&(s|=1),s<<=1,this.readModule(1,r-3,t,r)&&(s|=1),s<<=1,this.readModule(1,r-2,t,r)&&(s|=1),s<<=1,this.readModule(1,r-1,t,r)&&(s|=1),s}readCorner4(t,r){let s=0;return this.readModule(t-3,0,t,r)&&(s|=1),s<<=1,this.readModule(t-2,0,t,r)&&(s|=1),s<<=1,this.readModule(t-1,0,t,r)&&(s|=1),s<<=1,this.readModule(0,r-2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-1,t,r)&&(s|=1),s<<=1,this.readModule(1,r-1,t,r)&&(s|=1),s<<=1,this.readModule(2,r-1,t,r)&&(s|=1),s<<=1,this.readModule(3,r-1,t,r)&&(s|=1),s}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new y("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),h=r/a|0,d=s/c|0,g=h*a,x=d*c,w=new we(x,g);for(let C=0;C<h;++C){const _=C*a;for(let I=0;I<d;++I){const D=I*c;for(let R=0;R<a;++R){const P=C*(a+2)+1+R,z=_+R;for(let q=0;q<c;++q){const K=I*(c+2)+1+q;if(t.get(K,P)){const $=D+q;w.set($,z)}}}}}return w}}class ra{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const s=r.getECBlocks();let a=0;const c=s.getECBlocks();for(let R of c)a+=R.getCount();const h=new Array(a);let d=0;for(let R of c)for(let P=0;P<R.getCount();P++){const z=R.getDataCodewords(),q=s.getECCodewords()+z;h[d++]=new ra(z,new Uint8Array(q))}const x=h[0].codewords.length-s.getECCodewords(),w=x-1;let C=0;for(let R=0;R<w;R++)for(let P=0;P<d;P++)h[P].codewords[R]=t[C++];const _=r.getVersionNumber()===24,I=_?8:d;for(let R=0;R<I;R++)h[R].codewords[x-1]=t[C++];const D=h[0].codewords.length;for(let R=x;R<D;R++)for(let P=0;P<d;P++){const z=_?(P+8)%d:P,q=_&&z>7?R-1:R;h[z].codewords[q]=t[C++]}if(C!==t.length)throw new y;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class sa{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new y(""+t);let r=0,s=this.bitOffset,a=this.byteOffset;const c=this.bytes;if(s>0){const h=8-s,d=t<h?t:h,g=h-d,x=255>>8-d<<g;r=(c[a]&x)>>g,t-=d,s+=d,s===8&&(s=0,a++)}if(t>0){for(;t>=8;)r=r<<8|c[a]&255,a++,t-=8;if(t>0){const h=8-t,d=255>>h<<h;r=r<<t|(c[a]&d)>>h,s+=t}}return this.bitOffset=s,this.byteOffset=a,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var lt;(function(A){A[A.PAD_ENCODE=0]="PAD_ENCODE",A[A.ASCII_ENCODE=1]="ASCII_ENCODE",A[A.C40_ENCODE=2]="C40_ENCODE",A[A.TEXT_ENCODE=3]="TEXT_ENCODE",A[A.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",A[A.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",A[A.BASE256_ENCODE=6]="BASE256_ENCODE"})(lt||(lt={}));class Kn{static decode(t){const r=new sa(t),s=new oe,a=new oe,c=new Array;let h=lt.ASCII_ENCODE;do if(h===lt.ASCII_ENCODE)h=this.decodeAsciiSegment(r,s,a);else{switch(h){case lt.C40_ENCODE:this.decodeC40Segment(r,s);break;case lt.TEXT_ENCODE:this.decodeTextSegment(r,s);break;case lt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,s);break;case lt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,s);break;case lt.BASE256_ENCODE:this.decodeBase256Segment(r,s,c);break;default:throw new j}h=lt.ASCII_ENCODE}while(h!==lt.PAD_ENCODE&&r.available()>0);return a.length()>0&&s.append(a.toString()),new Pn(t,s.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(t,r,s){let a=!1;do{let c=t.readBits(8);if(c===0)throw new j;if(c<=128)return a&&(c+=128),r.append(String.fromCharCode(c-1)),lt.ASCII_ENCODE;if(c===129)return lt.PAD_ENCODE;if(c<=229){const h=c-130;h<10&&r.append("0"),r.append(""+h)}else switch(c){case 230:return lt.C40_ENCODE;case 231:return lt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),s.insert(0,"");break;case 237:r.append("[)>06"),s.insert(0,"");break;case 238:return lt.ANSIX12_ENCODE;case 239:return lt.TEXT_ENCODE;case 240:return lt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||t.available()!==0)throw new j;break}}while(t.available()>0);return lt.ASCII_ENCODE}static decodeC40Segment(t,r){let s=!1;const a=[];let c=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let d=0;d<3;d++){const g=a[d];switch(c){case 0:if(g<3)c=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[g];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x)}else throw new j;break;case 1:s?(r.append(String.fromCharCode(g+128)),s=!1):r.append(String.fromCharCode(g)),c=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[g];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x)}else switch(g){case 27:r.append("");break;case 30:s=!0;break;default:throw new j}c=0;break;case 3:s?(r.append(String.fromCharCode(g+224)),s=!1):r.append(String.fromCharCode(g+96)),c=0;break;default:throw new j}}}while(t.available()>0)}static decodeTextSegment(t,r){let s=!1,a=[],c=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let d=0;d<3;d++){const g=a[d];switch(c){case 0:if(g<3)c=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[g];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x)}else throw new j;break;case 1:s?(r.append(String.fromCharCode(g+128)),s=!1):r.append(String.fromCharCode(g)),c=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[g];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x)}else switch(g){case 27:r.append("");break;case 30:s=!0;break;default:throw new j}c=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[g];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x),c=0}else throw new j;break;default:throw new j}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const s=[];do{if(t.available()===8)return;const a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),s);for(let c=0;c<3;c++){const h=s[c];switch(h){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(h<14)r.append(String.fromCharCode(h+44));else if(h<40)r.append(String.fromCharCode(h+51));else throw new j;break}}}while(t.available()>0)}static parseTwoBytes(t,r,s){let a=(t<<8)+r-1,c=Math.floor(a/1600);s[0]=c,a-=c*1600,c=Math.floor(a/40),s[1]=c,s[2]=a-c*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let s=0;s<4;s++){let a=t.readBits(6);if(a===31){const c=8-t.getBitOffset();c!==8&&t.readBits(c);return}(a&32)===0&&(a|=64),r.append(String.fromCharCode(a))}}while(t.available()>0)}static decodeBase256Segment(t,r,s){let a=1+t.getByteOffset();const c=this.unrandomize255State(t.readBits(8),a++);let h;if(c===0?h=t.available()/8|0:c<250?h=c:h=250*(c-249)+this.unrandomize255State(t.readBits(8),a++),h<0)throw new j;const d=new Uint8Array(h);for(let g=0;g<h;g++){if(t.available()<8)throw new j;d[g]=this.unrandomize255State(t.readBits(8),a++)}s.push(d);try{r.append(Ce.decode(d,se.ISO88591))}catch(g){throw new qt("Platform does not support required encoding: "+g.message)}}static unrandomize255State(t,r){const s=149*r%255+1,a=t-s;return a>=0?a:a+256}}Kn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Kn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Kn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Kn.TEXT_SHIFT2_SET_CHARS=Kn.C40_SHIFT2_SET_CHARS,Kn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class c0{constructor(){this.rsDecoder=new $n(ve.DATA_MATRIX_FIELD_256)}decode(t){const r=new ia(t),s=r.getVersion(),a=r.readCodewords(),c=ra.getDataBlocks(a,s);let h=0;for(let x of c)h+=x.getNumDataCodewords();const d=new Uint8Array(h),g=c.length;for(let x=0;x<g;x++){const w=c[x],C=w.getCodewords(),_=w.getNumDataCodewords();this.correctErrors(C,_);for(let I=0;I<_;I++)d[I*g+x]=C[I]}return Kn.decode(d)}correctErrors(t,r){const s=new Int32Array(t);try{this.rsDecoder.decode(s,t.length-r)}catch{throw new v}for(let a=0;a<r;a++)t[a]=s[a]}}class et{constructor(t){this.image=t,this.rectangleDetector=new kt(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new H;r=this.shiftToModuleCenter(r);const s=r[0],a=r[1],c=r[2],h=r[3];let d=this.transitionsBetween(s,h)+1,g=this.transitionsBetween(c,h)+1;(d&1)===1&&(d+=1),(g&1)===1&&(g+=1),4*d<7*g&&4*g<7*d&&(d=g=Math.max(d,g));let x=et.sampleGrid(this.image,s,a,c,h,d,g);return new mi(x,[s,a,c,h])}static shiftPoint(t,r,s){let a=(r.getX()-t.getX())/(s+1),c=(r.getY()-t.getY())/(s+1);return new re(t.getX()+a,t.getY()+c)}static moveAway(t,r,s){let a=t.getX(),c=t.getY();return a<r?a-=1:a+=1,c<s?c-=1:c+=1,new re(a,c)}detectSolid1(t){let r=t[0],s=t[1],a=t[3],c=t[2],h=this.transitionsBetween(r,s),d=this.transitionsBetween(s,a),g=this.transitionsBetween(a,c),x=this.transitionsBetween(c,r),w=h,C=[c,r,s,a];return w>d&&(w=d,C[0]=r,C[1]=s,C[2]=a,C[3]=c),w>g&&(w=g,C[0]=s,C[1]=a,C[2]=c,C[3]=r),w>x&&(C[0]=a,C[1]=c,C[2]=r,C[3]=s),C}detectSolid2(t){let r=t[0],s=t[1],a=t[2],c=t[3],h=this.transitionsBetween(r,c),d=et.shiftPoint(s,a,(h+1)*4),g=et.shiftPoint(a,s,(h+1)*4),x=this.transitionsBetween(d,r),w=this.transitionsBetween(g,c);return x<w?(t[0]=r,t[1]=s,t[2]=a,t[3]=c):(t[0]=s,t[1]=a,t[2]=c,t[3]=r),t}correctTopRight(t){let r=t[0],s=t[1],a=t[2],c=t[3],h=this.transitionsBetween(r,c),d=this.transitionsBetween(s,c),g=et.shiftPoint(r,s,(d+1)*4),x=et.shiftPoint(a,s,(h+1)*4);h=this.transitionsBetween(g,c),d=this.transitionsBetween(x,c);let w=new re(c.getX()+(a.getX()-s.getX())/(h+1),c.getY()+(a.getY()-s.getY())/(h+1)),C=new re(c.getX()+(r.getX()-s.getX())/(d+1),c.getY()+(r.getY()-s.getY())/(d+1));if(!this.isValid(w))return this.isValid(C)?C:null;if(!this.isValid(C))return w;let _=this.transitionsBetween(g,w)+this.transitionsBetween(x,w),I=this.transitionsBetween(g,C)+this.transitionsBetween(x,C);return _>I?w:C}shiftToModuleCenter(t){let r=t[0],s=t[1],a=t[2],c=t[3],h=this.transitionsBetween(r,c)+1,d=this.transitionsBetween(a,c)+1,g=et.shiftPoint(r,s,d*4),x=et.shiftPoint(a,s,h*4);h=this.transitionsBetween(g,c)+1,d=this.transitionsBetween(x,c)+1,(h&1)===1&&(h+=1),(d&1)===1&&(d+=1);let w=(r.getX()+s.getX()+a.getX()+c.getX())/4,C=(r.getY()+s.getY()+a.getY()+c.getY())/4;r=et.moveAway(r,w,C),s=et.moveAway(s,w,C),a=et.moveAway(a,w,C),c=et.moveAway(c,w,C);let _,I;return g=et.shiftPoint(r,s,d*4),g=et.shiftPoint(g,c,h*4),_=et.shiftPoint(s,r,d*4),_=et.shiftPoint(_,a,h*4),x=et.shiftPoint(a,c,d*4),x=et.shiftPoint(x,s,h*4),I=et.shiftPoint(c,a,d*4),I=et.shiftPoint(I,r,h*4),[g,_,x,I]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,s,a,c,h,d){return hn.getInstance().sampleGrid(t,h,d,.5,.5,h-.5,.5,h-.5,d-.5,.5,d-.5,r.getX(),r.getY(),c.getX(),c.getY(),a.getX(),a.getY(),s.getX(),s.getY())}transitionsBetween(t,r){let s=Math.trunc(t.getX()),a=Math.trunc(t.getY()),c=Math.trunc(r.getX()),h=Math.trunc(r.getY()),d=Math.abs(h-a)>Math.abs(c-s);if(d){let R=s;s=a,a=R,R=c,c=h,h=R}let g=Math.abs(c-s),x=Math.abs(h-a),w=-g/2,C=a<h?1:-1,_=s<c?1:-1,I=0,D=this.image.get(d?a:s,d?s:a);for(let R=s,P=a;R!==c;R+=_){let z=this.image.get(d?P:R,d?R:P);if(z!==D&&(I++,D=z),w+=x,w>0){if(P===h)break;P+=C,w-=g}}return I}}class Zn{constructor(){this.decoder=new c0}decode(t,r=null){let s,a;if(r!=null&&r.has(Z.PURE_BARCODE)){const x=Zn.extractPureBits(t.getBlackMatrix());s=this.decoder.decode(x),a=Zn.NO_POINTS}else{const x=new et(t.getBlackMatrix()).detect();s=this.decoder.decode(x.getBits()),a=x.getPoints()}const c=s.getRawBytes(),h=new $e(s.getText(),c,8*c.length,a,le.DATA_MATRIX,M.currentTimeMillis()),d=s.getByteSegments();d!=null&&h.putMetadata(ze.BYTE_SEGMENTS,d);const g=s.getECLevel();return g!=null&&h.putMetadata(ze.ERROR_CORRECTION_LEVEL,g),h}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),s=t.getBottomRightOnBit();if(r==null||s==null)throw new H;const a=this.moduleSize(r,t);let c=r[1];const h=s[1];let d=r[0];const x=(s[0]-d+1)/a,w=(h-c+1)/a;if(x<=0||w<=0)throw new H;const C=a/2;c+=C,d+=C;const _=new we(x,w);for(let I=0;I<w;I++){const D=c+I*a;for(let R=0;R<x;R++)t.get(d+R*a,D)&&_.set(R,I)}return _}static moduleSize(t,r){const s=r.getWidth();let a=t[0];const c=t[1];for(;a<s&&r.get(a,c);)a++;if(a===s)throw new H;const h=a-t[0];if(h===0)throw new H;return h}}Zn.NO_POINTS=[];class u0 extends Gt{constructor(t=500){super(new Zn,t)}}var tr;(function(A){A[A.L=0]="L",A[A.M=1]="M",A[A.Q=2]="Q",A[A.H=3]="H"})(tr||(tr={}));class je{constructor(t,r,s){this.value=t,this.stringValue=r,this.bits=s,je.FOR_BITS.set(s,this),je.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return je.L;case"M":return je.M;case"Q":return je.Q;case"H":return je.H;default:throw new b(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof je))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=je.FOR_BITS.size)throw new y;return je.FOR_BITS.get(t)}}je.FOR_BITS=new Map,je.FOR_VALUE=new Map,je.L=new je(tr.L,"L",1),je.M=new je(tr.M,"M",0),je.Q=new je(tr.Q,"Q",3),je.H=new je(tr.H,"H",2);class Et{constructor(t){this.errorCorrectionLevel=je.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return F.bitCount(t^r)}static decodeFormatInformation(t,r){const s=Et.doDecodeFormatInformation(t,r);return s!==null?s:Et.doDecodeFormatInformation(t^Et.FORMAT_INFO_MASK_QR,r^Et.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let s=Number.MAX_SAFE_INTEGER,a=0;for(const c of Et.FORMAT_INFO_DECODE_LOOKUP){const h=c[0];if(h===t||h===r)return new Et(c[1]);let d=Et.numBitsDiffering(t,h);d<s&&(a=c[1],s=d),t!==r&&(d=Et.numBitsDiffering(r,h),d<s&&(a=c[1],s=d))}return s<=3?new Et(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Et))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Et.FORMAT_INFO_MASK_QR=21522,Et.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class B{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const s of r)t+=s.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class T{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ce{constructor(t,r,...s){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=s;let a=0;const c=s[0].getECCodewordsPerBlock(),h=s[0].getECBlocks();for(const d of h)a+=d.getCount()*(d.getDataCodewords()+c);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new j;try{return this.getVersionForNumber((t-17)/4)}catch{throw new j}}static getVersionForNumber(t){if(t<1||t>40)throw new y;return ce.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,s=0;for(let a=0;a<ce.VERSION_DECODE_INFO.length;a++){const c=ce.VERSION_DECODE_INFO[a];if(c===t)return ce.getVersionForNumber(a+7);const h=Et.numBitsDiffering(t,c);h<r&&(s=a+7,r=h)}return r<=3?ce.getVersionForNumber(s):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new we(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const s=this.alignmentPatternCenters.length;for(let a=0;a<s;a++){const c=this.alignmentPatternCenters[a]-2;for(let h=0;h<s;h++)a===0&&(h===0||h===s-1)||a===s-1&&h===0||r.setRegion(this.alignmentPatternCenters[h]-2,c,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}ce.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ce.VERSIONS=[new ce(1,new Int32Array(0),new B(7,new T(1,19)),new B(10,new T(1,16)),new B(13,new T(1,13)),new B(17,new T(1,9))),new ce(2,Int32Array.from([6,18]),new B(10,new T(1,34)),new B(16,new T(1,28)),new B(22,new T(1,22)),new B(28,new T(1,16))),new ce(3,Int32Array.from([6,22]),new B(15,new T(1,55)),new B(26,new T(1,44)),new B(18,new T(2,17)),new B(22,new T(2,13))),new ce(4,Int32Array.from([6,26]),new B(20,new T(1,80)),new B(18,new T(2,32)),new B(26,new T(2,24)),new B(16,new T(4,9))),new ce(5,Int32Array.from([6,30]),new B(26,new T(1,108)),new B(24,new T(2,43)),new B(18,new T(2,15),new T(2,16)),new B(22,new T(2,11),new T(2,12))),new ce(6,Int32Array.from([6,34]),new B(18,new T(2,68)),new B(16,new T(4,27)),new B(24,new T(4,19)),new B(28,new T(4,15))),new ce(7,Int32Array.from([6,22,38]),new B(20,new T(2,78)),new B(18,new T(4,31)),new B(18,new T(2,14),new T(4,15)),new B(26,new T(4,13),new T(1,14))),new ce(8,Int32Array.from([6,24,42]),new B(24,new T(2,97)),new B(22,new T(2,38),new T(2,39)),new B(22,new T(4,18),new T(2,19)),new B(26,new T(4,14),new T(2,15))),new ce(9,Int32Array.from([6,26,46]),new B(30,new T(2,116)),new B(22,new T(3,36),new T(2,37)),new B(20,new T(4,16),new T(4,17)),new B(24,new T(4,12),new T(4,13))),new ce(10,Int32Array.from([6,28,50]),new B(18,new T(2,68),new T(2,69)),new B(26,new T(4,43),new T(1,44)),new B(24,new T(6,19),new T(2,20)),new B(28,new T(6,15),new T(2,16))),new ce(11,Int32Array.from([6,30,54]),new B(20,new T(4,81)),new B(30,new T(1,50),new T(4,51)),new B(28,new T(4,22),new T(4,23)),new B(24,new T(3,12),new T(8,13))),new ce(12,Int32Array.from([6,32,58]),new B(24,new T(2,92),new T(2,93)),new B(22,new T(6,36),new T(2,37)),new B(26,new T(4,20),new T(6,21)),new B(28,new T(7,14),new T(4,15))),new ce(13,Int32Array.from([6,34,62]),new B(26,new T(4,107)),new B(22,new T(8,37),new T(1,38)),new B(24,new T(8,20),new T(4,21)),new B(22,new T(12,11),new T(4,12))),new ce(14,Int32Array.from([6,26,46,66]),new B(30,new T(3,115),new T(1,116)),new B(24,new T(4,40),new T(5,41)),new B(20,new T(11,16),new T(5,17)),new B(24,new T(11,12),new T(5,13))),new ce(15,Int32Array.from([6,26,48,70]),new B(22,new T(5,87),new T(1,88)),new B(24,new T(5,41),new T(5,42)),new B(30,new T(5,24),new T(7,25)),new B(24,new T(11,12),new T(7,13))),new ce(16,Int32Array.from([6,26,50,74]),new B(24,new T(5,98),new T(1,99)),new B(28,new T(7,45),new T(3,46)),new B(24,new T(15,19),new T(2,20)),new B(30,new T(3,15),new T(13,16))),new ce(17,Int32Array.from([6,30,54,78]),new B(28,new T(1,107),new T(5,108)),new B(28,new T(10,46),new T(1,47)),new B(28,new T(1,22),new T(15,23)),new B(28,new T(2,14),new T(17,15))),new ce(18,Int32Array.from([6,30,56,82]),new B(30,new T(5,120),new T(1,121)),new B(26,new T(9,43),new T(4,44)),new B(28,new T(17,22),new T(1,23)),new B(28,new T(2,14),new T(19,15))),new ce(19,Int32Array.from([6,30,58,86]),new B(28,new T(3,113),new T(4,114)),new B(26,new T(3,44),new T(11,45)),new B(26,new T(17,21),new T(4,22)),new B(26,new T(9,13),new T(16,14))),new ce(20,Int32Array.from([6,34,62,90]),new B(28,new T(3,107),new T(5,108)),new B(26,new T(3,41),new T(13,42)),new B(30,new T(15,24),new T(5,25)),new B(28,new T(15,15),new T(10,16))),new ce(21,Int32Array.from([6,28,50,72,94]),new B(28,new T(4,116),new T(4,117)),new B(26,new T(17,42)),new B(28,new T(17,22),new T(6,23)),new B(30,new T(19,16),new T(6,17))),new ce(22,Int32Array.from([6,26,50,74,98]),new B(28,new T(2,111),new T(7,112)),new B(28,new T(17,46)),new B(30,new T(7,24),new T(16,25)),new B(24,new T(34,13))),new ce(23,Int32Array.from([6,30,54,78,102]),new B(30,new T(4,121),new T(5,122)),new B(28,new T(4,47),new T(14,48)),new B(30,new T(11,24),new T(14,25)),new B(30,new T(16,15),new T(14,16))),new ce(24,Int32Array.from([6,28,54,80,106]),new B(30,new T(6,117),new T(4,118)),new B(28,new T(6,45),new T(14,46)),new B(30,new T(11,24),new T(16,25)),new B(30,new T(30,16),new T(2,17))),new ce(25,Int32Array.from([6,32,58,84,110]),new B(26,new T(8,106),new T(4,107)),new B(28,new T(8,47),new T(13,48)),new B(30,new T(7,24),new T(22,25)),new B(30,new T(22,15),new T(13,16))),new ce(26,Int32Array.from([6,30,58,86,114]),new B(28,new T(10,114),new T(2,115)),new B(28,new T(19,46),new T(4,47)),new B(28,new T(28,22),new T(6,23)),new B(30,new T(33,16),new T(4,17))),new ce(27,Int32Array.from([6,34,62,90,118]),new B(30,new T(8,122),new T(4,123)),new B(28,new T(22,45),new T(3,46)),new B(30,new T(8,23),new T(26,24)),new B(30,new T(12,15),new T(28,16))),new ce(28,Int32Array.from([6,26,50,74,98,122]),new B(30,new T(3,117),new T(10,118)),new B(28,new T(3,45),new T(23,46)),new B(30,new T(4,24),new T(31,25)),new B(30,new T(11,15),new T(31,16))),new ce(29,Int32Array.from([6,30,54,78,102,126]),new B(30,new T(7,116),new T(7,117)),new B(28,new T(21,45),new T(7,46)),new B(30,new T(1,23),new T(37,24)),new B(30,new T(19,15),new T(26,16))),new ce(30,Int32Array.from([6,26,52,78,104,130]),new B(30,new T(5,115),new T(10,116)),new B(28,new T(19,47),new T(10,48)),new B(30,new T(15,24),new T(25,25)),new B(30,new T(23,15),new T(25,16))),new ce(31,Int32Array.from([6,30,56,82,108,134]),new B(30,new T(13,115),new T(3,116)),new B(28,new T(2,46),new T(29,47)),new B(30,new T(42,24),new T(1,25)),new B(30,new T(23,15),new T(28,16))),new ce(32,Int32Array.from([6,34,60,86,112,138]),new B(30,new T(17,115)),new B(28,new T(10,46),new T(23,47)),new B(30,new T(10,24),new T(35,25)),new B(30,new T(19,15),new T(35,16))),new ce(33,Int32Array.from([6,30,58,86,114,142]),new B(30,new T(17,115),new T(1,116)),new B(28,new T(14,46),new T(21,47)),new B(30,new T(29,24),new T(19,25)),new B(30,new T(11,15),new T(46,16))),new ce(34,Int32Array.from([6,34,62,90,118,146]),new B(30,new T(13,115),new T(6,116)),new B(28,new T(14,46),new T(23,47)),new B(30,new T(44,24),new T(7,25)),new B(30,new T(59,16),new T(1,17))),new ce(35,Int32Array.from([6,30,54,78,102,126,150]),new B(30,new T(12,121),new T(7,122)),new B(28,new T(12,47),new T(26,48)),new B(30,new T(39,24),new T(14,25)),new B(30,new T(22,15),new T(41,16))),new ce(36,Int32Array.from([6,24,50,76,102,128,154]),new B(30,new T(6,121),new T(14,122)),new B(28,new T(6,47),new T(34,48)),new B(30,new T(46,24),new T(10,25)),new B(30,new T(2,15),new T(64,16))),new ce(37,Int32Array.from([6,28,54,80,106,132,158]),new B(30,new T(17,122),new T(4,123)),new B(28,new T(29,46),new T(14,47)),new B(30,new T(49,24),new T(10,25)),new B(30,new T(24,15),new T(46,16))),new ce(38,Int32Array.from([6,32,58,84,110,136,162]),new B(30,new T(4,122),new T(18,123)),new B(28,new T(13,46),new T(32,47)),new B(30,new T(48,24),new T(14,25)),new B(30,new T(42,15),new T(32,16))),new ce(39,Int32Array.from([6,26,54,82,110,138,166]),new B(30,new T(20,117),new T(4,118)),new B(28,new T(40,47),new T(7,48)),new B(30,new T(43,24),new T(22,25)),new B(30,new T(10,15),new T(67,16))),new ce(40,Int32Array.from([6,30,58,86,114,142,170]),new B(30,new T(19,118),new T(6,119)),new B(28,new T(18,47),new T(31,48)),new B(30,new T(34,24),new T(34,25)),new B(30,new T(20,15),new T(61,16)))];var ht;(function(A){A[A.DATA_MASK_000=0]="DATA_MASK_000",A[A.DATA_MASK_001=1]="DATA_MASK_001",A[A.DATA_MASK_010=2]="DATA_MASK_010",A[A.DATA_MASK_011=3]="DATA_MASK_011",A[A.DATA_MASK_100=4]="DATA_MASK_100",A[A.DATA_MASK_101=5]="DATA_MASK_101",A[A.DATA_MASK_110=6]="DATA_MASK_110",A[A.DATA_MASK_111=7]="DATA_MASK_111"})(ht||(ht={}));class Qt{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let s=0;s<r;s++)for(let a=0;a<r;a++)this.isMasked(s,a)&&t.flip(a,s)}}Qt.values=new Map([[ht.DATA_MASK_000,new Qt(ht.DATA_MASK_000,(A,t)=>(A+t&1)===0)],[ht.DATA_MASK_001,new Qt(ht.DATA_MASK_001,(A,t)=>(A&1)===0)],[ht.DATA_MASK_010,new Qt(ht.DATA_MASK_010,(A,t)=>t%3===0)],[ht.DATA_MASK_011,new Qt(ht.DATA_MASK_011,(A,t)=>(A+t)%3===0)],[ht.DATA_MASK_100,new Qt(ht.DATA_MASK_100,(A,t)=>(Math.floor(A/2)+Math.floor(t/3)&1)===0)],[ht.DATA_MASK_101,new Qt(ht.DATA_MASK_101,(A,t)=>A*t%6===0)],[ht.DATA_MASK_110,new Qt(ht.DATA_MASK_110,(A,t)=>A*t%6<3)],[ht.DATA_MASK_111,new Qt(ht.DATA_MASK_111,(A,t)=>(A+t+A*t%3&1)===0)]]);class h0{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new j;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let c=0;c<6;c++)t=this.copyBit(c,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let c=5;c>=0;c--)t=this.copyBit(8,c,t);const r=this.bitMatrix.getHeight();let s=0;const a=r-7;for(let c=r-1;c>=a;c--)s=this.copyBit(8,c,s);for(let c=r-8;c<r;c++)s=this.copyBit(c,8,s);if(this.parsedFormatInfo=Et.decodeFormatInformation(t,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return ce.getVersionForNumber(r);let s=0;const a=t-11;for(let h=5;h>=0;h--)for(let d=t-9;d>=a;d--)s=this.copyBit(d,h,s);let c=ce.decodeVersionInformation(s);if(c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;s=0;for(let h=5;h>=0;h--)for(let d=t-9;d>=a;d--)s=this.copyBit(h,d,s);if(c=ce.decodeVersionInformation(s),c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;throw new j}copyBit(t,r,s){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?s<<1|1:s<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),s=Qt.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a);const c=r.buildFunctionPattern();let h=!0;const d=new Uint8Array(r.getTotalCodewords());let g=0,x=0,w=0;for(let C=a-1;C>0;C-=2){C===6&&C--;for(let _=0;_<a;_++){const I=h?a-1-_:_;for(let D=0;D<2;D++)c.get(C-D,I)||(w++,x<<=1,this.bitMatrix.get(C-D,I)&&(x|=1),w===8&&(d[g++]=x,w=0,x=0))}h=!h}if(g!==r.getTotalCodewords())throw new j;return d}remask(){if(this.parsedFormatInfo===null)return;const t=Qt.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,s=t.getWidth();r<s;r++)for(let a=r+1,c=t.getHeight();a<c;a++)t.get(r,a)!==t.get(a,r)&&(t.flip(a,r),t.flip(r,a))}}class oa{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,s){if(t.length!==r.getTotalCodewords())throw new y;const a=r.getECBlocksForLevel(s);let c=0;const h=a.getECBlocks();for(const D of h)c+=D.getCount();const d=new Array(c);let g=0;for(const D of h)for(let R=0;R<D.getCount();R++){const P=D.getDataCodewords(),z=a.getECCodewordsPerBlock()+P;d[g++]=new oa(P,new Uint8Array(z))}const x=d[0].codewords.length;let w=d.length-1;for(;w>=0&&d[w].codewords.length!==x;)w--;w++;const C=x-a.getECCodewordsPerBlock();let _=0;for(let D=0;D<C;D++)for(let R=0;R<g;R++)d[R].codewords[D]=t[_++];for(let D=w;D<g;D++)d[D].codewords[C]=t[_++];const I=d[0].codewords.length;for(let D=C;D<I;D++)for(let R=0;R<g;R++){const P=R<w?D:D+1;d[R].codewords[P]=t[_++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Jt;(function(A){A[A.TERMINATOR=0]="TERMINATOR",A[A.NUMERIC=1]="NUMERIC",A[A.ALPHANUMERIC=2]="ALPHANUMERIC",A[A.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",A[A.BYTE=4]="BYTE",A[A.ECI=5]="ECI",A[A.KANJI=6]="KANJI",A[A.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",A[A.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",A[A.HANZI=9]="HANZI"})(Jt||(Jt={}));class he{constructor(t,r,s,a){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=s,this.bits=a,he.FOR_BITS.set(a,this),he.FOR_VALUE.set(t,this)}static forBits(t){const r=he.FOR_BITS.get(t);if(r===void 0)throw new y;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let s;return r<=9?s=0:r<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof he))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}he.FOR_BITS=new Map,he.FOR_VALUE=new Map,he.TERMINATOR=new he(Jt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),he.NUMERIC=new he(Jt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),he.ALPHANUMERIC=new he(Jt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),he.STRUCTURED_APPEND=new he(Jt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),he.BYTE=new he(Jt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),he.ECI=new he(Jt.ECI,"ECI",Int32Array.from([0,0,0]),7),he.KANJI=new he(Jt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),he.FNC1_FIRST_POSITION=new he(Jt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),he.FNC1_SECOND_POSITION=new he(Jt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),he.HANZI=new he(Jt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Xe{static decode(t,r,s,a){const c=new sa(t);let h=new oe;const d=new Array;let g=-1,x=-1;try{let w=null,C=!1,_;do{if(c.available()<4)_=he.TERMINATOR;else{const I=c.readBits(4);_=he.forBits(I)}switch(_){case he.TERMINATOR:break;case he.FNC1_FIRST_POSITION:case he.FNC1_SECOND_POSITION:C=!0;break;case he.STRUCTURED_APPEND:if(c.available()<16)throw new j;g=c.readBits(8),x=c.readBits(8);break;case he.ECI:const I=Xe.parseECIValue(c);if(w=Y.getCharacterSetECIByValue(I),w===null)throw new j;break;case he.HANZI:const D=c.readBits(4),R=c.readBits(_.getCharacterCountBits(r));D===Xe.GB2312_SUBSET&&Xe.decodeHanziSegment(c,h,R);break;default:const P=c.readBits(_.getCharacterCountBits(r));switch(_){case he.NUMERIC:Xe.decodeNumericSegment(c,h,P);break;case he.ALPHANUMERIC:Xe.decodeAlphanumericSegment(c,h,P,C);break;case he.BYTE:Xe.decodeByteSegment(c,h,P,w,d,a);break;case he.KANJI:Xe.decodeKanjiSegment(c,h,P);break;default:throw new j}break}}while(_!==he.TERMINATOR)}catch{throw new j}return new Pn(t,h.toString(),d.length===0?null:d,s===null?null:s.toString(),g,x)}static decodeHanziSegment(t,r,s){if(s*13>t.available())throw new j;const a=new Uint8Array(2*s);let c=0;for(;s>0;){const h=t.readBits(13);let d=h/96<<8&4294967295|h%96;d<959?d+=41377:d+=42657,a[c]=d>>8&255,a[c+1]=d&255,c+=2,s--}try{r.append(Ce.decode(a,se.GB2312))}catch(h){throw new j(h)}}static decodeKanjiSegment(t,r,s){if(s*13>t.available())throw new j;const a=new Uint8Array(2*s);let c=0;for(;s>0;){const h=t.readBits(13);let d=h/192<<8&4294967295|h%192;d<7936?d+=33088:d+=49472,a[c]=d>>8,a[c+1]=d,c+=2,s--}try{r.append(Ce.decode(a,se.SHIFT_JIS))}catch(h){throw new j(h)}}static decodeByteSegment(t,r,s,a,c,h){if(8*s>t.available())throw new j;const d=new Uint8Array(s);for(let x=0;x<s;x++)d[x]=t.readBits(8);let g;a===null?g=se.guessEncoding(d,h):g=a.getName();try{r.append(Ce.decode(d,g))}catch(x){throw new j(x)}c.push(d)}static toAlphaNumericChar(t){if(t>=Xe.ALPHANUMERIC_CHARS.length)throw new j;return Xe.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,s,a){const c=r.length();for(;s>1;){if(t.available()<11)throw new j;const h=t.readBits(11);r.append(Xe.toAlphaNumericChar(Math.floor(h/45))),r.append(Xe.toAlphaNumericChar(h%45)),s-=2}if(s===1){if(t.available()<6)throw new j;r.append(Xe.toAlphaNumericChar(t.readBits(6)))}if(a)for(let h=c;h<r.length();h++)r.charAt(h)==="%"&&(h<r.length()-1&&r.charAt(h+1)==="%"?r.deleteCharAt(h+1):r.setCharAt(h,""))}static decodeNumericSegment(t,r,s){for(;s>=3;){if(t.available()<10)throw new j;const a=t.readBits(10);if(a>=1e3)throw new j;r.append(Xe.toAlphaNumericChar(Math.floor(a/100))),r.append(Xe.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(Xe.toAlphaNumericChar(a%10)),s-=3}if(s===2){if(t.available()<7)throw new j;const a=t.readBits(7);if(a>=100)throw new j;r.append(Xe.toAlphaNumericChar(Math.floor(a/10))),r.append(Xe.toAlphaNumericChar(a%10))}else if(s===1){if(t.available()<4)throw new j;const a=t.readBits(4);if(a>=10)throw new j;r.append(Xe.toAlphaNumericChar(a))}}static parseECIValue(t){const r=t.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const s=t.readBits(8);return(r&63)<<8&4294967295|s}if((r&224)===192){const s=t.readBits(16);return(r&31)<<16&4294967295|s}throw new j}}Xe.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Xe.GB2312_SUBSET=1;class Lc{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class f0{constructor(){this.rsDecoder=new $n(ve.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(we.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const s=new h0(t);let a=null;try{return this.decodeBitMatrixParser(s,r)}catch(c){a=c}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const c=this.decodeBitMatrixParser(s,r);return c.setOther(new Lc(!0)),c}catch(c){throw a!==null?a:c}}decodeBitMatrixParser(t,r){const s=t.readVersion(),a=t.readFormatInformation().getErrorCorrectionLevel(),c=t.readCodewords(),h=oa.getDataBlocks(c,s,a);let d=0;for(const w of h)d+=w.getNumDataCodewords();const g=new Uint8Array(d);let x=0;for(const w of h){const C=w.getCodewords(),_=w.getNumDataCodewords();this.correctErrors(C,_);for(let I=0;I<_;I++)g[x++]=C[I]}return Xe.decode(g,s,a,r)}correctErrors(t,r){const s=new Int32Array(t);try{this.rsDecoder.decode(s,t.length-r)}catch{throw new v}for(let a=0;a<r;a++)t[a]=s[a]}}class aa extends re{constructor(t,r,s){super(t,r),this.estimatedModuleSize=s}aboutEquals(t,r,s){if(Math.abs(r-this.getY())<=t&&Math.abs(s-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,s){const a=(this.getX()+r)/2,c=(this.getY()+t)/2,h=(this.estimatedModuleSize+s)/2;return new aa(a,c,h)}}class Ns{constructor(t,r,s,a,c,h,d){this.image=t,this.startX=r,this.startY=s,this.width=a,this.height=c,this.moduleSize=h,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,s=this.width,a=t+s,c=this.startY+r/2,h=new Int32Array(3),d=this.image;for(let g=0;g<r;g++){const x=c+((g&1)===0?Math.floor((g+1)/2):-Math.floor((g+1)/2));h[0]=0,h[1]=0,h[2]=0;let w=t;for(;w<a&&!d.get(w,x);)w++;let C=0;for(;w<a;){if(d.get(w,x))if(C===1)h[1]++;else if(C===2){if(this.foundPatternCross(h)){const _=this.handlePossibleCenter(h,x,w);if(_!==null)return _}h[0]=h[2],h[1]=1,h[2]=0,C=1}else h[++C]++;else C===1&&C++,h[C]++;w++}if(this.foundPatternCross(h)){const _=this.handlePossibleCenter(h,x,a);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,s=r/2;for(let a=0;a<3;a++)if(Math.abs(r-t[a])>=s)return!1;return!0}crossCheckVertical(t,r,s,a){const c=this.image,h=c.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let g=t;for(;g>=0&&c.get(r,g)&&d[1]<=s;)d[1]++,g--;if(g<0||d[1]>s)return NaN;for(;g>=0&&!c.get(r,g)&&d[0]<=s;)d[0]++,g--;if(d[0]>s)return NaN;for(g=t+1;g<h&&c.get(r,g)&&d[1]<=s;)d[1]++,g++;if(g===h||d[1]>s)return NaN;for(;g<h&&!c.get(r,g)&&d[2]<=s;)d[2]++,g++;if(d[2]>s)return NaN;const x=d[0]+d[1]+d[2];return 5*Math.abs(x-a)>=2*a?NaN:this.foundPatternCross(d)?Ns.centerFromEnd(d,g):NaN}handlePossibleCenter(t,r,s){const a=t[0]+t[1]+t[2],c=Ns.centerFromEnd(t,s),h=this.crossCheckVertical(r,c,2*t[1],a);if(!isNaN(h)){const d=(t[0]+t[1]+t[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(d,h,c))return x.combineEstimate(h,c,d);const g=new aa(c,h,d);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class la extends re{constructor(t,r,s,a){super(t,r),this.estimatedModuleSize=s,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,s){if(Math.abs(r-this.getY())<=t&&Math.abs(s-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,s){const a=this.count+1,c=(this.count*this.getX()+r)/a,h=(this.count*this.getY()+t)/a,d=(this.count*this.estimatedModuleSize+s)/a;return new la(c,h,d,a)}}class d0{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ft{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(Z.TRY_HARDER)!==void 0,s=t!=null&&t.get(Z.PURE_BARCODE)!==void 0,a=this.image,c=a.getHeight(),h=a.getWidth();let d=Math.floor(3*c/(4*ft.MAX_MODULES));(d<ft.MIN_SKIP||r)&&(d=ft.MIN_SKIP);let g=!1;const x=new Int32Array(5);for(let C=d-1;C<c&&!g;C+=d){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let _=0;for(let I=0;I<h;I++)if(a.get(I,C))(_&1)===1&&_++,x[_]++;else if((_&1)===0)if(_===4)if(ft.foundPatternCross(x)){if(this.handlePossibleCenter(x,C,I,s)===!0)if(d=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const R=this.findRowSkip();R>x[2]&&(C+=R-x[2]-d,I=h-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,_=3;continue}_=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,_=3;else x[++_]++;else x[_]++;ft.foundPatternCross(x)&&this.handlePossibleCenter(x,C,h,s)===!0&&(d=x[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const w=this.selectBestPatterns();return re.orderBestPatterns(w),new d0(w)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let c=0;c<5;c++){const h=t[c];if(h===0)return!1;r+=h}if(r<7)return!1;const s=r/7,a=s/2;return Math.abs(s-t[0])<a&&Math.abs(s-t[1])<a&&Math.abs(3*s-t[2])<3*a&&Math.abs(s-t[3])<a&&Math.abs(s-t[4])<a}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,s,a){const c=this.getCrossCheckStateCount();let h=0;const d=this.image;for(;t>=h&&r>=h&&d.get(r-h,t-h);)c[2]++,h++;if(t<h||r<h)return!1;for(;t>=h&&r>=h&&!d.get(r-h,t-h)&&c[1]<=s;)c[1]++,h++;if(t<h||r<h||c[1]>s)return!1;for(;t>=h&&r>=h&&d.get(r-h,t-h)&&c[0]<=s;)c[0]++,h++;if(c[0]>s)return!1;const g=d.getHeight(),x=d.getWidth();for(h=1;t+h<g&&r+h<x&&d.get(r+h,t+h);)c[2]++,h++;if(t+h>=g||r+h>=x)return!1;for(;t+h<g&&r+h<x&&!d.get(r+h,t+h)&&c[3]<s;)c[3]++,h++;if(t+h>=g||r+h>=x||c[3]>=s)return!1;for(;t+h<g&&r+h<x&&d.get(r+h,t+h)&&c[4]<s;)c[4]++,h++;if(c[4]>=s)return!1;const w=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(w-a)<2*a&&ft.foundPatternCross(c)}crossCheckVertical(t,r,s,a){const c=this.image,h=c.getHeight(),d=this.getCrossCheckStateCount();let g=t;for(;g>=0&&c.get(r,g);)d[2]++,g--;if(g<0)return NaN;for(;g>=0&&!c.get(r,g)&&d[1]<=s;)d[1]++,g--;if(g<0||d[1]>s)return NaN;for(;g>=0&&c.get(r,g)&&d[0]<=s;)d[0]++,g--;if(d[0]>s)return NaN;for(g=t+1;g<h&&c.get(r,g);)d[2]++,g++;if(g===h)return NaN;for(;g<h&&!c.get(r,g)&&d[3]<s;)d[3]++,g++;if(g===h||d[3]>=s)return NaN;for(;g<h&&c.get(r,g)&&d[4]<s;)d[4]++,g++;if(d[4]>=s)return NaN;const x=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(x-a)>=2*a?NaN:ft.foundPatternCross(d)?ft.centerFromEnd(d,g):NaN}crossCheckHorizontal(t,r,s,a){const c=this.image,h=c.getWidth(),d=this.getCrossCheckStateCount();let g=t;for(;g>=0&&c.get(g,r);)d[2]++,g--;if(g<0)return NaN;for(;g>=0&&!c.get(g,r)&&d[1]<=s;)d[1]++,g--;if(g<0||d[1]>s)return NaN;for(;g>=0&&c.get(g,r)&&d[0]<=s;)d[0]++,g--;if(d[0]>s)return NaN;for(g=t+1;g<h&&c.get(g,r);)d[2]++,g++;if(g===h)return NaN;for(;g<h&&!c.get(g,r)&&d[3]<s;)d[3]++,g++;if(g===h||d[3]>=s)return NaN;for(;g<h&&c.get(g,r)&&d[4]<s;)d[4]++,g++;if(d[4]>=s)return NaN;const x=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(x-a)>=a?NaN:ft.foundPatternCross(d)?ft.centerFromEnd(d,g):NaN}handlePossibleCenter(t,r,s,a){const c=t[0]+t[1]+t[2]+t[3]+t[4];let h=ft.centerFromEnd(t,s),d=this.crossCheckVertical(r,Math.floor(h),t[2],c);if(!isNaN(d)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(d),t[2],c),!isNaN(h)&&(!a||this.crossCheckDiagonal(Math.floor(d),Math.floor(h),t[2],c)))){const g=c/7;let x=!1;const w=this.possibleCenters;for(let C=0,_=w.length;C<_;C++){const I=w[C];if(I.aboutEquals(g,d,h)){w[C]=I.combineEstimate(d,h,g),x=!0;break}}if(!x){const C=new la(h,d,g);w.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const s of this.possibleCenters)if(s.getCount()>=ft.CENTER_QUORUM)if(r==null)r=s;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-s.getX())-Math.abs(r.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const s=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=ft.CENTER_QUORUM&&(t++,r+=h.getEstimatedModuleSize());if(t<3)return!1;const a=r/s;let c=0;for(const h of this.possibleCenters)c+=Math.abs(h.getEstimatedModuleSize()-a);return c<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new H;const r=this.possibleCenters;let s;if(t>3){let a=0,c=0;for(const g of this.possibleCenters){const x=g.getEstimatedModuleSize();a+=x,c+=x*x}s=a/t;let h=Math.sqrt(c/t-s*s);r.sort((g,x)=>{const w=Math.abs(x.getEstimatedModuleSize()-s),C=Math.abs(g.getEstimatedModuleSize()-s);return w<C?-1:w>C?1:0});const d=Math.max(.2*s,h);for(let g=0;g<r.length&&r.length>3;g++){const x=r[g];Math.abs(x.getEstimatedModuleSize()-s)>d&&(r.splice(g,1),g--)}}if(r.length>3){let a=0;for(const c of r)a+=c.getEstimatedModuleSize();s=a/r.length,r.sort((c,h)=>{if(h.getCount()===c.getCount()){const d=Math.abs(h.getEstimatedModuleSize()-s),g=Math.abs(c.getEstimatedModuleSize()-s);return d<g?1:d>g?-1:0}else return h.getCount()-c.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}ft.CENTER_QUORUM=2,ft.MIN_SKIP=3,ft.MAX_MODULES=57;class Vr{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(Z.NEED_RESULT_POINT_CALLBACK);const s=new ft(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(s)}processFinderPatternInfo(t){const r=t.getTopLeft(),s=t.getTopRight(),a=t.getBottomLeft(),c=this.calculateModuleSize(r,s,a);if(c<1)throw new H("No pattern found in proccess finder.");const h=Vr.computeDimension(r,s,a,c),d=ce.getProvisionalVersionForDimension(h),g=d.getDimensionForVersion()-7;let x=null;if(d.getAlignmentPatternCenters().length>0){const I=s.getX()-r.getX()+a.getX(),D=s.getY()-r.getY()+a.getY(),R=1-3/g,P=Math.floor(r.getX()+R*(I-r.getX())),z=Math.floor(r.getY()+R*(D-r.getY()));for(let q=4;q<=16;q<<=1)try{x=this.findAlignmentInRegion(c,P,z,q);break}catch(K){if(!(K instanceof H))throw K}}const w=Vr.createTransform(r,s,a,x,h),C=Vr.sampleGrid(this.image,w,h);let _;return x===null?_=[a,r,s]:_=[a,r,s,x],new mi(C,_)}static createTransform(t,r,s,a,c){const h=c-3.5;let d,g,x,w;return a!==null?(d=a.getX(),g=a.getY(),x=h-3,w=x):(d=r.getX()-t.getX()+s.getX(),g=r.getY()-t.getY()+s.getY(),x=h,w=h),St.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,x,w,3.5,h,t.getX(),t.getY(),r.getX(),r.getY(),d,g,s.getX(),s.getY())}static sampleGrid(t,r,s){return hn.getInstance().sampleGridWithTransform(t,s,s,r)}static computeDimension(t,r,s,a){const c=ye.round(re.distance(t,r)/a),h=ye.round(re.distance(t,s)/a);let d=Math.floor((c+h)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new H("Dimensions could be not found.")}return d}calculateModuleSize(t,r,s){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,s))/2}calculateModuleSizeOneWay(t,r){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(s)?a/7:isNaN(a)?s/7:(s+a)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,s,a){let c=this.sizeOfBlackWhiteBlackRun(t,r,s,a),h=1,d=t-(s-t);d<0?(h=t/(t-d),d=0):d>=this.image.getWidth()&&(h=(this.image.getWidth()-1-t)/(d-t),d=this.image.getWidth()-1);let g=Math.floor(r-(a-r)*h);return h=1,g<0?(h=r/(r-g),g=0):g>=this.image.getHeight()&&(h=(this.image.getHeight()-1-r)/(g-r),g=this.image.getHeight()-1),d=Math.floor(t+(d-t)*h),c+=this.sizeOfBlackWhiteBlackRun(t,r,d,g),c-1}sizeOfBlackWhiteBlackRun(t,r,s,a){const c=Math.abs(a-r)>Math.abs(s-t);if(c){let I=t;t=r,r=I,I=s,s=a,a=I}const h=Math.abs(s-t),d=Math.abs(a-r);let g=-h/2;const x=t<s?1:-1,w=r<a?1:-1;let C=0;const _=s+x;for(let I=t,D=r;I!==_;I+=x){const R=c?D:I,P=c?I:D;if(C===1===this.image.get(R,P)){if(C===2)return ye.distance(I,D,t,r);C++}if(g+=d,g>0){if(D===a)break;D+=w,g-=h}}return C===2?ye.distance(s+x,a,t,r):NaN}findAlignmentInRegion(t,r,s,a){const c=Math.floor(a*t),h=Math.max(0,r-c),d=Math.min(this.image.getWidth()-1,r+c);if(d-h<t*3)throw new H("Alignment top exceeds estimated module size.");const g=Math.max(0,s-c),x=Math.min(this.image.getHeight()-1,s+c);if(x-g<t*3)throw new H("Alignment bottom exceeds estimated module size.");return new Ns(this.image,h,g,d-h,x-g,t,this.resultPointCallback).find()}}class Qn{constructor(){this.decoder=new f0}getDecoder(){return this.decoder}decode(t,r){let s,a;if(r!=null&&r.get(Z.PURE_BARCODE)!==void 0){const g=Qn.extractPureBits(t.getBlackMatrix());s=this.decoder.decodeBitMatrix(g,r),a=Qn.NO_POINTS}else{const g=new Vr(t.getBlackMatrix()).detect(r);s=this.decoder.decodeBitMatrix(g.getBits(),r),a=g.getPoints()}s.getOther()instanceof Lc&&s.getOther().applyMirroredCorrection(a);const c=new $e(s.getText(),s.getRawBytes(),void 0,a,le.QR_CODE,void 0),h=s.getByteSegments();h!==null&&c.putMetadata(ze.BYTE_SEGMENTS,h);const d=s.getECLevel();return d!==null&&c.putMetadata(ze.ERROR_CORRECTION_LEVEL,d),s.hasStructuredAppend()&&(c.putMetadata(ze.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),c.putMetadata(ze.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),c}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),s=t.getBottomRightOnBit();if(r===null||s===null)throw new H;const a=this.moduleSize(r,t);let c=r[1],h=s[1],d=r[0],g=s[0];if(d>=g||c>=h)throw new H;if(h-c!==g-d&&(g=d+(h-c),g>=t.getWidth()))throw new H;const x=Math.round((g-d+1)/a),w=Math.round((h-c+1)/a);if(x<=0||w<=0)throw new H;if(w!==x)throw new H;const C=Math.floor(a/2);c+=C,d+=C;const _=d+Math.floor((x-1)*a)-g;if(_>0){if(_>C)throw new H;d-=_}const I=c+Math.floor((w-1)*a)-h;if(I>0){if(I>C)throw new H;c-=I}const D=new we(x,w);for(let R=0;R<w;R++){const P=c+Math.floor(R*a);for(let z=0;z<x;z++)t.get(d+Math.floor(z*a),P)&&D.set(z,R)}return D}static moduleSize(t,r){const s=r.getHeight(),a=r.getWidth();let c=t[0],h=t[1],d=!0,g=0;for(;c<a&&h<s;){if(d!==r.get(c,h)){if(++g===5)break;d=!d}c++,h++}if(c===a||h===s)throw new H;return(c-t[0])/7}}Qn.NO_POINTS=new Array;class ge{PDF417Common(){}static getBitCountSum(t){return ye.sum(t)}static toIntArray(t){if(t==null||!t.length)return ge.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let s=0;for(const a of t)r[s++]=a;return r}static getCodeword(t){const r=k.binarySearch(ge.SYMBOL_TABLE,t&262143);return r<0?-1:(ge.CODEWORD_TABLE[r]-1)%ge.NUMBER_OF_CODEWORDS}}ge.NUMBER_OF_CODEWORDS=929,ge.MAX_CODEWORDS_IN_BARCODE=ge.NUMBER_OF_CODEWORDS-1,ge.MIN_ROWS_IN_BARCODE=3,ge.MAX_ROWS_IN_BARCODE=90,ge.MODULES_IN_CODEWORD=17,ge.MODULES_IN_STOP_PATTERN=18,ge.BARS_IN_MODULE=8,ge.EMPTY_INT_ARRAY=new Int32Array([]),ge.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ge.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class g0{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class xe{static detectMultiple(t,r,s){let a=t.getBlackMatrix(),c=xe.detect(s,a);return c.length||(a=a.clone(),a.rotate180(),c=xe.detect(s,a)),new g0(a,c)}static detect(t,r){const s=new Array;let a=0,c=0,h=!1;for(;a<r.getHeight();){const d=xe.findVertices(r,a,c);if(d[0]==null&&d[3]==null){if(!h)break;h=!1,c=0;for(const g of s)g[1]!=null&&(a=Math.trunc(Math.max(a,g[1].getY()))),g[3]!=null&&(a=Math.max(a,Math.trunc(g[3].getY())));a+=xe.ROW_STEP;continue}if(h=!0,s.push(d),!t)break;d[2]!=null?(c=Math.trunc(d[2].getX()),a=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),a=Math.trunc(d[4].getY()))}return s}static findVertices(t,r,s){const a=t.getHeight(),c=t.getWidth(),h=new Array(8);return xe.copyToResult(h,xe.findRowsWithPattern(t,a,c,r,s,xe.START_PATTERN),xe.INDEXES_START_PATTERN),h[4]!=null&&(s=Math.trunc(h[4].getX()),r=Math.trunc(h[4].getY())),xe.copyToResult(h,xe.findRowsWithPattern(t,a,c,r,s,xe.STOP_PATTERN),xe.INDEXES_STOP_PATTERN),h}static copyToResult(t,r,s){for(let a=0;a<s.length;a++)t[s[a]]=r[a]}static findRowsWithPattern(t,r,s,a,c,h){const d=new Array(4);let g=!1;const x=new Int32Array(h.length);for(;a<r;a+=xe.ROW_STEP){let C=xe.findGuardPattern(t,c,a,s,!1,h,x);if(C!=null){for(;a>0;){const _=xe.findGuardPattern(t,c,--a,s,!1,h,x);if(_!=null)C=_;else{a++;break}}d[0]=new re(C[0],a),d[1]=new re(C[1],a),g=!0;break}}let w=a+1;if(g){let C=0,_=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;w<r;w++){const I=xe.findGuardPattern(t,_[0],w,s,!1,h,x);if(I!=null&&Math.abs(_[0]-I[0])<xe.MAX_PATTERN_DRIFT&&Math.abs(_[1]-I[1])<xe.MAX_PATTERN_DRIFT)_=I,C=0;else{if(C>xe.SKIPPED_ROW_COUNT_MAX)break;C++}}w-=C+1,d[2]=new re(_[0],w),d[3]=new re(_[1],w)}return w-a<xe.BARCODE_MIN_HEIGHT&&k.fill(d,null),d}static findGuardPattern(t,r,s,a,c,h,d){k.fillWithin(d,0,d.length,0);let g=r,x=0;for(;t.get(g,s)&&g>0&&x++<xe.MAX_PIXEL_DRIFT;)g--;let w=g,C=0,_=h.length;for(let I=c;w<a;w++)if(t.get(w,s)!==I)d[C]++;else{if(C===_-1){if(xe.patternMatchVariance(d,h,xe.MAX_INDIVIDUAL_VARIANCE)<xe.MAX_AVG_VARIANCE)return new Int32Array([g,w]);g+=d[0]+d[1],M.arraycopy(d,2,d,0,C-1),d[C-1]=0,d[C]=0,C--}else C++;d[C]=1,I=!I}return C===_-1&&xe.patternMatchVariance(d,h,xe.MAX_INDIVIDUAL_VARIANCE)<xe.MAX_AVG_VARIANCE?new Int32Array([g,w-1]):null}static patternMatchVariance(t,r,s){let a=t.length,c=0,h=0;for(let x=0;x<a;x++)c+=t[x],h+=r[x];if(c<h)return 1/0;let d=c/h;s*=d;let g=0;for(let x=0;x<a;x++){let w=t[x],C=r[x]*d,_=w>C?w-C:C-w;if(_>s)return 1/0;g+=_}return g/c}}xe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),xe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),xe.MAX_AVG_VARIANCE=.42,xe.MAX_INDIVIDUAL_VARIANCE=.8,xe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),xe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),xe.MAX_PIXEL_DRIFT=3,xe.MAX_PATTERN_DRIFT=5,xe.SKIPPED_ROW_COUNT_MAX=25,xe.ROW_STEP=5,xe.BARCODE_MIN_HEIGHT=10;class gt{constructor(t,r){if(r.length===0)throw new y;this.field=t;let s=r.length;if(s>1&&r[0]===0){let a=1;for(;a<s&&r[a]===0;)a++;a===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-a),M.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let a=0;for(let c of this.coefficients)a=this.field.add(a,c);return a}let r=this.coefficients[0],s=this.coefficients.length;for(let a=1;a<s;a++)r=this.field.add(this.field.multiply(t,r),this.coefficients[a]);return r}add(t){if(!this.field.equals(t.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,s=t.coefficients;if(r.length>s.length){let h=r;r=s,s=h}let a=new Int32Array(s.length),c=s.length-r.length;M.arraycopy(s,0,a,0,c);for(let h=c;h<s.length;h++)a[h]=this.field.add(r[h-c],s[h]);return new gt(this.field,a)}subtract(t){if(!this.field.equals(t.field))throw new y("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof gt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new gt(this.field,new Int32Array([0]));let r=this.coefficients,s=r.length,a=t.coefficients,c=a.length,h=new Int32Array(s+c-1);for(let d=0;d<s;d++){let g=r[d];for(let x=0;x<c;x++)h[d+x]=this.field.add(h[d+x],this.field.multiply(g,a[x]))}return new gt(this.field,h)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let s=0;s<t;s++)r[s]=this.field.subtract(0,this.coefficients[s]);return new gt(this.field,r)}multiplyScalar(t){if(t===0)return new gt(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.multiply(this.coefficients[a],t);return new gt(this.field,s)}multiplyByMonomial(t,r){if(t<0)throw new y;if(r===0)return new gt(this.field,new Int32Array([0]));let s=this.coefficients.length,a=new Int32Array(s+t);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new gt(this.field,a)}toString(){let t=new oe;for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);s!==0&&(s<0?(t.append(" - "),s=-s):t.length()>0&&t.append(" + "),(r===0||s!==1)&&t.append(s),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class p0{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new y;return this.logTable[t]}inverse(t){if(t===0)throw new qi;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class ca extends p0{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let s=1;for(let a=0;a<t;a++)this.expTable[a]=s,s=s*r%t;for(let a=0;a<t-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new gt(this,new Int32Array([0])),this.one=new gt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new y;if(r===0)return this.zero;let s=new Int32Array(t+1);return s[0]=r,new gt(this,s)}}ca.PDF417_GF=new ca(ge.NUMBER_OF_CODEWORDS,3);class Pc{constructor(){this.field=ca.PDF417_GF}decode(t,r,s){let a=new gt(this.field,t),c=new Int32Array(r),h=!1;for(let D=r;D>0;D--){let R=a.evaluateAt(this.field.exp(D));c[r-D]=R,R!==0&&(h=!0)}if(!h)return 0;let d=this.field.getOne();if(s!=null)for(const D of s){let R=this.field.exp(t.length-1-D),P=new gt(this.field,new Int32Array([this.field.subtract(0,R),1]));d=d.multiply(P)}let g=new gt(this.field,c),x=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),g,r),w=x[0],C=x[1],_=this.findErrorLocations(w),I=this.findErrorMagnitudes(C,w,_);for(let D=0;D<_.length;D++){let R=t.length-1-this.field.log(_[D]);if(R<0)throw v.getChecksumInstance();t[R]=this.field.subtract(t[R],I[D])}return _.length}runEuclideanAlgorithm(t,r,s){if(t.getDegree()<r.getDegree()){let _=t;t=r,r=_}let a=t,c=r,h=this.field.getZero(),d=this.field.getOne();for(;c.getDegree()>=Math.round(s/2);){let _=a,I=h;if(a=c,h=d,a.isZero())throw v.getChecksumInstance();c=_;let D=this.field.getZero(),R=a.getCoefficient(a.getDegree()),P=this.field.inverse(R);for(;c.getDegree()>=a.getDegree()&&!c.isZero();){let z=c.getDegree()-a.getDegree(),q=this.field.multiply(c.getCoefficient(c.getDegree()),P);D=D.add(this.field.buildMonomial(z,q)),c=c.subtract(a.multiplyByMonomial(z,q))}d=D.multiply(h).subtract(I).negative()}let g=d.getCoefficient(0);if(g===0)throw v.getChecksumInstance();let x=this.field.inverse(g),w=d.multiply(x),C=c.multiply(x);return[w,C]}findErrorLocations(t){let r=t.getDegree(),s=new Int32Array(r),a=0;for(let c=1;c<this.field.getSize()&&a<r;c++)t.evaluateAt(c)===0&&(s[a]=this.field.inverse(c),a++);if(a!==r)throw v.getChecksumInstance();return s}findErrorMagnitudes(t,r,s){let a=r.getDegree(),c=new Int32Array(a);for(let x=1;x<=a;x++)c[a-x]=this.field.multiply(x,r.getCoefficient(x));let h=new gt(this.field,c),d=s.length,g=new Int32Array(d);for(let x=0;x<d;x++){let w=this.field.inverse(s[x]),C=this.field.subtract(0,t.evaluateAt(w)),_=this.field.inverse(h.evaluateAt(w));g[x]=this.field.multiply(C,_)}return g}}class wi{constructor(t,r,s,a,c){t instanceof wi?this.constructor_2(t):this.constructor_1(t,r,s,a,c)}constructor_1(t,r,s,a,c){const h=r==null||s==null,d=a==null||c==null;if(h&&d)throw new H;h?(r=new re(0,a.getY()),s=new re(0,c.getY())):d&&(a=new re(t.getWidth()-1,r.getY()),c=new re(t.getWidth()-1,s.getY())),this.image=t,this.topLeft=r,this.bottomLeft=s,this.topRight=a,this.bottomRight=c,this.minX=Math.trunc(Math.min(r.getX(),s.getX())),this.maxX=Math.trunc(Math.max(a.getX(),c.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(s.getY(),c.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new wi(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,s){let a=this.topLeft,c=this.bottomLeft,h=this.topRight,d=this.bottomRight;if(t>0){let g=s?this.topLeft:this.topRight,x=Math.trunc(g.getY()-t);x<0&&(x=0);let w=new re(g.getX(),x);s?a=w:h=w}if(r>0){let g=s?this.bottomLeft:this.bottomRight,x=Math.trunc(g.getY()+r);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let w=new re(g.getX(),x);s?c=w:d=w}return new wi(this.image,a,c,h,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class m0{constructor(t,r,s,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=s,this.rowCount=r+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Wr{constructor(){this.buffer=""}static form(t,r){let s=-1;function a(h,d,g,x,w,C){if(h==="%%")return"%";if(r[++s]===void 0)return;h=x?parseInt(x.substr(1)):void 0;let _=w?parseInt(w.substr(1)):void 0,I;switch(C){case"s":I=r[s];break;case"c":I=r[s][0];break;case"f":I=parseFloat(r[s]).toFixed(h);break;case"p":I=parseFloat(r[s]).toPrecision(h);break;case"e":I=parseFloat(r[s]).toExponential(h);break;case"x":I=parseInt(r[s]).toString(_||16);break;case"d":I=parseFloat(parseInt(r[s],_||10).toPrecision(h)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(_);let D=parseInt(g),R=g&&g[0]+""=="0"?"0":" ";for(;I.length<D;)I=d!==void 0?I+R:R+I;return I}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,a)}format(t,...r){this.buffer+=Wr.form(t,r)}toString(){return this.buffer}}class Yr{constructor(t){this.boundingBox=new wi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let s=1;s<Yr.MAX_NEARBY_DISTANCE;s++){let a=this.imageRowToCodewordIndex(t)-s;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(t)+s,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Wr;let r=0;for(const s of this.codewords){if(s==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,s.getRowNumber(),s.getValue())}return t.toString()}}Yr.MAX_NEARBY_DISTANCE=5;class Xr{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[s,a]of this.values.entries()){const c={getKey:()=>s,getValue:()=>a};c.getValue()>t?(t=c.getValue(),r=[],r.push(c.getKey())):c.getValue()===t&&r.push(c.getKey())}return ge.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class Bc extends Yr{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=-1,x=1,w=0;for(let C=h;C<d;C++){if(r[C]==null)continue;let _=r[C],I=_.getRowNumber()-g;if(I===0)w++;else if(I===1)x=Math.max(x,w),w=1,g=_.getRowNumber();else if(I<0||_.getRowNumber()>=t.getRowCount()||I>C)r[C]=null;else{let D;x>2?D=(x-2)*I:D=I;let R=D>=C;for(let P=1;P<=D&&!R;P++)R=r[C-P]!=null;R?r[C]=null:(g=_.getRowNumber(),w=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let s of this.getCodewords())if(s!=null){let a=s.getRowNumber();if(a>=r.length)continue;r[a]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),s=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.getCodewords(),g=-1;for(let x=c;x<h;x++){if(d[x]==null)continue;let w=d[x];w.setRowNumberAsRowIndicatorColumn();let C=w.getRowNumber()-g;C===0||(C===1?g=w.getRowNumber():w.getRowNumber()>=t.getRowCount()?d[x]=null:g=w.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new Xr,s=new Xr,a=new Xr,c=new Xr;for(let d of t){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let g=d.getValue()%30,x=d.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:s.setValue(g*3+1);break;case 1:c.setValue(g/3),a.setValue(g%3);break;case 2:r.setValue(g+1);break}}if(r.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||r.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<ge.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>ge.MAX_ROWS_IN_BARCODE)return null;let h=new m0(r.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(t,h),h}removeIncorrectCodewords(t,r){for(let s=0;s<t.length;s++){let a=t[s];if(t[s]==null)continue;let c=a.getValue()%30,h=a.getRowNumber();if(h>r.getRowCount()){t[s]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:c*3+1!==r.getRowCountUpperPart()&&(t[s]=null);break;case 1:(Math.trunc(c/3)!==r.getErrorCorrectionLevel()||c%3!==r.getRowCountLowerPart())&&(t[s]=null);break;case 2:c+1!==r.getColumnCount()&&(t[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Gr{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=ge.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let s=this.detectionResultColumns[r].getCodewords();for(let a=0;a<s.length;a++)s[a]!=null&&(s[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,s))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<t.length;s++)if(t[s]!=null&&r[s]!=null&&t[s].getRowNumber()===r[s].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let c=this.detectionResultColumns[a].getCodewords()[s];c!=null&&(c.setRowNumber(t[s].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let a=r[s].getRowNumber(),c=0;for(let h=this.barcodeColumnCount+1;h>0&&c<this.ADJUST_ROW_NUMBER_SKIP;h--){let d=this.detectionResultColumns[h].getCodewords()[s];d!=null&&(c=Gr.adjustRowNumberIfValid(a,c,d),d.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let a=r[s].getRowNumber(),c=0;for(let h=1;h<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;h++){let d=this.detectionResultColumns[h].getCodewords()[s];d!=null&&(c=Gr.adjustRowNumberIfValid(a,c,d),d.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(t)?(s.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,s){if(!this.detectionResultColumns[t-1])return;let a=s[r],c=this.detectionResultColumns[t-1].getCodewords(),h=c;this.detectionResultColumns[t+1]!=null&&(h=this.detectionResultColumns[t+1].getCodewords());let d=new Array(14);d[2]=c[r],d[3]=h[r],r>0&&(d[0]=s[r-1],d[4]=c[r-1],d[5]=h[r-1]),r>1&&(d[8]=s[r-2],d[10]=c[r-2],d[11]=h[r-2]),r<s.length-1&&(d[1]=s[r+1],d[6]=c[r+1],d[7]=h[r+1]),r<s.length-2&&(d[9]=s[r+2],d[12]=c[r+2],d[13]=h[r+2]);for(let g of d)if(Gr.adjustRowNumber(a,g))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Wr;for(let s=0;s<t.getCodewords().length;s++){r.format("CW %3d:",s);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}let c=this.detectionResultColumns[a].getCodewords()[s];if(c==null){r.format("    |   ");continue}r.format(" %3d|%3d",c.getRowNumber(),c.getValue())}r.format("%n")}return r.toString()}}class $r{constructor(t,r,s,a){this.rowNumber=$r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(s),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==$r.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}$r.BARCODE_ROW_UNKNOWN=-1;class Ot{static initialize(){for(let t=0;t<ge.SYMBOL_TABLE.length;t++){let r=ge.SYMBOL_TABLE[t],s=r&1;for(let a=0;a<ge.BARS_IN_MODULE;a++){let c=0;for(;(r&1)===s;)c+=1,r>>=1;s=r&1,Ot.RATIOS_TABLE[t]||(Ot.RATIOS_TABLE[t]=new Array(ge.BARS_IN_MODULE)),Ot.RATIOS_TABLE[t][ge.BARS_IN_MODULE-a-1]=Math.fround(c/ge.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=Ot.getDecodedCodewordValue(Ot.sampleBitCounts(t));return r!==-1?r:Ot.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=ye.sum(t),s=new Int32Array(ge.BARS_IN_MODULE),a=0,c=0;for(let h=0;h<ge.MODULES_IN_CODEWORD;h++){let d=r/(2*ge.MODULES_IN_CODEWORD)+h*r/ge.MODULES_IN_CODEWORD;c+t[a]<=d&&(c+=t[a],a++),s[a]++}return s}static getDecodedCodewordValue(t){let r=Ot.getBitValue(t);return ge.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let s=0;s<t.length;s++)for(let a=0;a<t[s];a++)r=r<<1|(s%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=ye.sum(t),s=new Array(ge.BARS_IN_MODULE);if(r>1)for(let h=0;h<s.length;h++)s[h]=Math.fround(t[h]/r);let a=Kt.MAX_VALUE,c=-1;this.bSymbolTableReady||Ot.initialize();for(let h=0;h<Ot.RATIOS_TABLE.length;h++){let d=0,g=Ot.RATIOS_TABLE[h];for(let x=0;x<ge.BARS_IN_MODULE;x++){let w=Math.fround(g[x]-s[x]);if(d+=Math.fround(w*w),d>=a)break}d<a&&(a=d,c=ge.SYMBOL_TABLE[h])}return c}}Ot.bSymbolTableReady=!1,Ot.RATIOS_TABLE=new Array(ge.SYMBOL_TABLE.length).map(A=>new Array(ge.BARS_IN_MODULE));class kc{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Fc{static parseLong(t,r=void 0){return parseInt(t,r)}}class Uc extends m{}Uc.kind="NullPointerException";class x0{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,s){if(t==null)throw new Uc;if(r<0||r>t.length||s<0||r+s>t.length||r+s<0)throw new O;if(s===0)return;for(let a=0;a<s;a++)this.write(t[r+a])}flush(){}close(){}}class E0 extends m{}class b0 extends x0{constructor(t=32){if(super(),this.count=0,t<0)throw new y("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let s=this.buf.length<<1;if(s-t<0&&(s=t),s<0){if(t<0)throw new E0;s=F.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,s)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,s){if(r<0||r>t.length||s<0||r+s-t.length>0)throw new O;this.ensureCapacity(this.count+s),M.arraycopy(t,r,this.buf,this.count,s),this.count+=s}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Be;(function(A){A[A.ALPHA=0]="ALPHA",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.PUNCT=3]="PUNCT",A[A.ALPHA_SHIFT=4]="ALPHA_SHIFT",A[A.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Be||(Be={}));function zc(){if(typeof window<"u")return window.BigInt||null;if(typeof Vs<"u")return Vs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ms;function Jn(A){if(typeof Ms>"u"&&(Ms=zc()),Ms===null)throw new Error("BigInt is not supported!");return Ms(A)}function w0(){let A=[];A[0]=Jn(1);let t=Jn(900);A[1]=t;for(let r=2;r<16;r++)A[r]=A[r-1]*t;return A}class U{static decode(t,r){let s=new oe(""),a=Y.ISO8859_1;s.enableDecoding(a);let c=1,h=t[c++],d=new kc;for(;c<t[0];){switch(h){case U.TEXT_COMPACTION_MODE_LATCH:c=U.textCompaction(t,c,s);break;case U.BYTE_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:c=U.byteCompaction(h,t,a,c,s);break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[c++]);break;case U.NUMERIC_COMPACTION_MODE_LATCH:c=U.numericCompaction(t,c,s);break;case U.ECI_CHARSET:Y.getCharacterSetECIByValue(t[c++]);break;case U.ECI_GENERAL_PURPOSE:c+=2;break;case U.ECI_USER_DEFINED:c++;break;case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=U.decodeMacroBlock(t,c,d);break;case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:throw new j;default:c--,c=U.textCompaction(t,c,s);break}if(c<t.length)h=t[c++];else throw j.getFormatInstance()}if(s.length()===0)throw j.getFormatInstance();let g=new Pn(null,s.toString(),null,r);return g.setOther(d),g}static decodeMacroBlock(t,r,s){if(r+U.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw j.getFormatInstance();let a=new Int32Array(U.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<U.NUMBER_OF_SEQUENCE_CODEWORDS;d++,r++)a[d]=t[r];s.setSegmentIndex(F.parseInt(U.decodeBase900toBase10(a,U.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new oe;r=U.textCompaction(t,r,c),s.setFileId(c.toString());let h=-1;for(t[r]===U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=r+1);r<t[0];)switch(t[r]){case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case U.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new oe;r=U.textCompaction(t,r+1,d),s.setFileName(d.toString());break;case U.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new oe;r=U.textCompaction(t,r+1,g),s.setSender(g.toString());break;case U.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new oe;r=U.textCompaction(t,r+1,x),s.setAddressee(x.toString());break;case U.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new oe;r=U.numericCompaction(t,r+1,w),s.setSegmentCount(F.parseInt(w.toString()));break;case U.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let C=new oe;r=U.numericCompaction(t,r+1,C),s.setTimestamp(Fc.parseLong(C.toString()));break;case U.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let _=new oe;r=U.numericCompaction(t,r+1,_),s.setChecksum(F.parseInt(_.toString()));break;case U.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let I=new oe;r=U.numericCompaction(t,r+1,I),s.setFileSize(Fc.parseLong(I.toString()));break;default:throw j.getFormatInstance()}break;case U.MACRO_PDF417_TERMINATOR:r++,s.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(h!==-1){let d=r-h;s.isLastSegment()&&d--,s.setOptionalData(k.copyOfRange(t,h,h+d))}return r}static textCompaction(t,r,s){let a=new Int32Array((t[0]-r)*2),c=new Int32Array((t[0]-r)*2),h=0,d=!1;for(;r<t[0]&&!d;){let g=t[r++];if(g<U.TEXT_COMPACTION_MODE_LATCH)a[h]=g/30,a[h+1]=g%30,h+=2;else switch(g){case U.TEXT_COMPACTION_MODE_LATCH:a[h++]=U.TEXT_COMPACTION_MODE_LATCH;break;case U.BYTE_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:case U.NUMERIC_COMPACTION_MODE_LATCH:case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:r--,d=!0;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[h]=U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=t[r++],c[h]=g,h++;break}}return U.decodeTextCompaction(a,c,h,s),r}static decodeTextCompaction(t,r,s,a){let c=Be.ALPHA,h=Be.ALPHA,d=0;for(;d<s;){let g=t[d],x="";switch(c){case Be.ALPHA:if(g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case U.LL:c=Be.LOWER;break;case U.ML:c=Be.MIXED;break;case U.PS:h=c,c=Be.PUNCT_SHIFT;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case U.TEXT_COMPACTION_MODE_LATCH:c=Be.ALPHA;break}break;case Be.LOWER:if(g<26)x=String.fromCharCode(97+g);else switch(g){case 26:x=" ";break;case U.AS:h=c,c=Be.ALPHA_SHIFT;break;case U.ML:c=Be.MIXED;break;case U.PS:h=c,c=Be.PUNCT_SHIFT;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case U.TEXT_COMPACTION_MODE_LATCH:c=Be.ALPHA;break}break;case Be.MIXED:if(g<U.PL)x=U.MIXED_CHARS[g];else switch(g){case U.PL:c=Be.PUNCT;break;case 26:x=" ";break;case U.LL:c=Be.LOWER;break;case U.AL:c=Be.ALPHA;break;case U.PS:h=c,c=Be.PUNCT_SHIFT;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case U.TEXT_COMPACTION_MODE_LATCH:c=Be.ALPHA;break}break;case Be.PUNCT:if(g<U.PAL)x=U.PUNCT_CHARS[g];else switch(g){case U.PAL:c=Be.ALPHA;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case U.TEXT_COMPACTION_MODE_LATCH:c=Be.ALPHA;break}break;case Be.ALPHA_SHIFT:if(c=h,g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case U.TEXT_COMPACTION_MODE_LATCH:c=Be.ALPHA;break}break;case Be.PUNCT_SHIFT:if(c=h,g<U.PAL)x=U.PUNCT_CHARS[g];else switch(g){case U.PAL:c=Be.ALPHA;break;case U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case U.TEXT_COMPACTION_MODE_LATCH:c=Be.ALPHA;break}break}x!==""&&a.append(x),d++}}static byteCompaction(t,r,s,a,c){let h=new b0,d=0,g=0,x=!1;switch(t){case U.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),C=r[a++];for(;a<r[0]&&!x;)switch(w[d++]=C,g=900*g+C,C=r[a++],C){case U.TEXT_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH:case U.NUMERIC_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:a--,x=!0;break;default:if(d%5===0&&d>0){for(let _=0;_<6;++_)h.write(Number(Jn(g)>>Jn(8*(5-_))));g=0,d=0}break}a===r[0]&&C<U.TEXT_COMPACTION_MODE_LATCH&&(w[d++]=C);for(let _=0;_<d;_++)h.write(w[_]);break;case U.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!x;){let _=r[a++];if(_<U.TEXT_COMPACTION_MODE_LATCH)d++,g=900*g+_;else switch(_){case U.TEXT_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH:case U.NUMERIC_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:a--,x=!0;break}if(d%5===0&&d>0){for(let I=0;I<6;++I)h.write(Number(Jn(g)>>Jn(8*(5-I))));g=0,d=0}}break}return c.append(Ce.decode(h.toByteArray(),s)),a}static numericCompaction(t,r,s){let a=0,c=!1,h=new Int32Array(U.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!c;){let d=t[r++];if(r===t[0]&&(c=!0),d<U.TEXT_COMPACTION_MODE_LATCH)h[a]=d,a++;else switch(d){case U.TEXT_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH:case U.BYTE_COMPACTION_MODE_LATCH_6:case U.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case U.MACRO_PDF417_TERMINATOR:r--,c=!0;break}(a%U.MAX_NUMERIC_CODEWORDS===0||d===U.NUMERIC_COMPACTION_MODE_LATCH||c)&&a>0&&(s.append(U.decodeBase900toBase10(h,a)),a=0)}return r}static decodeBase900toBase10(t,r){let s=Jn(0);for(let c=0;c<r;c++)s+=U.EXP900[r-c-1]*Jn(t[c]);let a=s.toString();if(a.charAt(0)!=="1")throw new j;return a.substring(1)}}U.TEXT_COMPACTION_MODE_LATCH=900,U.BYTE_COMPACTION_MODE_LATCH=901,U.NUMERIC_COMPACTION_MODE_LATCH=902,U.BYTE_COMPACTION_MODE_LATCH_6=924,U.ECI_USER_DEFINED=925,U.ECI_GENERAL_PURPOSE=926,U.ECI_CHARSET=927,U.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,U.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,U.MACRO_PDF417_TERMINATOR=922,U.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,U.MAX_NUMERIC_CODEWORDS=15,U.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,U.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,U.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,U.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,U.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,U.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,U.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,U.PL=25,U.LL=27,U.AS=27,U.ML=28,U.AL=28,U.PS=29,U.PAL=29,U.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,U.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",U.EXP900=zc()?w0():[],U.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ee{constructor(){}static decode(t,r,s,a,c,h,d){let g=new wi(t,r,s,a,c),x=null,w=null,C;for(let D=!0;;D=!1){if(r!=null&&(x=Ee.getRowIndicatorColumn(t,g,r,!0,h,d)),a!=null&&(w=Ee.getRowIndicatorColumn(t,g,a,!1,h,d)),C=Ee.merge(x,w),C==null)throw H.getNotFoundInstance();let R=C.getBoundingBox();if(D&&R!=null&&(R.getMinY()<g.getMinY()||R.getMaxY()>g.getMaxY()))g=R;else break}C.setBoundingBox(g);let _=C.getBarcodeColumnCount()+1;C.setDetectionResultColumn(0,x),C.setDetectionResultColumn(_,w);let I=x!=null;for(let D=1;D<=_;D++){let R=I?D:_-D;if(C.getDetectionResultColumn(R)!==void 0)continue;let P;R===0||R===_?P=new Bc(g,R===0):P=new Yr(g),C.setDetectionResultColumn(R,P);let z=-1,q=z;for(let K=g.getMinY();K<=g.getMaxY();K++){if(z=Ee.getStartColumn(C,R,K,I),z<0||z>g.getMaxX()){if(q===-1)continue;z=q}let $=Ee.detectCodeword(t,g.getMinX(),g.getMaxX(),I,z,K,h,d);$!=null&&(P.setCodeword(K,$),q=z,h=Math.min(h,$.getWidth()),d=Math.max(d,$.getWidth()))}}return Ee.createDecoderResult(C)}static merge(t,r){if(t==null&&r==null)return null;let s=Ee.getBarcodeMetadata(t,r);if(s==null)return null;let a=wi.merge(Ee.adjustBoundingBox(t),Ee.adjustBoundingBox(r));return new Gr(s,a)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let s=Ee.getMax(r),a=0;for(let d of r)if(a+=s-d,d>0)break;let c=t.getCodewords();for(let d=0;a>0&&c[d]==null;d++)a--;let h=0;for(let d=r.length-1;d>=0&&(h+=s-r[d],!(r[d]>0));d--);for(let d=c.length-1;h>0&&c[d]==null;d--)h--;return t.getBoundingBox().addMissingRows(a,h,t.isLeft())}static getMax(t){let r=-1;for(let s of t)r=Math.max(r,s);return r}static getBarcodeMetadata(t,r){let s;if(t==null||(s=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let a;return r==null||(a=r.getBarcodeMetadata())==null?s:s.getColumnCount()!==a.getColumnCount()&&s.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&s.getRowCount()!==a.getRowCount()?null:s}static getRowIndicatorColumn(t,r,s,a,c,h){let d=new Bc(r,a);for(let g=0;g<2;g++){let x=g===0?1:-1,w=Math.trunc(Math.trunc(s.getX()));for(let C=Math.trunc(Math.trunc(s.getY()));C<=r.getMaxY()&&C>=r.getMinY();C+=x){let _=Ee.detectCodeword(t,0,t.getWidth(),a,w,C,c,h);_!=null&&(d.setCodeword(C,_),a?w=_.getStartX():w=_.getEndX())}}return d}static adjustCodewordCount(t,r){let s=r[0][1],a=s.getValue(),c=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Ee.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(c<1||c>ge.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();s.setValue(c)}else a[0]!==c&&s.setValue(c)}static createDecoderResult(t){let r=Ee.createBarcodeMatrix(t);Ee.adjustCodewordCount(t,r);let s=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),c=[],h=new Array;for(let g=0;g<t.getBarcodeRowCount();g++)for(let x=0;x<t.getBarcodeColumnCount();x++){let w=r[g][x+1].getValue(),C=g*t.getBarcodeColumnCount()+x;w.length===0?s.push(C):w.length===1?a[C]=w[0]:(h.push(C),c.push(w))}let d=new Array(c.length);for(let g=0;g<d.length;g++)d[g]=c[g];return Ee.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,ge.toIntArray(s),ge.toIntArray(h),d)}static createDecoderResultFromAmbiguousValues(t,r,s,a,c){let h=new Int32Array(a.length),d=100;for(;d-- >0;){for(let g=0;g<h.length;g++)r[a[g]]=c[g][h[g]];try{return Ee.decodeCodewords(r,t,s)}catch(g){if(!(g instanceof v))throw g}if(h.length===0)throw v.getChecksumInstance();for(let g=0;g<h.length;g++)if(h[g]<c[g].length-1){h[g]++;break}else if(h[g]=0,g===h.length-1)throw v.getChecksumInstance()}throw v.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let a=0;a<r.length;a++)for(let c=0;c<r[a].length;c++)r[a][c]=new Xr;let s=0;for(let a of t.getDetectionResultColumns()){if(a!=null){for(let c of a.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=0){if(h>=r.length)continue;r[h][s].setValue(c.getValue())}}}s++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,s,a){let c=a?1:-1,h=null;if(Ee.isValidBarcodeColumn(t,r-c)&&(h=t.getDetectionResultColumn(r-c).getCodeword(s)),h!=null)return a?h.getEndX():h.getStartX();if(h=t.getDetectionResultColumn(r).getCodewordNearby(s),h!=null)return a?h.getStartX():h.getEndX();if(Ee.isValidBarcodeColumn(t,r-c)&&(h=t.getDetectionResultColumn(r-c).getCodewordNearby(s)),h!=null)return a?h.getEndX():h.getStartX();let d=0;for(;Ee.isValidBarcodeColumn(t,r-c);){r-=c;for(let g of t.getDetectionResultColumn(r).getCodewords())if(g!=null)return(a?g.getEndX():g.getStartX())+c*d*(g.getEndX()-g.getStartX());d++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,s,a,c,h,d,g){c=Ee.adjustCodewordStartColumn(t,r,s,a,c,h);let x=Ee.getModuleBitCount(t,r,s,a,c,h);if(x==null)return null;let w,C=ye.sum(x);if(a)w=c+C;else{for(let D=0;D<x.length/2;D++){let R=x[D];x[D]=x[x.length-1-D],x[x.length-1-D]=R}w=c,c=w-C}if(!Ee.checkCodewordSkew(C,d,g))return null;let _=Ot.getDecodedValue(x),I=ge.getCodeword(_);return I===-1?null:new $r(c,w,Ee.getCodewordBucketNumber(_),I)}static getModuleBitCount(t,r,s,a,c,h){let d=c,g=new Int32Array(8),x=0,w=a?1:-1,C=a;for(;(a?d<s:d>=r)&&x<g.length;)t.get(d,h)===C?(g[x]++,d+=w):(x++,C=!C);return x===g.length||d===(a?s:r)&&x===g.length-1?g:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,s,a,c,h){let d=c,g=a?-1:1;for(let x=0;x<2;x++){for(;(a?d>=r:d<s)&&a===t.get(d,h);){if(Math.abs(c-d)>Ee.CODEWORD_SKEW_SIZE)return c;d+=g}g=-g,a=!a}return d}static checkCodewordSkew(t,r,s){return r-Ee.CODEWORD_SKEW_SIZE<=t&&t<=s+Ee.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,s){if(t.length===0)throw j.getFormatInstance();let a=1<<r+1,c=Ee.correctErrors(t,s,a);Ee.verifyCodewordCount(t,a);let h=U.decode(t,""+r);return h.setErrorsCorrected(c),h.setErasures(s.length),h}static correctErrors(t,r,s){if(r!=null&&r.length>s/2+Ee.MAX_ERRORS||s<0||s>Ee.MAX_EC_CODEWORDS)throw v.getChecksumInstance();return Ee.errorCorrection.decode(t,s,r)}static verifyCodewordCount(t,r){if(t.length<4)throw j.getFormatInstance();let s=t[0];if(s>t.length)throw j.getFormatInstance();if(s===0)if(r<t.length)t[0]=t.length-r;else throw j.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),s=0,a=r.length-1;for(;!((t&1)!==s&&(s=t&1,a--,a<0));)r[a]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Ee.getCodewordBucketNumber(Ee.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new Wr;for(let s=0;s<t.length;s++){r.format("Row %2d: ",s);for(let a=0;a<t[s].length;a++){let c=t[s][a];c.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}r.format("%n")}return r.toString()}}Ee.CODEWORD_SKEW_SIZE=2,Ee.MAX_ERRORS=3,Ee.MAX_EC_CODEWORDS=512,Ee.errorCorrection=new Pc;class pt{decode(t,r=null){let s=pt.decode(t,r,!1);if(s==null||s.length===0||s[0]==null)throw H.getNotFoundInstance();return s[0]}decodeMultiple(t,r=null){try{return pt.decode(t,r,!0)}catch(s){throw s instanceof j||s instanceof v?H.getNotFoundInstance():s}}static decode(t,r,s){const a=new Array,c=xe.detectMultiple(t,r,s);for(const h of c.getPoints()){const d=Ee.decode(c.getBits(),h[4],h[5],h[6],h[7],pt.getMinCodewordWidth(h),pt.getMaxCodewordWidth(h)),g=new $e(d.getText(),d.getRawBytes(),void 0,h,le.PDF_417);g.putMetadata(ze.ERROR_CORRECTION_LEVEL,d.getECLevel());const x=d.getOther();x!=null&&g.putMetadata(ze.PDF417_EXTRA_METADATA,x),a.push(g)}return a.map(h=>h)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?F.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(pt.getMaxWidth(t[0],t[4]),pt.getMaxWidth(t[6],t[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.max(pt.getMaxWidth(t[1],t[5]),pt.getMaxWidth(t[7],t[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(pt.getMinWidth(t[0],t[4]),pt.getMinWidth(t[6],t[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.min(pt.getMinWidth(t[1],t[5]),pt.getMinWidth(t[7],t[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ds extends m{}Ds.kind="ReaderException";class jc{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!o(t)&&t.get(Z.TRY_HARDER)===!0,s=o(t)?null:t.get(Z.POSSIBLE_FORMATS),a=new Array;if(!o(s)){const c=s.some(h=>h===le.UPC_A||h===le.UPC_E||h===le.EAN_13||h===le.EAN_8||h===le.CODABAR||h===le.CODE_39||h===le.CODE_93||h===le.CODE_128||h===le.ITF||h===le.RSS_14||h===le.RSS_EXPANDED);c&&!r&&a.push(new er(t,this.verbose)),s.includes(le.QR_CODE)&&a.push(new Qn),s.includes(le.DATA_MATRIX)&&a.push(new Zn),s.includes(le.AZTEC)&&a.push(new Ss),s.includes(le.PDF_417)&&a.push(new pt),c&&r&&a.push(new er(t,this.verbose))}a.length===0&&(r||a.push(new er(t,this.verbose)),a.push(new Qn),a.push(new Zn),a.push(new Ss),a.push(new pt),r&&a.push(new er(t,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new Ds("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(s){if(s instanceof Ds)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class y0 extends Gt{constructor(t=null,r=500){const s=new jc;s.setHints(t),super(s,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class A0 extends Gt{constructor(t=500){super(new pt,t)}}class C0 extends Gt{constructor(t=500){super(new Qn,t)}}var ua;(function(A){A[A.ERROR_CORRECTION=0]="ERROR_CORRECTION",A[A.CHARACTER_SET=1]="CHARACTER_SET",A[A.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",A[A.MIN_SIZE=3]="MIN_SIZE",A[A.MAX_SIZE=4]="MAX_SIZE",A[A.MARGIN=5]="MARGIN",A[A.PDF417_COMPACT=6]="PDF417_COMPACT",A[A.PDF417_COMPACTION=7]="PDF417_COMPACTION",A[A.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",A[A.AZTEC_LAYERS=9]="AZTEC_LAYERS",A[A.QR_VERSION=10]="QR_VERSION"})(ua||(ua={}));var ct=ua;class ha{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new ut(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let s=r[r.length-1];const a=this.field;for(let c=r.length;c<=t;c++){const h=s.multiply(new ut(a,Int32Array.from([1,a.exp(c-1+a.getGeneratorBase())])));r.push(h),s=h}}return r[t]}encode(t,r){if(r===0)throw new y("No error correction bytes");const s=t.length-r;if(s<=0)throw new y("No data bytes provided");const a=this.buildGenerator(r),c=new Int32Array(s);M.arraycopy(t,0,c,0,s);let h=new ut(this.field,c);h=h.multiplyByMonomial(r,1);const g=h.divide(a)[1].getCoefficients(),x=r-g.length;for(let w=0;w<x;w++)t[s+w]=0;M.arraycopy(g,0,t,s+x,g.length)}}class Ze{constructor(){}static applyMaskPenaltyRule1(t){return Ze.applyMaskPenaltyRule1Internal(t,!0)+Ze.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const s=t.getArray(),a=t.getWidth(),c=t.getHeight();for(let h=0;h<c-1;h++){const d=s[h];for(let g=0;g<a-1;g++){const x=d[g];x===d[g+1]&&x===s[h+1][g]&&x===s[h+1][g+1]&&r++}}return Ze.N2*r}static applyMaskPenaltyRule3(t){let r=0;const s=t.getArray(),a=t.getWidth(),c=t.getHeight();for(let h=0;h<c;h++)for(let d=0;d<a;d++){const g=s[h];d+6<a&&g[d]===1&&g[d+1]===0&&g[d+2]===1&&g[d+3]===1&&g[d+4]===1&&g[d+5]===0&&g[d+6]===1&&(Ze.isWhiteHorizontal(g,d-4,d)||Ze.isWhiteHorizontal(g,d+7,d+11))&&r++,h+6<c&&s[h][d]===1&&s[h+1][d]===0&&s[h+2][d]===1&&s[h+3][d]===1&&s[h+4][d]===1&&s[h+5][d]===0&&s[h+6][d]===1&&(Ze.isWhiteVertical(s,d,h-4,h)||Ze.isWhiteVertical(s,d,h+7,h+11))&&r++}return r*Ze.N3}static isWhiteHorizontal(t,r,s){r=Math.max(r,0),s=Math.min(s,t.length);for(let a=r;a<s;a++)if(t[a]===1)return!1;return!0}static isWhiteVertical(t,r,s,a){s=Math.max(s,0),a=Math.min(a,t.length);for(let c=s;c<a;c++)if(t[c][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const s=t.getArray(),a=t.getWidth(),c=t.getHeight();for(let g=0;g<c;g++){const x=s[g];for(let w=0;w<a;w++)x[w]===1&&r++}const h=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-h)*10/h)*Ze.N4}static getDataMaskBit(t,r,s){let a,c;switch(t){case 0:a=s+r&1;break;case 1:a=s&1;break;case 2:a=r%3;break;case 3:a=(s+r)%3;break;case 4:a=Math.floor(s/2)+Math.floor(r/3)&1;break;case 5:c=s*r,a=(c&1)+c%3;break;case 6:c=s*r,a=(c&1)+c%3&1;break;case 7:c=s*r,a=c%3+(s+r&1)&1;break;default:throw new y("Invalid mask pattern: "+t)}return a===0}static applyMaskPenaltyRule1Internal(t,r){let s=0;const a=r?t.getHeight():t.getWidth(),c=r?t.getWidth():t.getHeight(),h=t.getArray();for(let d=0;d<a;d++){let g=0,x=-1;for(let w=0;w<c;w++){const C=r?h[d][w]:h[w][d];C===x?g++:(g>=5&&(s+=Ze.N1+(g-5)),g=1,x=C)}g>=5&&(s+=Ze.N1+(g-5))}return s}}Ze.N1=3,Ze.N2=3,Ze.N3=40,Ze.N4=10;class Rs{constructor(t,r){this.width=t,this.height=r;const s=new Array(r);for(let a=0;a!==r;a++)s[a]=new Uint8Array(t);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,s){this.bytes[r][t]=s}setBoolean(t,r,s){this.bytes[r][t]=s?1:0}clear(t){for(const r of this.bytes)k.fill(r,t)}equals(t){if(!(t instanceof Rs))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s],h=r.bytes[s];for(let d=0,g=this.width;d<g;++d)if(c[d]!==h[d])return!1}return!0}toString(){const t=new oe;for(let r=0,s=this.height;r<s;++r){const a=this.bytes[r];for(let c=0,h=this.width;c<h;++c)switch(a[c]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class yi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new oe;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<yi.NUM_MASK_PATTERNS}}yi.NUM_MASK_PATTERNS=8;class Fe extends m{}Fe.kind="WriterException";class de{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,s,a,c){de.clearMatrix(c),de.embedBasicPatterns(s,c),de.embedTypeInfo(r,a,c),de.maybeEmbedVersionInfo(s,c),de.embedDataBits(t,a,c)}static embedBasicPatterns(t,r){de.embedPositionDetectionPatternsAndSeparators(r),de.embedDarkDotAtLeftBottomCorner(r),de.maybeEmbedPositionAdjustmentPatterns(t,r),de.embedTimingPatterns(r)}static embedTypeInfo(t,r,s){const a=new W;de.makeTypeInfoBits(t,r,a);for(let c=0,h=a.getSize();c<h;++c){const d=a.get(a.getSize()-1-c),g=de.TYPE_INFO_COORDINATES[c],x=g[0],w=g[1];if(s.setBoolean(x,w,d),c<8){const C=s.getWidth()-c-1;s.setBoolean(C,8,d)}else{const _=s.getHeight()-7+(c-8);s.setBoolean(8,_,d)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const s=new W;de.makeVersionInfoBits(t,s);let a=6*3-1;for(let c=0;c<6;++c)for(let h=0;h<3;++h){const d=s.get(a);a--,r.setBoolean(c,r.getHeight()-11+h,d),r.setBoolean(r.getHeight()-11+h,c,d)}}static embedDataBits(t,r,s){let a=0,c=-1,h=s.getWidth()-1,d=s.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);d>=0&&d<s.getHeight();){for(let g=0;g<2;++g){const x=h-g;if(!de.isEmpty(s.get(x,d)))continue;let w;a<t.getSize()?(w=t.get(a),++a):w=!1,r!==255&&Ze.getDataMaskBit(r,x,d)&&(w=!w),s.setBoolean(x,d,w)}d+=c}c=-c,d+=c,h-=2}if(a!==t.getSize())throw new Fe("Not all bits consumed: "+a+"/"+t.getSize())}static findMSBSet(t){return 32-F.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new y("0 polynomial");const s=de.findMSBSet(r);for(t<<=s-1;de.findMSBSet(t)>=s;)t^=r<<de.findMSBSet(t)-s;return t}static makeTypeInfoBits(t,r,s){if(!yi.isValidMaskPattern(r))throw new Fe("Invalid mask pattern");const a=t.getBits()<<3|r;s.appendBits(a,5);const c=de.calculateBCHCode(a,de.TYPE_INFO_POLY);s.appendBits(c,10);const h=new W;if(h.appendBits(de.TYPE_INFO_MASK_PATTERN,15),s.xor(h),s.getSize()!==15)throw new Fe("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const s=de.calculateBCHCode(t.getVersionNumber(),de.VERSION_INFO_POLY);if(r.appendBits(s,12),r.getSize()!==18)throw new Fe("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const s=(r+1)%2;de.isEmpty(t.get(r,6))&&t.setNumber(r,6,s),de.isEmpty(t.get(6,r))&&t.setNumber(6,r,s)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Fe;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,s){for(let a=0;a<8;++a){if(!de.isEmpty(s.get(t+a,r)))throw new Fe;s.setNumber(t+a,r,0)}}static embedVerticalSeparationPattern(t,r,s){for(let a=0;a<7;++a){if(!de.isEmpty(s.get(t,r+a)))throw new Fe;s.setNumber(t,r+a,0)}}static embedPositionAdjustmentPattern(t,r,s){for(let a=0;a<5;++a){const c=de.POSITION_ADJUSTMENT_PATTERN[a];for(let h=0;h<5;++h)s.setNumber(t+h,r+a,c[h])}}static embedPositionDetectionPattern(t,r,s){for(let a=0;a<7;++a){const c=de.POSITION_DETECTION_PATTERN[a];for(let h=0;h<7;++h)s.setNumber(t+h,r+a,c[h])}}static embedPositionDetectionPatternsAndSeparators(t){const r=de.POSITION_DETECTION_PATTERN[0].length;de.embedPositionDetectionPattern(0,0,t),de.embedPositionDetectionPattern(t.getWidth()-r,0,t),de.embedPositionDetectionPattern(0,t.getWidth()-r,t);const s=8;de.embedHorizontalSeparationPattern(0,s-1,t),de.embedHorizontalSeparationPattern(t.getWidth()-s,s-1,t),de.embedHorizontalSeparationPattern(0,t.getWidth()-s,t);const a=7;de.embedVerticalSeparationPattern(a,0,t),de.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),de.embedVerticalSeparationPattern(a,t.getHeight()-a,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const s=t.getVersionNumber()-1,a=de.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let c=0,h=a.length;c!==h;c++){const d=a[c];if(d>=0)for(let g=0;g!==h;g++){const x=a[g];x>=0&&de.isEmpty(r.get(x,d))&&de.embedPositionAdjustmentPattern(x-2,d-2,r)}}}}de.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),de.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),de.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),de.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),de.VERSION_INFO_POLY=7973,de.TYPE_INFO_POLY=1335,de.TYPE_INFO_MASK_PATTERN=21522;class _0{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class He{constructor(){}static calculateMaskPenalty(t){return Ze.applyMaskPenaltyRule1(t)+Ze.applyMaskPenaltyRule2(t)+Ze.applyMaskPenaltyRule3(t)+Ze.applyMaskPenaltyRule4(t)}static encode(t,r,s=null){let a=He.DEFAULT_BYTE_MODE_ENCODING;const c=s!==null&&s.get(ct.CHARACTER_SET)!==void 0;c&&(a=s.get(ct.CHARACTER_SET).toString());const h=this.chooseMode(t,a),d=new W;if(h===he.BYTE&&(c||He.DEFAULT_BYTE_MODE_ENCODING!==a)){const K=Y.getCharacterSetECIByName(a);K!==void 0&&this.appendECI(K,d)}this.appendModeInfo(h,d);const g=new W;this.appendBytes(t,h,g,a);let x;if(s!==null&&s.get(ct.QR_VERSION)!==void 0){const K=Number.parseInt(s.get(ct.QR_VERSION).toString(),10);x=ce.getVersionForNumber(K);const $=this.calculateBitsNeeded(h,d,g,x);if(!this.willFit($,x,r))throw new Fe("Data too big for requested version")}else x=this.recommendVersion(r,h,d,g);const w=new W;w.appendBitArray(d);const C=h===he.BYTE?g.getSizeInBytes():t.length;this.appendLengthInfo(C,x,h,w),w.appendBitArray(g);const _=x.getECBlocksForLevel(r),I=x.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(I,w);const D=this.interleaveWithECBytes(w,x.getTotalCodewords(),I,_.getNumBlocks()),R=new yi;R.setECLevel(r),R.setMode(h),R.setVersion(x);const P=x.getDimensionForVersion(),z=new Rs(P,P),q=this.chooseMaskPattern(D,r,x,z);return R.setMaskPattern(q),de.buildMatrix(D,r,x,q,z),R.setMatrix(z),R}static recommendVersion(t,r,s,a){const c=this.calculateBitsNeeded(r,s,a,ce.getVersionForNumber(1)),h=this.chooseVersion(c,t),d=this.calculateBitsNeeded(r,s,a,h);return this.chooseVersion(d,t)}static calculateBitsNeeded(t,r,s,a){return r.getSize()+t.getCharacterCountBits(a)+s.getSize()}static getAlphanumericCode(t){return t<He.ALPHANUMERIC_TABLE.length?He.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(Y.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return he.KANJI;let s=!1,a=!1;for(let c=0,h=t.length;c<h;++c){const d=t.charAt(c);if(He.isDigit(d))s=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)a=!0;else return he.BYTE}return a?he.ALPHANUMERIC:s?he.NUMERIC:he.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=Ce.encode(t,Y.SJIS)}catch{return!1}const s=r.length;if(s%2!==0)return!1;for(let a=0;a<s;a+=2){const c=r[a]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(t,r,s,a){let c=Number.MAX_SAFE_INTEGER,h=-1;for(let d=0;d<yi.NUM_MASK_PATTERNS;d++){de.buildMatrix(t,r,s,d,a);let g=this.calculateMaskPenalty(a);g<c&&(c=g,h=d)}return h}static chooseVersion(t,r){for(let s=1;s<=40;s++){const a=ce.getVersionForNumber(s);if(He.willFit(t,a,r))return a}throw new Fe("Data too big")}static willFit(t,r,s){const a=r.getTotalCodewords(),h=r.getECBlocksForLevel(s).getTotalECCodewords(),d=a-h,g=(t+7)/8;return d>=g}static terminateBits(t,r){const s=t*8;if(r.getSize()>s)throw new Fe("data bits cannot fit in the QR Code"+r.getSize()+" > "+s);for(let h=0;h<4&&r.getSize()<s;++h)r.appendBit(!1);const a=r.getSize()&7;if(a>0)for(let h=a;h<8;h++)r.appendBit(!1);const c=t-r.getSizeInBytes();for(let h=0;h<c;++h)r.appendBits((h&1)===0?236:17,8);if(r.getSize()!==s)throw new Fe("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,s,a,c,h){if(a>=s)throw new Fe("Block ID too large");const d=t%s,g=s-d,x=Math.floor(t/s),w=x+1,C=Math.floor(r/s),_=C+1,I=x-C,D=w-_;if(I!==D)throw new Fe("EC bytes mismatch");if(s!==g+d)throw new Fe("RS blocks mismatch");if(t!==(C+I)*g+(_+D)*d)throw new Fe("Total bytes mismatch");a<g?(c[0]=C,h[0]=I):(c[0]=_,h[0]=D)}static interleaveWithECBytes(t,r,s,a){if(t.getSizeInBytes()!==s)throw new Fe("Number of bits and data bytes does not match");let c=0,h=0,d=0;const g=new Array;for(let w=0;w<a;++w){const C=new Int32Array(1),_=new Int32Array(1);He.getNumDataBytesAndNumECBytesForBlockID(r,s,a,w,C,_);const I=C[0],D=new Uint8Array(I);t.toBytes(8*c,D,0,I);const R=He.generateECBytes(D,_[0]);g.push(new _0(D,R)),h=Math.max(h,I),d=Math.max(d,R.length),c+=C[0]}if(s!==c)throw new Fe("Data bytes does not match offset");const x=new W;for(let w=0;w<h;++w)for(const C of g){const _=C.getDataBytes();w<_.length&&x.appendBits(_[w],8)}for(let w=0;w<d;++w)for(const C of g){const _=C.getErrorCorrectionBytes();w<_.length&&x.appendBits(_[w],8)}if(r!==x.getSizeInBytes())throw new Fe("Interleaving error: "+r+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(t,r){const s=t.length,a=new Int32Array(s+r);for(let h=0;h<s;h++)a[h]=t[h]&255;new ha(ve.QR_CODE_FIELD_256).encode(a,r);const c=new Uint8Array(r);for(let h=0;h<r;h++)c[h]=a[s+h];return c}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,s,a){const c=s.getCharacterCountBits(r);if(t>=1<<c)throw new Fe(t+" is bigger than "+((1<<c)-1));a.appendBits(t,c)}static appendBytes(t,r,s,a){switch(r){case he.NUMERIC:He.appendNumericBytes(t,s);break;case he.ALPHANUMERIC:He.appendAlphanumericBytes(t,s);break;case he.BYTE:He.append8BitBytes(t,s,a);break;case he.KANJI:He.appendKanjiBytes(t,s);break;default:throw new Fe("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=He.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const s=t.length;let a=0;for(;a<s;){const c=He.getDigit(t.charAt(a));if(a+2<s){const h=He.getDigit(t.charAt(a+1)),d=He.getDigit(t.charAt(a+2));r.appendBits(c*100+h*10+d,10),a+=3}else if(a+1<s){const h=He.getDigit(t.charAt(a+1));r.appendBits(c*10+h,7),a+=2}else r.appendBits(c,4),a++}}static appendAlphanumericBytes(t,r){const s=t.length;let a=0;for(;a<s;){const c=He.getAlphanumericCode(t.charCodeAt(a));if(c===-1)throw new Fe;if(a+1<s){const h=He.getAlphanumericCode(t.charCodeAt(a+1));if(h===-1)throw new Fe;r.appendBits(c*45+h,11),a+=2}else r.appendBits(c,6),a++}}static append8BitBytes(t,r,s){let a;try{a=Ce.encode(t,s)}catch(c){throw new Fe(c)}for(let c=0,h=a.length;c!==h;c++){const d=a[c];r.appendBits(d,8)}}static appendKanjiBytes(t,r){let s;try{s=Ce.encode(t,Y.SJIS)}catch(c){throw new Fe(c)}const a=s.length;for(let c=0;c<a;c+=2){const h=s[c]&255,d=s[c+1]&255,g=h<<8&4294967295|d;let x=-1;if(g>=33088&&g<=40956?x=g-33088:g>=57408&&g<=60351&&(x=g-49472),x===-1)throw new Fe("Invalid byte sequence");const w=(x>>8)*192+(x&255);r.appendBits(w,13)}}static appendECI(t,r){r.appendBits(he.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}He.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),He.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();class Ai{write(t,r,s,a=null){if(t.length===0)throw new y("Found empty contents");if(r<0||s<0)throw new y("Requested dimensions are too small: "+r+"x"+s);let c=je.L,h=Ai.QUIET_ZONE_SIZE;a!==null&&(a.get(ct.ERROR_CORRECTION)!==void 0&&(c=je.fromString(a.get(ct.ERROR_CORRECTION).toString())),a.get(ct.MARGIN)!==void 0&&(h=Number.parseInt(a.get(ct.MARGIN).toString(),10)));const d=He.encode(t,c,a);return this.renderResult(d,r,s,h)}writeToDom(t,r,s,a,c=null){typeof t=="string"&&(t=document.querySelector(t));const h=this.write(r,s,a,c);t&&t.appendChild(h)}renderResult(t,r,s,a){const c=t.getMatrix();if(c===null)throw new qt;const h=c.getWidth(),d=c.getHeight(),g=h+a*2,x=d+a*2,w=Math.max(r,g),C=Math.max(s,x),_=Math.min(Math.floor(w/g),Math.floor(C/x)),I=Math.floor((w-h*_)/2),D=Math.floor((C-d*_)/2),R=this.createSVGElement(w,C);for(let P=0,z=D;P<d;P++,z+=_)for(let q=0,K=I;q<h;q++,K+=_)if(c.get(q,P)===1){const $=this.createSvgRectElement(K,z,_,_);R.appendChild($)}return R}createSVGElement(t,r){const s=document.createElementNS(Ai.SVG_NS,"svg");return s.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width",r.toString()),s}createSvgRectElement(t,r,s,a){const c=document.createElementNS(Ai.SVG_NS,"rect");return c.setAttributeNS(null,"x",t.toString()),c.setAttributeNS(null,"y",r.toString()),c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",a.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Ai.QUIET_ZONE_SIZE=4,Ai.SVG_NS="http://www.w3.org/2000/svg";class nr{encode(t,r,s,a,c){if(t.length===0)throw new y("Found empty contents");if(r!==le.QR_CODE)throw new y("Can only encode QR_CODE, but got "+r);if(s<0||a<0)throw new y(`Requested dimensions are too small: ${s}x${a}`);let h=je.L,d=nr.QUIET_ZONE_SIZE;c!==null&&(c.get(ct.ERROR_CORRECTION)!==void 0&&(h=je.fromString(c.get(ct.ERROR_CORRECTION).toString())),c.get(ct.MARGIN)!==void 0&&(d=Number.parseInt(c.get(ct.MARGIN).toString(),10)));const g=He.encode(t,h,c);return nr.renderResult(g,s,a,d)}static renderResult(t,r,s,a){const c=t.getMatrix();if(c===null)throw new qt;const h=c.getWidth(),d=c.getHeight(),g=h+a*2,x=d+a*2,w=Math.max(r,g),C=Math.max(s,x),_=Math.min(Math.floor(w/g),Math.floor(C/x)),I=Math.floor((w-h*_)/2),D=Math.floor((C-d*_)/2),R=new we(w,C);for(let P=0,z=D;P<d;P++,z+=_)for(let q=0,K=I;q<h;q++,K+=_)c.get(q,P)===1&&R.setRegion(K,z,_,_);return R}}nr.QUIET_ZONE_SIZE=4;class v0{encode(t,r,s,a,c){let h;switch(r){case le.QR_CODE:h=new nr;break;default:throw new y("No encoder available for format "+r)}return h.encode(t,r,s,a,c)}}class Cn extends Xt{constructor(t,r,s,a,c,h,d,g){if(super(h,d),this.yuvData=t,this.dataWidth=r,this.dataHeight=s,this.left=a,this.top=c,a+h>r||c+d>s)throw new y("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(h,d)}getRow(t,r){if(t<0||t>=this.getHeight())throw new y("Requested row is outside the image: "+t);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const a=(t+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,a,r,0,s),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const s=t*r,a=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return M.arraycopy(this.yuvData,c,a,0,s),a;for(let h=0;h<r;h++){const d=h*t;M.arraycopy(this.yuvData,c,a,d,t),c+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,s,a){return new Cn(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,s,a,!1)}renderThumbnail(){const t=this.getWidth()/Cn.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Cn.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(t*r),a=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let h=0;h<r;h++){const d=h*t;for(let g=0;g<t;g++){const x=a[c+g*Cn.THUMBNAIL_SCALE_FACTOR]&255;s[d+g]=4278190080|x*65793}c+=this.dataWidth*Cn.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/Cn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Cn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const s=this.yuvData;for(let a=0,c=this.top*this.dataWidth+this.left;a<r;a++,c+=this.dataWidth){const h=c+t/2;for(let d=c,g=c+t-1;d<h;d++,g--){const x=s[d];s[d]=s[g],s[g]=x}}}invert(){return new ot(this)}}Cn.THUMBNAIL_SCALE_FACTOR=2;class fa extends Xt{constructor(t,r,s,a,c,h,d){if(super(r,s),this.dataWidth=a,this.dataHeight=c,this.left=h,this.top=d,t.BYTES_PER_ELEMENT===4){const g=r*s,x=new Uint8ClampedArray(g);for(let w=0;w<g;w++){const C=t[w],_=C>>16&255,I=C>>7&510,D=C&255;x[w]=(_+I+D)/4&255}this.luminances=x}else this.luminances=t;if(a===void 0&&(this.dataWidth=r),c===void 0&&(this.dataHeight=s),h===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+s>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new y("Requested row is outside the image: "+t);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const a=(t+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,a,r,0,s),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const s=t*r,a=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return M.arraycopy(this.luminances,c,a,0,s),a;for(let h=0;h<r;h++){const d=h*t;M.arraycopy(this.luminances,c,a,d,t),c+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,s,a){return new fa(this.luminances,s,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new ot(this)}}class Hc extends Y{static forName(t){return this.getCharacterSetECIByName(t)}}class da{}da.ISO_8859_1=Y.ISO8859_1;class Vc{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Wc{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class S0{constructor(t){this.previous=t}getPrevious(){return this.previous}}class ir extends S0{constructor(t,r,s){super(t),this.value=r,this.bitCount=s}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new ir(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ir(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+F.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class ga extends ir{constructor(t,r,s){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=s}appendTo(t,r){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):s===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+s],8)}addBinaryShift(t,r){return new ga(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function T0(A,t,r){return new ga(A,t,r)}function qr(A,t,r){return new ir(A,t,r)}const I0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ei=0,Ls=1,en=2,Yc=3,_n=4,O0=new ir(null,0,0),pa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function N0(A){for(let t of A)k.fill(t,-1);return A[ei][_n]=0,A[Ls][_n]=0,A[Ls][ei]=28,A[Yc][_n]=0,A[en][_n]=0,A[en][ei]=15,A}const Xc=N0(k.createInt32Array(6,6));class vn{constructor(t,r,s,a){this.token=t,this.mode=r,this.binaryShiftByteCount=s,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let s=this.bitCount,a=this.token;if(t!==this.mode){let h=pa[this.mode][t];a=qr(a,h&65535,h>>16),s+=h>>16}let c=t===en?4:5;return a=qr(a,r,c),new vn(a,t,0,s+c)}shiftAndAppend(t,r){let s=this.token,a=this.mode===en?4:5;return s=qr(s,Xc[this.mode][t],a),s=qr(s,r,5),new vn(s,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(t){let r=this.token,s=this.mode,a=this.bitCount;if(this.mode===_n||this.mode===en){let d=pa[s][ei];r=qr(r,d&65535,d>>16),a+=d>>16,s=ei}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new vn(r,s,this.binaryShiftByteCount+1,a+c);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(t+1)),h}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=T0(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new vn(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(pa[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=vn.calculateBinaryShiftCost(t)-vn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())r.unshift(a);let s=new W;for(const a of r)a.appendTo(s,t);return s}toString(){return se.format("%s bits=%d bytes=%d",I0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}vn.INITIAL_STATE=new vn(O0,ei,0,0);function M0(A){const t=se.getCharCode(" "),r=se.getCharCode("."),s=se.getCharCode(",");A[ei][t]=1;const a=se.getCharCode("Z"),c=se.getCharCode("A");for(let _=c;_<=a;_++)A[ei][_]=_-c+2;A[Ls][t]=1;const h=se.getCharCode("z"),d=se.getCharCode("a");for(let _=d;_<=h;_++)A[Ls][_]=_-d+2;A[en][t]=1;const g=se.getCharCode("9"),x=se.getCharCode("0");for(let _=x;_<=g;_++)A[en][_]=_-x+2;A[en][s]=12,A[en][r]=13;const w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let _=0;_<w.length;_++)A[Yc][se.getCharCode(w[_])]=_;const C=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let _=0;_<C.length;_++)se.getCharCode(C[_])>0&&(A[_n][se.getCharCode(C[_])]=_);return A}const ma=M0(k.createInt32Array(5,256));class Kr{constructor(t){this.text=t}encode(){const t=se.getCharCode(" "),r=se.getCharCode(`
`);let s=Wc.singletonList(vn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let h,d=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case se.getCharCode("\r"):h=d===r?2:0;break;case se.getCharCode("."):h=d===t?3:0;break;case se.getCharCode(","):h=d===t?4:0;break;case se.getCharCode(":"):h=d===t?5:0;break;default:h=0}h>0?(s=Kr.updateStateListForPair(s,c,h),c++):s=this.updateStateListForChar(s,c)}return Wc.min(s,(c,h)=>c.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const s=[];for(let a of t)this.updateStateForChar(a,r,s);return Kr.simplifyStates(s)}updateStateForChar(t,r,s){let a=this.text[r]&255,c=ma[t.getMode()][a]>0,h=null;for(let d=0;d<=_n;d++){let g=ma[d][a];if(g>0){if(h==null&&(h=t.endBinaryShift(r)),!c||d===t.getMode()||d===en){const x=h.latchAndAppend(d,g);s.push(x)}if(!c&&Xc[t.getMode()][d]>=0){const x=h.shiftAndAppend(d,g);s.push(x)}}}if(t.getBinaryShiftByteCount()>0||ma[t.getMode()][a]===0){let d=t.addBinaryShiftChar(r);s.push(d)}}static updateStateListForPair(t,r,s){const a=[];for(let c of t)this.updateStateForPair(c,r,s,a);return this.simplifyStates(a)}static updateStateForPair(t,r,s,a){let c=t.endBinaryShift(r);if(a.push(c.latchAndAppend(_n,s)),t.getMode()!==_n&&a.push(c.shiftAndAppend(_n,s)),s===3||s===4){let h=c.latchAndAppend(en,16-s).latchAndAppend(en,1);a.push(h)}if(t.getBinaryShiftByteCount()>0){let h=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(h)}}static simplifyStates(t){let r=[];for(const s of t){let a=!0;for(const c of r){if(c.isBetterThanOrEqualTo(s)){a=!1;break}s.isBetterThanOrEqualTo(c)&&(r=r.filter(h=>h!==c))}a&&r.push(s)}return r}}class Te{constructor(){}static encodeBytes(t){return Te.encode(t,Te.DEFAULT_EC_PERCENT,Te.DEFAULT_AZTEC_LAYERS)}static encode(t,r,s){let a=new Kr(t).encode(),c=F.truncDivision(a.getSize()*r,100)+11,h=a.getSize()+c,d,g,x,w,C;if(s!==Te.DEFAULT_AZTEC_LAYERS){if(d=s<0,g=Math.abs(s),g>(d?Te.MAX_NB_BITS_COMPACT:Te.MAX_NB_BITS))throw new y(se.format("Illegal value %s for layers",s));x=Te.totalBitsInLayer(g,d),w=Te.WORD_SIZE[g];let $=x-x%w;if(C=Te.stuffBits(a,w),C.getSize()+c>$)throw new y("Data to large for user specified layer");if(d&&C.getSize()>w*64)throw new y("Data to large for user specified layer")}else{w=0,C=null;for(let $=0;;$++){if($>Te.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(d=$<=3,g=d?$+1:$,x=Te.totalBitsInLayer(g,d),h>x)continue;(C==null||w!==Te.WORD_SIZE[g])&&(w=Te.WORD_SIZE[g],C=Te.stuffBits(a,w));let be=x-x%w;if(!(d&&C.getSize()>w*64)&&C.getSize()+c<=be)break}}let _=Te.generateCheckWords(C,x,w),I=C.getSize()/w,D=Te.generateModeMessage(d,g,I),R=(d?11:14)+g*4,P=new Int32Array(R),z;if(d){z=R;for(let $=0;$<P.length;$++)P[$]=$}else{z=R+1+2*F.truncDivision(F.truncDivision(R,2)-1,15);let $=F.truncDivision(R,2),be=F.truncDivision(z,2);for(let pe=0;pe<$;pe++){let Nt=pe+F.truncDivision(pe,15);P[$-pe-1]=be-Nt-1,P[$+pe]=be+Nt+1}}let q=new we(z);for(let $=0,be=0;$<g;$++){let pe=(g-$)*4+(d?9:12);for(let Nt=0;Nt<pe;Nt++){let dn=Nt*2;for(let Mt=0;Mt<2;Mt++)_.get(be+dn+Mt)&&q.set(P[$*2+Mt],P[$*2+Nt]),_.get(be+pe*2+dn+Mt)&&q.set(P[$*2+Nt],P[R-1-$*2-Mt]),_.get(be+pe*4+dn+Mt)&&q.set(P[R-1-$*2-Mt],P[R-1-$*2-Nt]),_.get(be+pe*6+dn+Mt)&&q.set(P[R-1-$*2-Nt],P[$*2+Mt])}be+=pe*8}if(Te.drawModeMessage(q,d,z,D),d)Te.drawBullsEye(q,F.truncDivision(z,2),5);else{Te.drawBullsEye(q,F.truncDivision(z,2),7);for(let $=0,be=0;$<F.truncDivision(R,2)-1;$+=15,be+=16)for(let pe=F.truncDivision(z,2)&1;pe<z;pe+=2)q.set(F.truncDivision(z,2)-be,pe),q.set(F.truncDivision(z,2)+be,pe),q.set(pe,F.truncDivision(z,2)-be),q.set(pe,F.truncDivision(z,2)+be)}let K=new Vc;return K.setCompact(d),K.setSize(z),K.setLayers(g),K.setCodeWords(I),K.setMatrix(q),K}static drawBullsEye(t,r,s){for(let a=0;a<s;a+=2)for(let c=r-a;c<=r+a;c++)t.set(c,r-a),t.set(c,r+a),t.set(r-a,c),t.set(r+a,c);t.set(r-s,r-s),t.set(r-s+1,r-s),t.set(r-s,r-s+1),t.set(r+s,r-s),t.set(r+s,r-s+1),t.set(r+s,r+s-1)}static generateModeMessage(t,r,s){let a=new W;return t?(a.appendBits(r-1,2),a.appendBits(s-1,6),a=Te.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(s-1,11),a=Te.generateCheckWords(a,40,4)),a}static drawModeMessage(t,r,s,a){let c=F.truncDivision(s,2);if(r)for(let h=0;h<7;h++){let d=c-3+h;a.get(h)&&t.set(d,c-5),a.get(h+7)&&t.set(c+5,d),a.get(20-h)&&t.set(d,c+5),a.get(27-h)&&t.set(c-5,d)}else for(let h=0;h<10;h++){let d=c-5+h+F.truncDivision(h,5);a.get(h)&&t.set(d,c-7),a.get(h+10)&&t.set(c+7,d),a.get(29-h)&&t.set(d,c+7),a.get(39-h)&&t.set(c-7,d)}}static generateCheckWords(t,r,s){let a=t.getSize()/s,c=new ha(Te.getGF(s)),h=F.truncDivision(r,s),d=Te.bitsToWords(t,s,h);c.encode(d,h-a);let g=r%s,x=new W;x.appendBits(0,g);for(const w of Array.from(d))x.appendBits(w,s);return x}static bitsToWords(t,r,s){let a=new Int32Array(s),c,h;for(c=0,h=t.getSize()/r;c<h;c++){let d=0;for(let g=0;g<r;g++)d|=t.get(c*r+g)?1<<r-g-1:0;a[c]=d}return a}static getGF(t){switch(t){case 4:return ve.AZTEC_PARAM;case 6:return ve.AZTEC_DATA_6;case 8:return ve.AZTEC_DATA_8;case 10:return ve.AZTEC_DATA_10;case 12:return ve.AZTEC_DATA_12;default:throw new y("Unsupported word size "+t)}}static stuffBits(t,r){let s=new W,a=t.getSize(),c=(1<<r)-2;for(let h=0;h<a;h+=r){let d=0;for(let g=0;g<r;g++)(h+g>=a||t.get(h+g))&&(d|=1<<r-1-g);(d&c)===c?(s.appendBits(d&c,r),h--):(d&c)===0?(s.appendBits(d|1,r),h--):s.appendBits(d,r)}return s}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Te.DEFAULT_EC_PERCENT=33,Te.DEFAULT_AZTEC_LAYERS=0,Te.MAX_NB_BITS=32,Te.MAX_NB_BITS_COMPACT=4,Te.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ps{encode(t,r,s,a){return this.encodeWithHints(t,r,s,a,null)}encodeWithHints(t,r,s,a,c){let h=da.ISO_8859_1,d=Te.DEFAULT_EC_PERCENT,g=Te.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(ct.CHARACTER_SET)&&(h=Hc.forName(c.get(ct.CHARACTER_SET).toString())),c.has(ct.ERROR_CORRECTION)&&(d=F.parseInt(c.get(ct.ERROR_CORRECTION).toString())),c.has(ct.AZTEC_LAYERS)&&(g=F.parseInt(c.get(ct.AZTEC_LAYERS).toString()))),Ps.encodeLayers(t,r,s,a,h,d,g)}static encodeLayers(t,r,s,a,c,h,d){if(r!==le.AZTEC)throw new y("Can only encode AZTEC, but got "+r);let g=Te.encode(se.getBytes(t,c),h,d);return Ps.renderResult(g,s,a)}static renderResult(t,r,s){let a=t.getMatrix();if(a==null)throw new qt;let c=a.getWidth(),h=a.getHeight(),d=Math.max(r,c),g=Math.max(s,h),x=Math.min(d/c,g/h),w=(d-c*x)/2,C=(g-h*x)/2,_=new we(d,g);for(let I=0,D=C;I<h;I++,D+=x)for(let R=0,P=w;R<c;R++,P+=x)a.get(R,I)&&_.setRegion(P,D,x,x);return _}}n.AbstractExpandedDecoder=ta,n.ArgumentException=b,n.ArithmeticException=qi,n.AztecCode=Vc,n.AztecCodeReader=Ss,n.AztecCodeWriter=Ps,n.AztecDecoder=Pe,n.AztecDetector=Oc,n.AztecDetectorResult=zr,n.AztecEncoder=Te,n.AztecHighLevelEncoder=Kr,n.AztecPoint=yt,n.BarcodeFormat=le,n.Binarizer=N,n.BinaryBitmap=S,n.BitArray=W,n.BitMatrix=we,n.BitSource=sa,n.BrowserAztecCodeReader=i0,n.BrowserBarcodeReader=l0,n.BrowserCodeReader=Gt,n.BrowserDatamatrixCodeReader=u0,n.BrowserMultiFormatReader=y0,n.BrowserPDF417Reader=A0,n.BrowserQRCodeReader=C0,n.BrowserQRCodeSvgWriter=Ai,n.CharacterSetECI=Y,n.ChecksumException=v,n.Code128Reader=Q,n.Code39Reader=at,n.DataMatrixDecodedBitStreamParser=Kn,n.DataMatrixReader=Zn,n.DecodeHintType=Z,n.DecoderResult=Pn,n.DefaultGridSampler=jr,n.DetectorResult=mi,n.EAN13Reader=xi,n.EncodeHintType=ct,n.Exception=m,n.FormatException=j,n.GenericGF=ve,n.GenericGFPoly=ut,n.GlobalHistogramBinarizer=_e,n.GridSampler=Ki,n.GridSamplerInstance=hn,n.HTMLCanvasElementLuminanceSource=Bt,n.HybridBinarizer=ue,n.ITFReader=ke,n.IllegalArgumentException=y,n.IllegalStateException=qt,n.InvertedLuminanceSource=ot,n.LuminanceSource=Xt,n.MathUtils=ye,n.MultiFormatOneDReader=er,n.MultiFormatReader=jc,n.MultiFormatWriter=v0,n.NotFoundException=H,n.OneDReader=it,n.PDF417DecodedBitStreamParser=U,n.PDF417DecoderErrorCorrection=Pc,n.PDF417Reader=pt,n.PDF417ResultMetadata=kc,n.PerspectiveTransform=St,n.PlanarYUVLuminanceSource=Cn,n.QRCodeByteMatrix=Rs,n.QRCodeDataMask=Qt,n.QRCodeDecodedBitStreamParser=Xe,n.QRCodeDecoderErrorCorrectionLevel=je,n.QRCodeDecoderFormatInformation=Et,n.QRCodeEncoder=He,n.QRCodeEncoderQRCode=yi,n.QRCodeMaskUtil=Ze,n.QRCodeMatrixUtil=de,n.QRCodeMode=he,n.QRCodeReader=Qn,n.QRCodeVersion=ce,n.QRCodeWriter=nr,n.RGBLuminanceSource=fa,n.RSS14Reader=Ke,n.RSSExpandedReader=X,n.ReaderException=Ds,n.ReedSolomonDecoder=$n,n.ReedSolomonEncoder=ha,n.ReedSolomonException=Gn,n.Result=$e,n.ResultMetadataType=ze,n.ResultPoint=re,n.StringUtils=se,n.UnsupportedOperationException=Me,n.VideoInputDevice=$i,n.WhiteRectangleDetector=kt,n.WriterException=Fe,n.ZXingArrays=k,n.ZXingCharset=Hc,n.ZXingInteger=F,n.ZXingStandardCharsets=da,n.ZXingStringBuilder=oe,n.ZXingStringEncoding=Ce,n.ZXingSystem=M,n.createAbstractExpandedDecoder=Rc,Object.defineProperty(n,"__esModule",{value:!0})})}(ss,ss.exports)),ss.exports}var Ve=gb();const pb=fb(Ve),mb=L0({__proto__:null,default:pb},[Ve]);var Gu=function(){function i(e,n,o){if(this.formatMap=new Map([[ne.QR_CODE,Ve.BarcodeFormat.QR_CODE],[ne.AZTEC,Ve.BarcodeFormat.AZTEC],[ne.CODABAR,Ve.BarcodeFormat.CODABAR],[ne.CODE_39,Ve.BarcodeFormat.CODE_39],[ne.CODE_93,Ve.BarcodeFormat.CODE_93],[ne.CODE_128,Ve.BarcodeFormat.CODE_128],[ne.DATA_MATRIX,Ve.BarcodeFormat.DATA_MATRIX],[ne.MAXICODE,Ve.BarcodeFormat.MAXICODE],[ne.ITF,Ve.BarcodeFormat.ITF],[ne.EAN_13,Ve.BarcodeFormat.EAN_13],[ne.EAN_8,Ve.BarcodeFormat.EAN_8],[ne.PDF_417,Ve.BarcodeFormat.PDF_417],[ne.RSS_14,Ve.BarcodeFormat.RSS_14],[ne.RSS_EXPANDED,Ve.BarcodeFormat.RSS_EXPANDED],[ne.UPC_A,Ve.BarcodeFormat.UPC_A],[ne.UPC_E,Ve.BarcodeFormat.UPC_E],[ne.UPC_EAN_EXTENSION,Ve.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!mb)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var l=this.createZXingFormats(e),u=new Map;u.set(Ve.DecodeHintType.POSSIBLE_FORMATS,l),u.set(Ve.DecodeHintType.TRY_HARDER,!1),this.hints=u}return i.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,l){try{o(n.decode(e))}catch(u){l(u)}})},i.prototype.decode=function(e){var n=new Ve.MultiFormatReader(this.verbose,this.hints),o=new Ve.HTMLCanvasElementLuminanceSource(e),l=new Ve.BinaryBitmap(new Ve.HybridBinarizer(o)),u=n.decode(l);return{text:u.text,format:wd.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,l){e.set(n,o)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var n=[],o=0,l=e;o<l.length;o++){var u=l[o];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),xb=function(i,e,n,o){function l(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function p(b){try{m(o.next(b))}catch(y){f(y)}}function E(b){try{m(o.throw(b))}catch(y){f(y)}}function m(b){b.done?u(b.value):l(b.value).then(p,E)}m((o=o.apply(i,e||[])).next())})},Eb=function(i,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(b){return E([m,b])}}function E(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(o=1,l&&(u=m[0]&2?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,l=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(b){m=[6,b],l=0}finally{o=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},$u=function(){function i(e,n,o){if(this.formatMap=new Map([[ne.QR_CODE,"qr_code"],[ne.AZTEC,"aztec"],[ne.CODABAR,"codabar"],[ne.CODE_39,"code_39"],[ne.CODE_93,"code_93"],[ne.CODE_128,"code_128"],[ne.DATA_MATRIX,"data_matrix"],[ne.ITF,"itf"],[ne.EAN_13,"ean_13"],[ne.EAN_8,"ean_8"],[ne.PDF_417,"pdf417"],[ne.UPC_A,"upc_a"],[ne.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return xb(this,void 0,void 0,function(){var n,o;return Eb(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:wd.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,l=0,u=e;l<u.length;l++){var f=u[l],p=f.boundingBox.width*f.boundingBox.height;p>o&&(o=p,n=f)}if(!n)throw"No largest barcode found";return n},i.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,l=e;o<l.length;o++){var u=l[o];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,l){e.set(n,o)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),qu=function(i,e,n,o){function l(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function p(b){try{m(o.next(b))}catch(y){f(y)}}function E(b){try{m(o.throw(b))}catch(y){f(y)}}function m(b){b.done?u(b.value):l(b.value).then(p,E)}m((o=o.apply(i,e||[])).next())})},Ku=function(i,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(b){return E([m,b])}}function E(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(o=1,l&&(u=m[0]&2?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,l=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(b){m=[6,b],l=0}finally{o=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},bb=function(){function i(e,n,o,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&$u.isSupported()?(this.primaryDecoder=new $u(e,o,l),this.secondaryDecoder=new Gu(e,o,l)):this.primaryDecoder=new Gu(e,o,l)}return i.prototype.decodeAsync=function(e){return qu(this,void 0,void 0,function(){var n;return Ku(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return qu(this,void 0,void 0,function(){var n,o;return Ku(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(o=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var l=o[n];e+=l}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),ic=function(){var i=function(e,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(o[u]=l[u])},i(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ao=function(i,e,n,o){function l(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function p(b){try{m(o.next(b))}catch(y){f(y)}}function E(b){try{m(o.throw(b))}catch(y){f(y)}}function m(b){b.done?u(b.value):l(b.value).then(p,E)}m((o=o.apply(i,e||[])).next())})},Co=function(i,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(b){return E([m,b])}}function E(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(o=1,l&&(u=m[0]&2?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,l=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(b){m=[6,b],l=0}finally{o=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},_d=function(){function i(e,n){this.name=e,this.track=n}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},i}(),wb=function(i){ic(e,i);function e(n,o){return i.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var l={advanced:[o]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(_d),yb=function(i){ic(e,i);function e(n){return i.call(this,"zoom",n)||this}return e}(wb),Ab=function(i){ic(e,i);function e(n){return i.call(this,"torch",n)||this}return e}(_d),Cb=function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new yb(this.track)},i.prototype.torchFeature=function(){return new Ab(this.track)},i}(),_b=function(){function i(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,l),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,n,o,l){return Ao(this,void 0,void 0,function(){var u,f;return Co(this,function(p){switch(p.label){case 0:return u=new i(e,n,l),o.aspectRatio?(f={aspectRatio:o.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:p.sent(),p.label=2;case 2:return u.setupSurface(),[2,u]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return Ao(this,void 0,void 0,function(){return Co(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var l=e.mediaStream.getVideoTracks(),u=l.length,f=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++f,f>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},i.prototype.getCapabilities=function(){return new Cb(this.getFirstTrackOrFail())},i}(),vb=function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,n,o){return Ao(this,void 0,void 0,function(){return Co(this,function(l){return[2,_b.create(e,this.mediaStream,n,o)]})})},i.create=function(e){return Ao(this,void 0,void 0,function(){var n,o;return Co(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=l.sent(),[2,new i(o)]}})})},i}(),Zu=function(i,e,n,o){function l(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function p(b){try{m(o.next(b))}catch(y){f(y)}}function E(b){try{m(o.throw(b))}catch(y){f(y)}}function m(b){b.done?u(b.value):l(b.value).then(p,E)}m((o=o.apply(i,e||[])).next())})},Qu=function(i,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(b){return E([m,b])}}function E(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(o=1,l&&(u=m[0]&2?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,l=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(b){m=[6,b],l=0}finally{o=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Sb=function(){function i(){}return i.failIfNotSupported=function(){return Zu(this,void 0,void 0,function(){return Qu(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return Zu(this,void 0,void 0,function(){return Qu(this,function(n){return[2,vb.create(e)]})})},i}(),Tb=function(i,e,n,o){function l(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function p(b){try{m(o.next(b))}catch(y){f(y)}}function E(b){try{m(o.throw(b))}catch(y){f(y)}}function m(b){b.done?u(b.value):l(b.value).then(p,E)}m((o=o.apply(i,e||[])).next())})},Ib=function(i,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(b){return E([m,b])}}function E(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(o=1,l&&(u=m[0]&2?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,l=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(b){m=[6,b],l=0}finally{o=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Ob=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Er.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Er.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return Tb(this,void 0,void 0,function(){var e,n,o,l,u,f,p;return Ib(this,function(E){switch(E.label){case 0:return e=function(m){for(var b=m.getVideoTracks(),y=0,S=b;y<S.length;y++){var v=S[y];v.enabled=!1,v.stop(),m.removeTrack(v)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=E.sent(),l=[],u=0,f=o;u<f.length;u++)p=f[u],p.kind==="videoinput"&&l.push({id:p.deviceId,label:p.label});return e(n),[2,l]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(u){for(var f=[],p=0,E=u;p<E.length;p++){var m=E[p];m.kind==="video"&&f.push({id:m.id,label:m.label})}e(f)},l=MediaStreamTrack;l.getSources(o)})},i}(),Qe;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(Qe||(Qe={}));var Nb=function(){function i(){this.state=Qe.NOT_STARTED,this.onGoingTransactionNewState=Qe.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===Qe.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Qe.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===Qe.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Qe.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Qe.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case Qe.UNKNOWN:throw"Transition from unknown is not allowed";case Qe.NOT_STARTED:this.failIfNewStateIs(e,[Qe.PAUSED]);break;case Qe.SCANNING:break;case Qe.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,n){for(var o=0,l=n;o<l.length;o++){var u=l[o];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i}(),Mb=function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===Qe.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==Qe.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Qe.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===Qe.PAUSED},i}(),Db=function(){function i(){}return i.create=function(){return new Mb(new Nb)},i}(),Rb=function(){var i=function(e,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(o[u]=l[u])},i(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ut=function(i){Rb(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(gn),Lb=function(){function i(e,n){this.logger=n,this.fps=Ut.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ut.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Cd.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!In(this.qrbox)},i.create=function(e,n){return new i(e,n)},i}(),Ju=function(){function i(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new Ad(this.verbose),this.qrcode=new bb(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Db.create()}return i.prototype.start=function(e,n,o,l){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;l?f=l:f=this.verbose?this.logger.log:function(){};var p=Lb.create(n,this.logger);this.clearElement();var E=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=E,b=document.getElementById(this.elementId);b.clientWidth?b.clientWidth:Ut.DEFAULT_WIDTH,b.style.position="relative",this.shouldScan=!0,this.element=b;var y=this,S=this.stateManagerProxy.startTransition(Qe.SCANNING);return new Promise(function(v,N){var M=m?p.videoConstraints:y.createVideoConstraints(e);if(!M){S.cancel(),N("videoConstraints should be defined");return}var O={};(!m||p.aspectRatio)&&(O.aspectRatio=p.aspectRatio);var L={onRenderSurfaceReady:function(k,F){y.setupUi(k,F,p),y.isScanning=!0,y.foreverScan(p,o,f)}};Sb.failIfNotSupported().then(function(k){k.create(M).then(function(F){return F.render(u.element,O,L).then(function(W){y.renderedCamera=W,S.execute(),v(null)}).catch(function(W){S.cancel(),N(W)})}).catch(function(F){S.cancel(),N(Er.errorGettingUserMedia(F))})}).catch(function(k){S.cancel(),N(Er.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Qe.PAUSED),this.showPausedState(),(In(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Qe.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Qe.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var u=document.getElementById(Ut.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),o(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},i.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(In(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var p=f.width,E=f.height,m=document.getElementById(o.elementId),b=m.clientWidth?m.clientWidth:Ut.DEFAULT_WIDTH,y=Math.max(m.clientHeight?m.clientHeight:E,Ut.FILE_SCAN_MIN_HEIGHT),S=o.computeCanvasDrawConfig(p,E,b,y);if(n){var v=o.createCanvasElement(b,y,"qr-canvas-visible");v.style.display="inline-block",m.appendChild(v);var N=v.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=b,N.canvas.height=y,N.drawImage(f,0,0,p,E,S.x,S.y,S.width,S.height)}var M=Ut.FILE_SCAN_HIDDEN_CANVAS_PADDING,O=Math.max(f.width,S.width),L=Math.max(f.height,S.height),k=O+2*M,F=L+2*M,W=o.createCanvasElement(k,F);m.appendChild(W);var ee=W.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=k,ee.canvas.height=F,ee.drawImage(f,0,0,p,E,M,M,O,L);try{o.qrcode.decodeRobustlyAsync(W).then(function(Z){l(Wu.createFromQrcodeResult(Z))}).catch(u)}catch(Z){u("QR code parse error, error = ".concat(Z))}},f.onerror=u,f.onabort=u,f.onstalled=u,f.onsuspend=u,f.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return Ob.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!Cd.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var n=[ne.QR_CODE,ne.AZTEC,ne.CODABAR,ne.CODE_39,ne.CODE_93,ne.CODE_128,ne.DATA_MATRIX,ne.MAXICODE,ne.ITF,ne.EAN_13,ne.EAN_8,ne.PDF_417,ne.RSS_14,ne.RSS_EXPANDED,ne.UPC_A,ne.UPC_E,ne.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],l=0,u=e.formatsToSupport;l<u.length;l++){var f=u[l];ub(f)?o.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(In(e))return!0;if(!In(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(In(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return In(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,n,o){var l=this,u=o.qrbox;this.validateQrboxConfig(u);var f=this.toQrdimensions(e,n,u),p=function(m){if(m<Ut.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ut.MIN_QR_BOX_SIZE,"px.")},E=function(m){return m>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};p(f.width),p(f.height),f.width=E(f.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return o},i.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var l=In(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=o.isShadedBoxEnabled()&&u.height<=n,p={x:0,y:0,width:e,height:n},E=f?this.getShadedRegionBounds(e,n,u):p,m=this.createCanvasElement(E.width,E.height),b={willReadFrequently:!0},y=m.getContext("2d",b);y.canvas.width=E.width,y.canvas.height=E.height,this.element.append(m),f&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=y,this.canvasElement=m},i.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Er.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},i.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,Wu.createFromQrcodeResult(l)),o.possiblyUpdateShaders(!0),!0}).catch(function(l){o.possiblyUpdateShaders(!1);var u=Er.codeParseError(l);return n(u,yd.createFrom(u)),!1})},i.prototype.foreverScan=function(e,n,o){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),f=u.videoWidth/u.clientWidth,p=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*f,m=this.qrRegion.height*p,b=this.qrRegion.x*f,y=this.qrRegion.y*p;this.context.drawImage(u,b,y,E,m,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,n,o)},l.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(v){!v&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,o).finally(function(){S()})):S()}).catch(function(v){l.logger.logError("Error happend while scanning context",v),S()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",l={user:!0,environment:!0},u="exact",f=function(N){if(N in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var E=Object.keys(e)[0];if(E!==n&&E!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(E===n){var m=e.facingMode;if(typeof m=="string"){if(f(m))return{facingMode:m}}else if(typeof m=="object")if(u in m){if(f(m["".concat(u)]))return{facingMode:{exact:m["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var b=typeof m;throw"Invalid type of 'facingMode' = ".concat(b)}}else{var y=e.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(u in y)return{deviceId:{exact:y["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var S=typeof y;throw"Invalid type of 'deviceId' = ".concat(S)}}}var v=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(v)},i.prototype.computeCanvasDrawConfig=function(e,n,o,l){if(e<=o&&n<=l){var u=(o-e)/2,f=(l-n)/2;return{x:u,y:f,width:e,height:n}}else{var p=e,E=n;return e>o&&(n=o/e*n,e=o),n>l&&(e=l/n*e,n=l),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(E)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,l)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Ut.BORDER_SHADER_MATCH_COLOR:Ut.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,n,o){var l=e,u=n,f=document.createElement("canvas");return f.style.width="".concat(l,"px"),f.style.height="".concat(u,"px"),f.style.display="none",f.id=In(o)?"qr-canvas":o,f},i.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},i.prototype.possiblyInsertShadingElement=function(e,n,o,l){if(!(n-l.width<1||o-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var f=(n-l.width)/2,p=(o-l.height)/2;if(u.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(Ut.SHADED_REGION_ELEMENT_ID),n-l.width<11||o-l.height<11)this.hasBorderShaders=!1;else{var E=5,m=40;this.insertShaderBorders(u,m,E,-E,null,0,!0),this.insertShaderBorders(u,m,E,-E,null,0,!1),this.insertShaderBorders(u,m,E,null,-E,0,!0),this.insertShaderBorders(u,m,E,null,-E,0,!1),this.insertShaderBorders(u,E,m+E,-E,null,-E,!0),this.insertShaderBorders(u,E,m+E,null,-E,-E,!0),this.insertShaderBorders(u,E,m+E,-E,null,-E,!1),this.insertShaderBorders(u,E,m+E,null,-E,-E,!1),this.hasBorderShaders=!0}e.append(u)}},i.prototype.insertShaderBorders=function(e,n,o,l,u,f,p){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=Ut.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(n,"px"),E.style.height="".concat(o,"px"),l!==null&&(E.style.top="".concat(l,"px")),u!==null&&(E.style.bottom="".concat(u,"px")),p?E.style.left="".concat(f,"px"):E.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),e.appendChild(E)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i}(),rc="data:image/svg+xml;base64,",Pb=rc+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Bb=rc+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",eh=rc+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",kb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",th=function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i}(),Fb=function(){function i(){this.data=th.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=th.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i}(),Ub=function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Yu.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var o=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(o),this.infoDiv.appendChild(l);var u=document.createElement("a");u.innerText=Yu.reportIssues(),u.href="https://github.com/mebjas/html5-qrcode/issues",u.target="new",u.style.color="white",this.infoDiv.appendChild(u),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i}(),zb=function(){function i(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=eh,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(o){return n.onHoverIn()},this.infoIcon.onmouseout=function(o){return n.onHoverOut()},this.infoIcon.onclick=function(o){return n.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=kb,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=eh,this.infoIcon.style.opacity="0.6")},i}(),jb=function(){function i(){var e=this;this.infoDiv=new Ub,this.infoIcon=new zb(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i}(),Hb=function(i,e,n,o){function l(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function p(b){try{m(o.next(b))}catch(y){f(y)}}function E(b){try{m(o.throw(b))}catch(y){f(y)}}function m(b){b.done?u(b.value):l(b.value).then(p,E)}m((o=o.apply(i,e||[])).next())})},Vb=function(i,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(b){return E([m,b])}}function E(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(o=1,l&&(u=m[0]&2?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,l=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(b){m=[6,b],l=0}finally{o=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},nh=function(){function i(){}return i.hasPermissions=function(){return Hb(this,void 0,void 0,function(){var e,n,o,l;return Vb(this,function(u){switch(u.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=u.sent(),n=0,o=e;n<o.length;n++)if(l=o[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},i}(),ni=function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var o=n[e];if(i.isCameraScanType(o))return!0}return!1},i.isCameraScanType=function(e){return e===li.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===li.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return gn.DEFAULT_SUPPORTED_SCAN_TYPE;var n=gn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var o=0,l=e;o<l.length;o++){var u=l[o];if(!gn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(u))throw"Unsupported scan type ".concat(u)}return e},i}(),jt=function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i}(),Fn=function(){function i(){}return i.createElement=function(e,n){var o=document.createElement(e);return o.id=n,o.classList.add(jt.ALL_ELEMENT_CLASS),e==="button"&&o.setAttribute("type","button"),o},i}(),vd=function(i,e,n,o){function l(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function p(b){try{m(o.next(b))}catch(y){f(y)}}function E(b){try{m(o.throw(b))}catch(y){f(y)}}function m(b){b.done?u(b.value):l(b.value).then(p,E)}m((o=o.apply(i,e||[])).next())})},Sd=function(i,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(m){return function(b){return E([m,b])}}function E(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(n=0)),n;)try{if(o=1,l&&(u=m[0]&2?l.return:m[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,m[1])).done)return u;switch(l=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,l=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(b){m=[6,b],l=0}finally{o=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ih=function(){function i(e,n,o){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=o}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return vd(this,void 0,void 0,function(){var e,n;return Sd(this,function(o){switch(o.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return o.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=o.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?Le.torchOffButton():Le.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},i.prototype.propagateFailure=function(e,n){var o=e?Le.torchOnFailedMessage():Le.torchOffFailedMessage();n&&(o+="; Error = "+n),this.onTorchActionFailureCallback(o)},i.prototype.reset=function(){this.isTorchOn=!1},i}(),Wb=function(){function i(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Fn.createElement("button",jt.TORCH_BUTTON_ID),this.torchController=new ih(e,this,n)}return i.prototype.render=function(e,n){var o=this;this.torchButton.innerText=Le.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(u){return vd(o,void 0,void 0,function(){return Sd(this,function(f){switch(f.label){case 0:return[4,l.torchController.flipState()];case 1:return f.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(jt.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(jt.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(jt.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(jt.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new ih(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=Le.torchOnButton(),this.torchController.reset()},i.create=function(e,n,o,l){var u=new i(n,l);return u.render(e,o),u},i}(),Yb=function(){function i(e,n,o){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Fn.createElement("button",jt.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(p){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Fn.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var u=this;this.fileScanInput.addEventListener("change",function(p){if(!(p==null||p.target==null)){var E=p.target;if(!(E.files&&E.files.length===0)){var m=E.files,b=m[0],y=b.name;u.setImageNameToButton(y),o(b)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(p){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(p){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(p){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(p){p.stopPropagation(),p.preventDefault(),u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder();var E=p.dataTransfer;if(E){var m=E.files;if(!m||m.length===0)return;for(var b=!1,y=0;y<m.length;++y){var S=m.item(y);if(S){var v=/image.*/;if(S.type.match(v)){b=!0;var N=S.name;u.setImageNameToButton(N),o(S),f.innerText=Le.dragAndDropMessage();break}}}b||(f.innerText=Le.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Le.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var o=e.substring(0,8),l=e.length,u=e.substring(l-8,l);e="".concat(o,"....").concat(u)}var f=Le.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=f},i.prototype.setInitialValueToButton=function(){var e=Le.fileSelectionChooseImage()+" - "+Le.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,n,o){var l=new i(e,n,o);return l},i}(),Xb=function(){function i(e){this.selectElement=Fn.createElement("select",jt.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var o=this.cameras.length;if(o===0)throw new Error("No cameras found");if(o===1)n.style.display="none";else{var l=Le.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var u=1,f=0,p=this.cameras;f<p.length;f++){var E=p[f],m=E.id,b=E.label==null?m:E.label;(!b||b==="")&&(b=[Le.anonymousCameraPrefix(),u++].join(" "));var y=document.createElement("option");y.value=m,y.innerText=b,this.options.push(y),this.selectElement.appendChild(y)}n.appendChild(this.selectElement),e.appendChild(n)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var n=0,o=this.options;n<o.length;n++){var l=o[n];if(l.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,n){var o=new i(n);return o.render(e),o},i}(),Gb=function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Fn.createElement("input",jt.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var o=Le.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(o),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=Le.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,n,o,l){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=o.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,n){var o=new i;return o.render(e,n),o},i}(),zt;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(zt||(zt={}));function $b(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function qb(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var Kb=function(){function i(e,n,o){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=o===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new ni(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Ad(this.verbose),this.persistedDataManager=new Fb,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,n){var o=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(u,f){if(e)e(u,f);else{if(o.lastMatchFound===u)return;o.lastMatchFound=u,o.setHeaderMessage(Le.lastMatch(u),zt.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(u,f){n&&n(u,f)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new Ju(this.getScanRegionId(),qb(this.config,this.verbose))},i.prototype.pause=function(e){(In(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,n=function(){var o=document.getElementById(e.elementId);o&&(o.innerHTML="",e.resetBasicLayout(o))};return this.html5Qrcode?new Promise(function(o,l){if(!e.html5Qrcode){o();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(u){if(!e.html5Qrcode){o();return}e.html5Qrcode.clear(),n(),o()}).catch(function(u){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",u),l(u)}):(e.html5Qrcode.clear(),n(),o())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=gn.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!gn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=gn.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=gn.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:gn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:gn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:gn.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),o=this.getScanRegionId();n.id=o,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),ni.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),u=this.getDashboardId();l.id=u,l.style.width="100%",e.appendChild(l),this.setupInitialDashboard(l)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var o=new jb;o.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},i.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},i.prototype.createCameraListUi=function(e,n,o){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(Le.cameraPermissionRequesting());var u=function(){o||l.createPermissionButton(e,n)};Ju.getCameras().then(function(f){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),f&&f.length>0?(e.removeChild(n),l.renderCameraSelection(f)):(l.setHeaderMessage(Le.noCameraFound(),zt.STATUS_WARNING),u())}).catch(function(f){l.persistedDataManager.setHasPermission(!1),o?o.disabled=!1:u(),l.setHeaderMessage(f,zt.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,n){var o=this,l=Fn.createElement("button",this.getCameraPermissionButtonId());l.innerText=Le.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,o.createCameraListUi(e,n,l)}),n.appendChild(l)},i.prototype.createPermissionsUi=function(e,n){var o=this;if(ni.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){nh.hasPermissions().then(function(l){l?o.createCameraListUi(e,n):(o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(e,n))}).catch(function(l){o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var o=document.createElement("div");o.id=this.getDashboardSectionCameraScanRegionId(),o.style.display=ni.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(o);var l=document.createElement("div");l.style.textAlign="center",o.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(o,l),this.renderFileScanUi(n)},i.prototype.renderFileScanUi=function(e){var n=ni.isFileScanType(this.currentScanType),o=this,l=function(u){if(!o.html5Qrcode)throw"html5Qrcode not defined";ni.isFileScanType(o.currentScanType)&&(o.setHeaderMessage(Le.loadingImage()),o.html5Qrcode.scanFileV2(u,!0).then(function(f){o.resetHeaderMessage(),o.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){o.setHeaderMessage(f,zt.STATUS_WARNING),o.qrCodeErrorCallback(f,yd.createFrom(f))}))};this.fileSelectionUi=Yb.create(e,n,l)},i.prototype.renderCameraSelection=function(e){var n=this,o=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var u=Gb.create(l,!1),f=function(M){var O=M.zoomFeature();if(O.isSupported()){u.setOnCameraZoomValueChangeCallback(function(k){O.apply(k)});var L=1;n.config.defaultZoomValueIfSupported&&(L=n.config.defaultZoomValueIfSupported),L=hb(L,O.min(),O.max()),u.setValues(O.min(),O.max(),L,O.step()),u.show()}},p=Xb.create(l,e),E=document.createElement("span"),m=Fn.createElement("button",jt.CAMERA_START_BUTTON_ID);m.innerText=Le.scanButtonStartScanningText(),E.appendChild(m);var b=Fn.createElement("button",jt.CAMERA_STOP_BUTTON_ID);b.innerText=Le.scanButtonStopScanningText(),b.style.display="none",b.disabled=!0,E.appendChild(b);var y,S=function(M){if(!M.torchFeature().isSupported()){y&&y.hide();return}y?y.updateTorchCapability(M.torchFeature()):y=Wb.create(E,M.torchFeature(),{display:"none",marginLeft:"5px"},function(O){o.setHeaderMessage(O,zt.STATUS_WARNING)}),y.show()};l.appendChild(E);var v=function(M){M||(m.style.display="none"),m.innerText=Le.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,M&&(m.style.display="inline-block")};if(m.addEventListener("click",function(M){m.innerText=Le.scanButtonScanningStarting(),p.disable(),m.disabled=!0,m.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!1),o.resetHeaderMessage();var O=p.getValue();o.persistedDataManager.setLastUsedCameraId(O),o.html5Qrcode.start(O,$b(o.config),o.qrCodeSuccessCallback,o.qrCodeErrorCallback).then(function(L){b.disabled=!1,b.style.display="inline-block",v(!1);var k=o.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&S(k),n.config.showZoomSliderIfSupported===!0&&f(k)}).catch(function(L){o.showHideScanTypeSwapLink(!0),p.enable(),v(!0),o.setHeaderMessage(L,zt.STATUS_WARNING)})}),p.hasSingleItem()&&m.click(),b.addEventListener("click",function(M){if(!o.html5Qrcode)throw"html5Qrcode not defined";b.disabled=!0,o.html5Qrcode.stop().then(function(O){n.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!0),p.enable(),m.disabled=!1,b.style.display="none",m.style.display="inline-block",y&&(y.reset(),y.hide()),u.removeOnCameraZoomValueChangeCallback(),u.hide(),o.insertCameraScanImageToScanRegion()}).catch(function(O){b.disabled=!1,o.setHeaderMessage(O,zt.STATUS_WARNING)})}),o.persistedDataManager.getLastUsedCameraId()){var N=o.persistedDataManager.getLastUsedCameraId();p.hasValue(N)?(p.setValue(N),m.click()):o.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,n=Le.textIfCameraScanSelected(),o=Le.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");u.style.textAlign="center";var f=Fn.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=ni.isCameraScanType(this.currentScanType)?n:o,f.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,ni.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),f.innerText=o,e.currentScanType=li.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),f.innerText=n,e.currentScanType=li.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),u.appendChild(f),l.appendChild(u)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){nh.hasPermissions().then(function(o){if(o){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(o){n.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,n){n||(n=zt.STATUS_DEFAULT);var o=this.getHeaderMessageDiv();switch(o.innerText=e,o.style.display="block",n){case zt.STATUS_SUCCESS:o.style.background="rgba(106, 175, 80, 0.26)",o.style.color="#477735";break;case zt.STATUS_WARNING:o.style.background="rgba(203, 36, 49, 0.14)",o.style.color="#cb2431";break;case zt.STATUS_DEFAULT:default:o.style.background="rgba(0, 0, 0, 0)",o.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(o){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Pb,this.cameraScanImage.alt=Le.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(o){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Bb,this.fileScanImage.alt=Le.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return jt.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return jt.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i}(),ml=!1,xl=!1,Pi=[],El=-1;function Zb(i){Qb(i)}function Qb(i){Pi.includes(i)||Pi.push(i),ew()}function Jb(i){let e=Pi.indexOf(i);e!==-1&&e>El&&Pi.splice(e,1)}function ew(){!xl&&!ml&&(ml=!0,queueMicrotask(tw))}function tw(){ml=!1,xl=!0;for(let i=0;i<Pi.length;i++)Pi[i](),El=i;Pi.length=0,El=-1,xl=!1}var Pr,Gi,Br,Td,bl=!0;function nw(i){bl=!1,i(),bl=!0}function iw(i){Pr=i.reactive,Br=i.release,Gi=e=>i.effect(e,{scheduler:n=>{bl?Zb(n):n()}}),Td=i.raw}function rh(i){Gi=i}function rw(i){let e=()=>{};return[o=>{let l=Gi(o);return i._x_effects||(i._x_effects=new Set,i._x_runEffects=()=>{i._x_effects.forEach(u=>u())}),i._x_effects.add(l),e=()=>{l!==void 0&&(i._x_effects.delete(l),Br(l))},l},()=>{e()}]}function Id(i,e){let n=!0,o,l=Gi(()=>{let u=i();JSON.stringify(u),n?o=u:queueMicrotask(()=>{e(u,o),o=u}),n=!1});return()=>Br(l)}var Od=[],Nd=[],Md=[];function sw(i){Md.push(i)}function sc(i,e){typeof e=="function"?(i._x_cleanups||(i._x_cleanups=[]),i._x_cleanups.push(e)):(e=i,Nd.push(e))}function Dd(i){Od.push(i)}function Rd(i,e,n){i._x_attributeCleanups||(i._x_attributeCleanups={}),i._x_attributeCleanups[e]||(i._x_attributeCleanups[e]=[]),i._x_attributeCleanups[e].push(n)}function Ld(i,e){i._x_attributeCleanups&&Object.entries(i._x_attributeCleanups).forEach(([n,o])=>{(e===void 0||e.includes(n))&&(o.forEach(l=>l()),delete i._x_attributeCleanups[n])})}function ow(i){var e,n;for((e=i._x_effects)==null||e.forEach(Jb);(n=i._x_cleanups)!=null&&n.length;)i._x_cleanups.pop()()}var oc=new MutationObserver(uc),ac=!1;function lc(){oc.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ac=!0}function Pd(){aw(),oc.disconnect(),ac=!1}var es=[];function aw(){let i=oc.takeRecords();es.push(()=>i.length>0&&uc(i));let e=es.length;queueMicrotask(()=>{if(es.length===e)for(;es.length>0;)es.shift()()})}function Ge(i){if(!ac)return i();Pd();let e=i();return lc(),e}var cc=!1,_o=[];function lw(){cc=!0}function cw(){cc=!1,uc(_o),_o=[]}function uc(i){if(cc){_o=_o.concat(i);return}let e=[],n=new Set,o=new Map,l=new Map;for(let u=0;u<i.length;u++)if(!i[u].target._x_ignoreMutationObserver&&(i[u].type==="childList"&&(i[u].removedNodes.forEach(f=>{f.nodeType===1&&f._x_marker&&n.add(f)}),i[u].addedNodes.forEach(f=>{if(f.nodeType===1){if(n.has(f)){n.delete(f);return}f._x_marker||e.push(f)}})),i[u].type==="attributes")){let f=i[u].target,p=i[u].attributeName,E=i[u].oldValue,m=()=>{o.has(f)||o.set(f,[]),o.get(f).push({name:p,value:f.getAttribute(p)})},b=()=>{l.has(f)||l.set(f,[]),l.get(f).push(p)};f.hasAttribute(p)&&E===null?m():f.hasAttribute(p)?(b(),m()):b()}l.forEach((u,f)=>{Ld(f,u)}),o.forEach((u,f)=>{Od.forEach(p=>p(f,u))});for(let u of n)e.some(f=>f.contains(u))||Nd.forEach(f=>f(u));for(let u of e)u.isConnected&&Md.forEach(f=>f(u));e=null,n=null,o=null,l=null}function Bd(i){return _s(Tr(i))}function Cs(i,e,n){return i._x_dataStack=[e,...Tr(n||i)],()=>{i._x_dataStack=i._x_dataStack.filter(o=>o!==e)}}function Tr(i){return i._x_dataStack?i._x_dataStack:typeof ShadowRoot=="function"&&i instanceof ShadowRoot?Tr(i.host):i.parentNode?Tr(i.parentNode):[]}function _s(i){return new Proxy({objects:i},uw)}var uw={ownKeys({objects:i}){return Array.from(new Set(i.flatMap(e=>Object.keys(e))))},has({objects:i},e){return e==Symbol.unscopables?!1:i.some(n=>Object.prototype.hasOwnProperty.call(n,e)||Reflect.has(n,e))},get({objects:i},e,n){return e=="toJSON"?hw:Reflect.get(i.find(o=>Reflect.has(o,e))||{},e,n)},set({objects:i},e,n,o){const l=i.find(f=>Object.prototype.hasOwnProperty.call(f,e))||i[i.length-1],u=Object.getOwnPropertyDescriptor(l,e);return u!=null&&u.set&&(u!=null&&u.get)?u.set.call(o,n)||!0:Reflect.set(l,e,n)}};function hw(){return Reflect.ownKeys(this).reduce((e,n)=>(e[n]=Reflect.get(this,n),e),{})}function kd(i){let e=o=>typeof o=="object"&&!Array.isArray(o)&&o!==null,n=(o,l="")=>{Object.entries(Object.getOwnPropertyDescriptors(o)).forEach(([u,{value:f,enumerable:p}])=>{if(p===!1||f===void 0||typeof f=="object"&&f!==null&&f.__v_skip)return;let E=l===""?u:`${l}.${u}`;typeof f=="object"&&f!==null&&f._x_interceptor?o[u]=f.initialize(i,E,u):e(f)&&f!==o&&!(f instanceof Element)&&n(f,E)})};return n(i)}function Fd(i,e=()=>{}){let n={initialValue:void 0,_x_interceptor:!0,initialize(o,l,u){return i(this.initialValue,()=>fw(o,l),f=>wl(o,l,f),l,u)}};return e(n),o=>{if(typeof o=="object"&&o!==null&&o._x_interceptor){let l=n.initialize.bind(n);n.initialize=(u,f,p)=>{let E=o.initialize(u,f,p);return n.initialValue=E,l(u,f,p)}}else n.initialValue=o;return n}}function fw(i,e){return e.split(".").reduce((n,o)=>n[o],i)}function wl(i,e,n){if(typeof e=="string"&&(e=e.split(".")),e.length===1)i[e[0]]=n;else{if(e.length===0)throw error;return i[e[0]]||(i[e[0]]={}),wl(i[e[0]],e.slice(1),n)}}var Ud={};function En(i,e){Ud[i]=e}function yl(i,e){let n=dw(e);return Object.entries(Ud).forEach(([o,l])=>{Object.defineProperty(i,`$${o}`,{get(){return l(e,n)},enumerable:!1})}),i}function dw(i){let[e,n]=Yd(i),o={interceptor:Fd,...e};return sc(i,n),o}function gw(i,e,n,...o){try{return n(...o)}catch(l){ps(l,i,e)}}function ps(i,e,n=void 0){i=Object.assign(i??{message:"No error message given."},{el:e,expression:n}),console.warn(`Alpine Expression Error: ${i.message}

${n?'Expression: "'+n+`"

`:""}`,e),setTimeout(()=>{throw i},0)}var go=!0;function zd(i){let e=go;go=!1;let n=i();return go=e,n}function Bi(i,e,n={}){let o;return vt(i,e)(l=>o=l,n),o}function vt(...i){return jd(...i)}var jd=Hd;function pw(i){jd=i}function Hd(i,e){let n={};yl(n,i);let o=[n,...Tr(i)],l=typeof e=="function"?mw(o,e):Ew(o,e,i);return gw.bind(null,i,e,l)}function mw(i,e){return(n=()=>{},{scope:o={},params:l=[]}={})=>{let u=e.apply(_s([o,...i]),l);vo(n,u)}}var Pa={};function xw(i,e){if(Pa[i])return Pa[i];let n=Object.getPrototypeOf(async function(){}).constructor,o=/^[\n\s]*if.*\(.*\)/.test(i.trim())||/^(let|const)\s/.test(i.trim())?`(async()=>{ ${i} })()`:i,u=(()=>{try{let f=new n(["__self","scope"],`with (scope) { __self.result = ${o} }; __self.finished = true; return __self.result;`);return Object.defineProperty(f,"name",{value:`[Alpine] ${i}`}),f}catch(f){return ps(f,e,i),Promise.resolve()}})();return Pa[i]=u,u}function Ew(i,e,n){let o=xw(e,n);return(l=()=>{},{scope:u={},params:f=[]}={})=>{o.result=void 0,o.finished=!1;let p=_s([u,...i]);if(typeof o=="function"){let E=o(o,p).catch(m=>ps(m,n,e));o.finished?(vo(l,o.result,p,f,n),o.result=void 0):E.then(m=>{vo(l,m,p,f,n)}).catch(m=>ps(m,n,e)).finally(()=>o.result=void 0)}}}function vo(i,e,n,o,l){if(go&&typeof e=="function"){let u=e.apply(n,o);u instanceof Promise?u.then(f=>vo(i,f,n,o)).catch(f=>ps(f,l,e)):i(u)}else typeof e=="object"&&e instanceof Promise?e.then(u=>i(u)):i(e)}var hc="x-";function kr(i=""){return hc+i}function bw(i){hc=i}var So={};function st(i,e){return So[i]=e,{before(n){if(!So[n]){console.warn(String.raw`Cannot find directive \`${n}\`. \`${i}\` will use the default order of execution`);return}const o=Mi.indexOf(n);Mi.splice(o>=0?o:Mi.indexOf("DEFAULT"),0,i)}}}function ww(i){return Object.keys(So).includes(i)}function fc(i,e,n){if(e=Array.from(e),i._x_virtualDirectives){let u=Object.entries(i._x_virtualDirectives).map(([p,E])=>({name:p,value:E})),f=Vd(u);u=u.map(p=>f.find(E=>E.name===p.name)?{name:`x-bind:${p.name}`,value:`"${p.value}"`}:p),e=e.concat(u)}let o={};return e.map($d((u,f)=>o[u]=f)).filter(Kd).map(Cw(o,n)).sort(_w).map(u=>Aw(i,u))}function Vd(i){return Array.from(i).map($d()).filter(e=>!Kd(e))}var Al=!1,os=new Map,Wd=Symbol();function yw(i){Al=!0;let e=Symbol();Wd=e,os.set(e,[]);let n=()=>{for(;os.get(e).length;)os.get(e).shift()();os.delete(e)},o=()=>{Al=!1,n()};i(n),o()}function Yd(i){let e=[],n=p=>e.push(p),[o,l]=rw(i);return e.push(l),[{Alpine:vs,effect:o,cleanup:n,evaluateLater:vt.bind(vt,i),evaluate:Bi.bind(Bi,i)},()=>e.forEach(p=>p())]}function Aw(i,e){let n=()=>{},o=So[e.type]||n,[l,u]=Yd(i);Rd(i,e.original,u);let f=()=>{i._x_ignore||i._x_ignoreSelf||(o.inline&&o.inline(i,e,l),o=o.bind(o,i,e,l),Al?os.get(Wd).push(o):o())};return f.runCleanups=u,f}var Xd=(i,e)=>({name:n,value:o})=>(n.startsWith(i)&&(n=n.replace(i,e)),{name:n,value:o}),Gd=i=>i;function $d(i=()=>{}){return({name:e,value:n})=>{let{name:o,value:l}=qd.reduce((u,f)=>f(u),{name:e,value:n});return o!==e&&i(o,e),{name:o,value:l}}}var qd=[];function dc(i){qd.push(i)}function Kd({name:i}){return Zd().test(i)}var Zd=()=>new RegExp(`^${hc}([^:^.]+)\\b`);function Cw(i,e){return({name:n,value:o})=>{let l=n.match(Zd()),u=n.match(/:([a-zA-Z0-9\-_:]+)/),f=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],p=e||i[n]||n;return{type:l?l[1]:null,value:u?u[1]:null,modifiers:f.map(E=>E.replace(".","")),expression:o,original:p}}}var Cl="DEFAULT",Mi=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Cl,"teleport"];function _w(i,e){let n=Mi.indexOf(i.type)===-1?Cl:i.type,o=Mi.indexOf(e.type)===-1?Cl:e.type;return Mi.indexOf(n)-Mi.indexOf(o)}function us(i,e,n={}){i.dispatchEvent(new CustomEvent(e,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function Vi(i,e){if(typeof ShadowRoot=="function"&&i instanceof ShadowRoot){Array.from(i.children).forEach(l=>Vi(l,e));return}let n=!1;if(e(i,()=>n=!0),n)return;let o=i.firstElementChild;for(;o;)Vi(o,e),o=o.nextElementSibling}function on(i,...e){console.warn(`Alpine Warning: ${i}`,...e)}var sh=!1;function vw(){sh&&on("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),sh=!0,document.body||on("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),us(document,"alpine:init"),us(document,"alpine:initializing"),lc(),sw(e=>Wn(e,Vi)),sc(e=>Ur(e)),Dd((e,n)=>{fc(e,n).forEach(o=>o())});let i=e=>!Yo(e.parentElement,!0);Array.from(document.querySelectorAll(e1().join(","))).filter(i).forEach(e=>{Wn(e)}),us(document,"alpine:initialized"),setTimeout(()=>{Ow()})}var gc=[],Qd=[];function Jd(){return gc.map(i=>i())}function e1(){return gc.concat(Qd).map(i=>i())}function t1(i){gc.push(i)}function n1(i){Qd.push(i)}function Yo(i,e=!1){return Fr(i,n=>{if((e?e1():Jd()).some(l=>n.matches(l)))return!0})}function Fr(i,e){if(i){if(e(i))return i;if(i._x_teleportBack&&(i=i._x_teleportBack),!!i.parentElement)return Fr(i.parentElement,e)}}function Sw(i){return Jd().some(e=>i.matches(e))}var i1=[];function Tw(i){i1.push(i)}var Iw=1;function Wn(i,e=Vi,n=()=>{}){Fr(i,o=>o._x_ignore)||yw(()=>{e(i,(o,l)=>{o._x_marker||(n(o,l),i1.forEach(u=>u(o,l)),fc(o,o.attributes).forEach(u=>u()),o._x_ignore||(o._x_marker=Iw++),o._x_ignore&&l())})})}function Ur(i,e=Vi){e(i,n=>{ow(n),Ld(n),delete n._x_marker})}function Ow(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([e,n,o])=>{ww(n)||o.some(l=>{if(document.querySelector(l))return on(`found "${l}", but missing ${e} plugin`),!0})})}var _l=[],pc=!1;function mc(i=()=>{}){return queueMicrotask(()=>{pc||setTimeout(()=>{vl()})}),new Promise(e=>{_l.push(()=>{i(),e()})})}function vl(){for(pc=!1;_l.length;)_l.shift()()}function Nw(){pc=!0}function xc(i,e){return Array.isArray(e)?oh(i,e.join(" ")):typeof e=="object"&&e!==null?Mw(i,e):typeof e=="function"?xc(i,e()):oh(i,e)}function oh(i,e){let n=l=>l.split(" ").filter(u=>!i.classList.contains(u)).filter(Boolean),o=l=>(i.classList.add(...l),()=>{i.classList.remove(...l)});return e=e===!0?e="":e||"",o(n(e))}function Mw(i,e){let n=p=>p.split(" ").filter(Boolean),o=Object.entries(e).flatMap(([p,E])=>E?n(p):!1).filter(Boolean),l=Object.entries(e).flatMap(([p,E])=>E?!1:n(p)).filter(Boolean),u=[],f=[];return l.forEach(p=>{i.classList.contains(p)&&(i.classList.remove(p),f.push(p))}),o.forEach(p=>{i.classList.contains(p)||(i.classList.add(p),u.push(p))}),()=>{f.forEach(p=>i.classList.add(p)),u.forEach(p=>i.classList.remove(p))}}function Xo(i,e){return typeof e=="object"&&e!==null?Dw(i,e):Rw(i,e)}function Dw(i,e){let n={};return Object.entries(e).forEach(([o,l])=>{n[o]=i.style[o],o.startsWith("--")||(o=Lw(o)),i.style.setProperty(o,l)}),setTimeout(()=>{i.style.length===0&&i.removeAttribute("style")}),()=>{Xo(i,n)}}function Rw(i,e){let n=i.getAttribute("style",e);return i.setAttribute("style",e),()=>{i.setAttribute("style",n||"")}}function Lw(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Sl(i,e=()=>{}){let n=!1;return function(){n?e.apply(this,arguments):(n=!0,i.apply(this,arguments))}}st("transition",(i,{value:e,modifiers:n,expression:o},{evaluate:l})=>{typeof o=="function"&&(o=l(o)),o!==!1&&(!o||typeof o=="boolean"?Bw(i,n,e):Pw(i,o,e))});function Pw(i,e,n){r1(i,xc,""),{enter:l=>{i._x_transition.enter.during=l},"enter-start":l=>{i._x_transition.enter.start=l},"enter-end":l=>{i._x_transition.enter.end=l},leave:l=>{i._x_transition.leave.during=l},"leave-start":l=>{i._x_transition.leave.start=l},"leave-end":l=>{i._x_transition.leave.end=l}}[n](e)}function Bw(i,e,n){r1(i,Xo);let o=!e.includes("in")&&!e.includes("out")&&!n,l=o||e.includes("in")||["enter"].includes(n),u=o||e.includes("out")||["leave"].includes(n);e.includes("in")&&!o&&(e=e.filter((L,k)=>k<e.indexOf("out"))),e.includes("out")&&!o&&(e=e.filter((L,k)=>k>e.indexOf("out")));let f=!e.includes("opacity")&&!e.includes("scale"),p=f||e.includes("opacity"),E=f||e.includes("scale"),m=p?0:1,b=E?ts(e,"scale",95)/100:1,y=ts(e,"delay",0)/1e3,S=ts(e,"origin","center"),v="opacity, transform",N=ts(e,"duration",150)/1e3,M=ts(e,"duration",75)/1e3,O="cubic-bezier(0.4, 0.0, 0.2, 1)";l&&(i._x_transition.enter.during={transformOrigin:S,transitionDelay:`${y}s`,transitionProperty:v,transitionDuration:`${N}s`,transitionTimingFunction:O},i._x_transition.enter.start={opacity:m,transform:`scale(${b})`},i._x_transition.enter.end={opacity:1,transform:"scale(1)"}),u&&(i._x_transition.leave.during={transformOrigin:S,transitionDelay:`${y}s`,transitionProperty:v,transitionDuration:`${M}s`,transitionTimingFunction:O},i._x_transition.leave.start={opacity:1,transform:"scale(1)"},i._x_transition.leave.end={opacity:m,transform:`scale(${b})`})}function r1(i,e,n={}){i._x_transition||(i._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(o=()=>{},l=()=>{}){Tl(i,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},o,l)},out(o=()=>{},l=()=>{}){Tl(i,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},o,l)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(i,e,n,o){const l=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let u=()=>l(n);if(e){i._x_transition&&(i._x_transition.enter||i._x_transition.leave)?i._x_transition.enter&&(Object.entries(i._x_transition.enter.during).length||Object.entries(i._x_transition.enter.start).length||Object.entries(i._x_transition.enter.end).length)?i._x_transition.in(n):u():i._x_transition?i._x_transition.in(n):u();return}i._x_hidePromise=i._x_transition?new Promise((f,p)=>{i._x_transition.out(()=>{},()=>f(o)),i._x_transitioning&&i._x_transitioning.beforeCancel(()=>p({isFromCancelledTransition:!0}))}):Promise.resolve(o),queueMicrotask(()=>{let f=s1(i);f?(f._x_hideChildren||(f._x_hideChildren=[]),f._x_hideChildren.push(i)):l(()=>{let p=E=>{let m=Promise.all([E._x_hidePromise,...(E._x_hideChildren||[]).map(p)]).then(([b])=>b==null?void 0:b());return delete E._x_hidePromise,delete E._x_hideChildren,m};p(i).catch(E=>{if(!E.isFromCancelledTransition)throw E})})})};function s1(i){let e=i.parentNode;if(e)return e._x_hidePromise?e:s1(e)}function Tl(i,e,{during:n,start:o,end:l}={},u=()=>{},f=()=>{}){if(i._x_transitioning&&i._x_transitioning.cancel(),Object.keys(n).length===0&&Object.keys(o).length===0&&Object.keys(l).length===0){u(),f();return}let p,E,m;kw(i,{start(){p=e(i,o)},during(){E=e(i,n)},before:u,end(){p(),m=e(i,l)},after:f,cleanup(){E(),m()}})}function kw(i,e){let n,o,l,u=Sl(()=>{Ge(()=>{n=!0,o||e.before(),l||(e.end(),vl()),e.after(),i.isConnected&&e.cleanup(),delete i._x_transitioning})});i._x_transitioning={beforeCancels:[],beforeCancel(f){this.beforeCancels.push(f)},cancel:Sl(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();u()}),finish:u},Ge(()=>{e.start(),e.during()}),Nw(),requestAnimationFrame(()=>{if(n)return;let f=Number(getComputedStyle(i).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,p=Number(getComputedStyle(i).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;f===0&&(f=Number(getComputedStyle(i).animationDuration.replace("s",""))*1e3),Ge(()=>{e.before()}),o=!0,requestAnimationFrame(()=>{n||(Ge(()=>{e.end()}),vl(),setTimeout(i._x_transitioning.finish,f+p),l=!0)})})}function ts(i,e,n){if(i.indexOf(e)===-1)return n;const o=i[i.indexOf(e)+1];if(!o||e==="scale"&&isNaN(o))return n;if(e==="duration"||e==="delay"){let l=o.match(/([0-9]+)ms/);if(l)return l[1]}return e==="origin"&&["top","right","left","center","bottom"].includes(i[i.indexOf(e)+2])?[o,i[i.indexOf(e)+2]].join(" "):o}var ci=!1;function gi(i,e=()=>{}){return(...n)=>ci?e(...n):i(...n)}function Fw(i){return(...e)=>ci&&i(...e)}var o1=[];function Go(i){o1.push(i)}function Uw(i,e){o1.forEach(n=>n(i,e)),ci=!0,a1(()=>{Wn(e,(n,o)=>{o(n,()=>{})})}),ci=!1}var Il=!1;function zw(i,e){e._x_dataStack||(e._x_dataStack=i._x_dataStack),ci=!0,Il=!0,a1(()=>{jw(e)}),ci=!1,Il=!1}function jw(i){let e=!1;Wn(i,(o,l)=>{Vi(o,(u,f)=>{if(e&&Sw(u))return f();e=!0,l(u,f)})})}function a1(i){let e=Gi;rh((n,o)=>{let l=e(n);return Br(l),()=>{}}),i(),rh(e)}function l1(i,e,n,o=[]){switch(i._x_bindings||(i._x_bindings=Pr({})),i._x_bindings[e]=n,e=o.includes("camel")?qw(e):e,e){case"value":Hw(i,n);break;case"style":Ww(i,n);break;case"class":Vw(i,n);break;case"selected":case"checked":Yw(i,e,n);break;default:c1(i,e,n);break}}function Hw(i,e){if(f1(i))i.attributes.value===void 0&&(i.value=e),window.fromModel&&(typeof e=="boolean"?i.checked=po(i.value)===e:i.checked=ah(i.value,e));else if(Ec(i))Number.isInteger(e)?i.value=e:!Array.isArray(e)&&typeof e!="boolean"&&![null,void 0].includes(e)?i.value=String(e):Array.isArray(e)?i.checked=e.some(n=>ah(n,i.value)):i.checked=!!e;else if(i.tagName==="SELECT")$w(i,e);else{if(i.value===e)return;i.value=e===void 0?"":e}}function Vw(i,e){i._x_undoAddedClasses&&i._x_undoAddedClasses(),i._x_undoAddedClasses=xc(i,e)}function Ww(i,e){i._x_undoAddedStyles&&i._x_undoAddedStyles(),i._x_undoAddedStyles=Xo(i,e)}function Yw(i,e,n){c1(i,e,n),Gw(i,e,n)}function c1(i,e,n){[null,void 0,!1].includes(n)&&Zw(e)?i.removeAttribute(e):(u1(e)&&(n=e),Xw(i,e,n))}function Xw(i,e,n){i.getAttribute(e)!=n&&i.setAttribute(e,n)}function Gw(i,e,n){i[e]!==n&&(i[e]=n)}function $w(i,e){const n=[].concat(e).map(o=>o+"");Array.from(i.options).forEach(o=>{o.selected=n.includes(o.value)})}function qw(i){return i.toLowerCase().replace(/-(\w)/g,(e,n)=>n.toUpperCase())}function ah(i,e){return i==e}function po(i){return[1,"1","true","on","yes",!0].includes(i)?!0:[0,"0","false","off","no",!1].includes(i)?!1:i?!!i:null}var Kw=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function u1(i){return Kw.has(i)}function Zw(i){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(i)}function Qw(i,e,n){return i._x_bindings&&i._x_bindings[e]!==void 0?i._x_bindings[e]:h1(i,e,n)}function Jw(i,e,n,o=!0){if(i._x_bindings&&i._x_bindings[e]!==void 0)return i._x_bindings[e];if(i._x_inlineBindings&&i._x_inlineBindings[e]!==void 0){let l=i._x_inlineBindings[e];return l.extract=o,zd(()=>Bi(i,l.expression))}return h1(i,e,n)}function h1(i,e,n){let o=i.getAttribute(e);return o===null?typeof n=="function"?n():n:o===""?!0:u1(e)?!![e,"true"].includes(o):o}function Ec(i){return i.type==="checkbox"||i.localName==="ui-checkbox"||i.localName==="ui-switch"}function f1(i){return i.type==="radio"||i.localName==="ui-radio"}function d1(i,e){var n;return function(){var o=this,l=arguments,u=function(){n=null,i.apply(o,l)};clearTimeout(n),n=setTimeout(u,e)}}function g1(i,e){let n;return function(){let o=this,l=arguments;n||(i.apply(o,l),n=!0,setTimeout(()=>n=!1,e))}}function p1({get:i,set:e},{get:n,set:o}){let l=!0,u,f=Gi(()=>{let p=i(),E=n();if(l)o(Ba(p)),l=!1;else{let m=JSON.stringify(p),b=JSON.stringify(E);m!==u?o(Ba(p)):m!==b&&e(Ba(E))}u=JSON.stringify(i()),JSON.stringify(n())});return()=>{Br(f)}}function Ba(i){return typeof i=="object"?JSON.parse(JSON.stringify(i)):i}function ey(i){(Array.isArray(i)?i:[i]).forEach(n=>n(vs))}var Si={},lh=!1;function ty(i,e){if(lh||(Si=Pr(Si),lh=!0),e===void 0)return Si[i];Si[i]=e,kd(Si[i]),typeof e=="object"&&e!==null&&e.hasOwnProperty("init")&&typeof e.init=="function"&&Si[i].init()}function ny(){return Si}var m1={};function iy(i,e){let n=typeof e!="function"?()=>e:e;return i instanceof Element?x1(i,n()):(m1[i]=n,()=>{})}function ry(i){return Object.entries(m1).forEach(([e,n])=>{Object.defineProperty(i,e,{get(){return(...o)=>n(...o)}})}),i}function x1(i,e,n){let o=[];for(;o.length;)o.pop()();let l=Object.entries(e).map(([f,p])=>({name:f,value:p})),u=Vd(l);return l=l.map(f=>u.find(p=>p.name===f.name)?{name:`x-bind:${f.name}`,value:`"${f.value}"`}:f),fc(i,l,n).map(f=>{o.push(f.runCleanups),f()}),()=>{for(;o.length;)o.pop()()}}var E1={};function sy(i,e){E1[i]=e}function oy(i,e){return Object.entries(E1).forEach(([n,o])=>{Object.defineProperty(i,n,{get(){return(...l)=>o.bind(e)(...l)},enumerable:!1})}),i}var ay={get reactive(){return Pr},get release(){return Br},get effect(){return Gi},get raw(){return Td},version:"3.14.9",flushAndStopDeferringMutations:cw,dontAutoEvaluateFunctions:zd,disableEffectScheduling:nw,startObservingMutations:lc,stopObservingMutations:Pd,setReactivityEngine:iw,onAttributeRemoved:Rd,onAttributesAdded:Dd,closestDataStack:Tr,skipDuringClone:gi,onlyDuringClone:Fw,addRootSelector:t1,addInitSelector:n1,interceptClone:Go,addScopeToNode:Cs,deferMutations:lw,mapAttributes:dc,evaluateLater:vt,interceptInit:Tw,setEvaluator:pw,mergeProxies:_s,extractProp:Jw,findClosest:Fr,onElRemoved:sc,closestRoot:Yo,destroyTree:Ur,interceptor:Fd,transition:Tl,setStyles:Xo,mutateDom:Ge,directive:st,entangle:p1,throttle:g1,debounce:d1,evaluate:Bi,initTree:Wn,nextTick:mc,prefixed:kr,prefix:bw,plugin:ey,magic:En,store:ty,start:vw,clone:zw,cloneNode:Uw,bound:Qw,$data:Bd,watch:Id,walk:Vi,data:sy,bind:iy},vs=ay;function ly(i,e){const n=Object.create(null),o=i.split(",");for(let l=0;l<o.length;l++)n[o[l]]=!0;return l=>!!n[l]}var cy=Object.freeze({}),uy=Object.prototype.hasOwnProperty,$o=(i,e)=>uy.call(i,e),ki=Array.isArray,hs=i=>b1(i)==="[object Map]",hy=i=>typeof i=="string",bc=i=>typeof i=="symbol",qo=i=>i!==null&&typeof i=="object",fy=Object.prototype.toString,b1=i=>fy.call(i),w1=i=>b1(i).slice(8,-1),wc=i=>hy(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,dy=i=>{const e=Object.create(null);return n=>e[n]||(e[n]=i(n))},gy=dy(i=>i.charAt(0).toUpperCase()+i.slice(1)),y1=(i,e)=>i!==e&&(i===i||e===e),Ol=new WeakMap,ns=[],On,Fi=Symbol("iterate"),Nl=Symbol("Map key iterate");function py(i){return i&&i._isEffect===!0}function my(i,e=cy){py(i)&&(i=i.raw);const n=by(i,e);return e.lazy||n(),n}function xy(i){i.active&&(A1(i),i.options.onStop&&i.options.onStop(),i.active=!1)}var Ey=0;function by(i,e){const n=function(){if(!n.active)return i();if(!ns.includes(n)){A1(n);try{return yy(),ns.push(n),On=n,i()}finally{ns.pop(),C1(),On=ns[ns.length-1]}}};return n.id=Ey++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=i,n.deps=[],n.options=e,n}function A1(i){const{deps:e}=i;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(i);e.length=0}}var Ir=!0,yc=[];function wy(){yc.push(Ir),Ir=!1}function yy(){yc.push(Ir),Ir=!0}function C1(){const i=yc.pop();Ir=i===void 0?!0:i}function pn(i,e,n){if(!Ir||On===void 0)return;let o=Ol.get(i);o||Ol.set(i,o=new Map);let l=o.get(n);l||o.set(n,l=new Set),l.has(On)||(l.add(On),On.deps.push(l),On.options.onTrack&&On.options.onTrack({effect:On,target:i,type:e,key:n}))}function ui(i,e,n,o,l,u){const f=Ol.get(i);if(!f)return;const p=new Set,E=b=>{b&&b.forEach(y=>{(y!==On||y.allowRecurse)&&p.add(y)})};if(e==="clear")f.forEach(E);else if(n==="length"&&ki(i))f.forEach((b,y)=>{(y==="length"||y>=o)&&E(b)});else switch(n!==void 0&&E(f.get(n)),e){case"add":ki(i)?wc(n)&&E(f.get("length")):(E(f.get(Fi)),hs(i)&&E(f.get(Nl)));break;case"delete":ki(i)||(E(f.get(Fi)),hs(i)&&E(f.get(Nl)));break;case"set":hs(i)&&E(f.get(Fi));break}const m=b=>{b.options.onTrigger&&b.options.onTrigger({effect:b,target:i,key:n,type:e,newValue:o,oldValue:l,oldTarget:u}),b.options.scheduler?b.options.scheduler(b):b()};p.forEach(m)}var Ay=ly("__proto__,__v_isRef,__isVue"),_1=new Set(Object.getOwnPropertyNames(Symbol).map(i=>Symbol[i]).filter(bc)),Cy=v1(),_y=v1(!0),ch=vy();function vy(){const i={};return["includes","indexOf","lastIndexOf"].forEach(e=>{i[e]=function(...n){const o=We(this);for(let u=0,f=this.length;u<f;u++)pn(o,"get",u+"");const l=o[e](...n);return l===-1||l===!1?o[e](...n.map(We)):l}}),["push","pop","shift","unshift","splice"].forEach(e=>{i[e]=function(...n){wy();const o=We(this)[e].apply(this,n);return C1(),o}}),i}function v1(i=!1,e=!1){return function(o,l,u){if(l==="__v_isReactive")return!i;if(l==="__v_isReadonly")return i;if(l==="__v_raw"&&u===(i?e?Uy:O1:e?Fy:I1).get(o))return o;const f=ki(o);if(!i&&f&&$o(ch,l))return Reflect.get(ch,l,u);const p=Reflect.get(o,l,u);return(bc(l)?_1.has(l):Ay(l))||(i||pn(o,"get",l),e)?p:Ml(p)?!f||!wc(l)?p.value:p:qo(p)?i?N1(p):vc(p):p}}var Sy=Ty();function Ty(i=!1){return function(n,o,l,u){let f=n[o];if(!i&&(l=We(l),f=We(f),!ki(n)&&Ml(f)&&!Ml(l)))return f.value=l,!0;const p=ki(n)&&wc(o)?Number(o)<n.length:$o(n,o),E=Reflect.set(n,o,l,u);return n===We(u)&&(p?y1(l,f)&&ui(n,"set",o,l,f):ui(n,"add",o,l)),E}}function Iy(i,e){const n=$o(i,e),o=i[e],l=Reflect.deleteProperty(i,e);return l&&n&&ui(i,"delete",e,void 0,o),l}function Oy(i,e){const n=Reflect.has(i,e);return(!bc(e)||!_1.has(e))&&pn(i,"has",e),n}function Ny(i){return pn(i,"iterate",ki(i)?"length":Fi),Reflect.ownKeys(i)}var My={get:Cy,set:Sy,deleteProperty:Iy,has:Oy,ownKeys:Ny},Dy={get:_y,set(i,e){return console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,i),!0},deleteProperty(i,e){return console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,i),!0}},Ac=i=>qo(i)?vc(i):i,Cc=i=>qo(i)?N1(i):i,_c=i=>i,Ko=i=>Reflect.getPrototypeOf(i);function Ws(i,e,n=!1,o=!1){i=i.__v_raw;const l=We(i),u=We(e);e!==u&&!n&&pn(l,"get",e),!n&&pn(l,"get",u);const{has:f}=Ko(l),p=o?_c:n?Cc:Ac;if(f.call(l,e))return p(i.get(e));if(f.call(l,u))return p(i.get(u));i!==l&&i.get(e)}function Ys(i,e=!1){const n=this.__v_raw,o=We(n),l=We(i);return i!==l&&!e&&pn(o,"has",i),!e&&pn(o,"has",l),i===l?n.has(i):n.has(i)||n.has(l)}function Xs(i,e=!1){return i=i.__v_raw,!e&&pn(We(i),"iterate",Fi),Reflect.get(i,"size",i)}function uh(i){i=We(i);const e=We(this);return Ko(e).has.call(e,i)||(e.add(i),ui(e,"add",i,i)),this}function hh(i,e){e=We(e);const n=We(this),{has:o,get:l}=Ko(n);let u=o.call(n,i);u?T1(n,o,i):(i=We(i),u=o.call(n,i));const f=l.call(n,i);return n.set(i,e),u?y1(e,f)&&ui(n,"set",i,e,f):ui(n,"add",i,e),this}function fh(i){const e=We(this),{has:n,get:o}=Ko(e);let l=n.call(e,i);l?T1(e,n,i):(i=We(i),l=n.call(e,i));const u=o?o.call(e,i):void 0,f=e.delete(i);return l&&ui(e,"delete",i,void 0,u),f}function dh(){const i=We(this),e=i.size!==0,n=hs(i)?new Map(i):new Set(i),o=i.clear();return e&&ui(i,"clear",void 0,void 0,n),o}function Gs(i,e){return function(o,l){const u=this,f=u.__v_raw,p=We(f),E=e?_c:i?Cc:Ac;return!i&&pn(p,"iterate",Fi),f.forEach((m,b)=>o.call(l,E(m),E(b),u))}}function $s(i,e,n){return function(...o){const l=this.__v_raw,u=We(l),f=hs(u),p=i==="entries"||i===Symbol.iterator&&f,E=i==="keys"&&f,m=l[i](...o),b=n?_c:e?Cc:Ac;return!e&&pn(u,"iterate",E?Nl:Fi),{next(){const{value:y,done:S}=m.next();return S?{value:y,done:S}:{value:p?[b(y[0]),b(y[1])]:b(y),done:S}},[Symbol.iterator](){return this}}}}function ii(i){return function(...e){{const n=e[0]?`on key "${e[0]}" `:"";console.warn(`${gy(i)} operation ${n}failed: target is readonly.`,We(this))}return i==="delete"?!1:this}}function Ry(){const i={get(u){return Ws(this,u)},get size(){return Xs(this)},has:Ys,add:uh,set:hh,delete:fh,clear:dh,forEach:Gs(!1,!1)},e={get(u){return Ws(this,u,!1,!0)},get size(){return Xs(this)},has:Ys,add:uh,set:hh,delete:fh,clear:dh,forEach:Gs(!1,!0)},n={get(u){return Ws(this,u,!0)},get size(){return Xs(this,!0)},has(u){return Ys.call(this,u,!0)},add:ii("add"),set:ii("set"),delete:ii("delete"),clear:ii("clear"),forEach:Gs(!0,!1)},o={get(u){return Ws(this,u,!0,!0)},get size(){return Xs(this,!0)},has(u){return Ys.call(this,u,!0)},add:ii("add"),set:ii("set"),delete:ii("delete"),clear:ii("clear"),forEach:Gs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{i[u]=$s(u,!1,!1),n[u]=$s(u,!0,!1),e[u]=$s(u,!1,!0),o[u]=$s(u,!0,!0)}),[i,n,e,o]}var[Ly,Py,FA,UA]=Ry();function S1(i,e){const n=i?Py:Ly;return(o,l,u)=>l==="__v_isReactive"?!i:l==="__v_isReadonly"?i:l==="__v_raw"?o:Reflect.get($o(n,l)&&l in o?n:o,l,u)}var By={get:S1(!1)},ky={get:S1(!0)};function T1(i,e,n){const o=We(n);if(o!==n&&e.call(i,o)){const l=w1(i);console.warn(`Reactive ${l} contains both the raw and reactive versions of the same object${l==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var I1=new WeakMap,Fy=new WeakMap,O1=new WeakMap,Uy=new WeakMap;function zy(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jy(i){return i.__v_skip||!Object.isExtensible(i)?0:zy(w1(i))}function vc(i){return i&&i.__v_isReadonly?i:M1(i,!1,My,By,I1)}function N1(i){return M1(i,!0,Dy,ky,O1)}function M1(i,e,n,o,l){if(!qo(i))return console.warn(`value cannot be made reactive: ${String(i)}`),i;if(i.__v_raw&&!(e&&i.__v_isReactive))return i;const u=l.get(i);if(u)return u;const f=jy(i);if(f===0)return i;const p=new Proxy(i,f===2?o:n);return l.set(i,p),p}function We(i){return i&&We(i.__v_raw)||i}function Ml(i){return!!(i&&i.__v_isRef===!0)}En("nextTick",()=>mc);En("dispatch",i=>us.bind(us,i));En("watch",(i,{evaluateLater:e,cleanup:n})=>(o,l)=>{let u=e(o),p=Id(()=>{let E;return u(m=>E=m),E},l);n(p)});En("store",ny);En("data",i=>Bd(i));En("root",i=>Yo(i));En("refs",i=>(i._x_refs_proxy||(i._x_refs_proxy=_s(Hy(i))),i._x_refs_proxy));function Hy(i){let e=[];return Fr(i,n=>{n._x_refs&&e.push(n._x_refs)}),e}var ka={};function D1(i){return ka[i]||(ka[i]=0),++ka[i]}function Vy(i,e){return Fr(i,n=>{if(n._x_ids&&n._x_ids[e])return!0})}function Wy(i,e){i._x_ids||(i._x_ids={}),i._x_ids[e]||(i._x_ids[e]=D1(e))}En("id",(i,{cleanup:e})=>(n,o=null)=>{let l=`${n}${o?`-${o}`:""}`;return Yy(i,l,e,()=>{let u=Vy(i,n),f=u?u._x_ids[n]:D1(n);return o?`${n}-${f}-${o}`:`${n}-${f}`})});Go((i,e)=>{i._x_id&&(e._x_id=i._x_id)});function Yy(i,e,n,o){if(i._x_id||(i._x_id={}),i._x_id[e])return i._x_id[e];let l=o();return i._x_id[e]=l,n(()=>{delete i._x_id[e]}),l}En("el",i=>i);R1("Focus","focus","focus");R1("Persist","persist","persist");function R1(i,e,n){En(e,o=>on(`You can't use [$${e}] without first installing the "${i}" plugin here: https://alpinejs.dev/plugins/${n}`,o))}st("modelable",(i,{expression:e},{effect:n,evaluateLater:o,cleanup:l})=>{let u=o(e),f=()=>{let b;return u(y=>b=y),b},p=o(`${e} = __placeholder`),E=b=>p(()=>{},{scope:{__placeholder:b}}),m=f();E(m),queueMicrotask(()=>{if(!i._x_model)return;i._x_removeModelListeners.default();let b=i._x_model.get,y=i._x_model.set,S=p1({get(){return b()},set(v){y(v)}},{get(){return f()},set(v){E(v)}});l(S)})});st("teleport",(i,{modifiers:e,expression:n},{cleanup:o})=>{i.tagName.toLowerCase()!=="template"&&on("x-teleport can only be used on a <template> tag",i);let l=gh(n),u=i.content.cloneNode(!0).firstElementChild;i._x_teleport=u,u._x_teleportBack=i,i.setAttribute("data-teleport-template",!0),u.setAttribute("data-teleport-target",!0),i._x_forwardEvents&&i._x_forwardEvents.forEach(p=>{u.addEventListener(p,E=>{E.stopPropagation(),i.dispatchEvent(new E.constructor(E.type,E))})}),Cs(u,{},i);let f=(p,E,m)=>{m.includes("prepend")?E.parentNode.insertBefore(p,E):m.includes("append")?E.parentNode.insertBefore(p,E.nextSibling):E.appendChild(p)};Ge(()=>{f(u,l,e),gi(()=>{Wn(u)})()}),i._x_teleportPutBack=()=>{let p=gh(n);Ge(()=>{f(i._x_teleport,p,e)})},o(()=>Ge(()=>{u.remove(),Ur(u)}))});var Xy=document.createElement("div");function gh(i){let e=gi(()=>document.querySelector(i),()=>Xy)();return e||on(`Cannot find x-teleport element for selector: "${i}"`),e}var L1=()=>{};L1.inline=(i,{modifiers:e},{cleanup:n})=>{e.includes("self")?i._x_ignoreSelf=!0:i._x_ignore=!0,n(()=>{e.includes("self")?delete i._x_ignoreSelf:delete i._x_ignore})};st("ignore",L1);st("effect",gi((i,{expression:e},{effect:n})=>{n(vt(i,e))}));function Dl(i,e,n,o){let l=i,u=E=>o(E),f={},p=(E,m)=>b=>m(E,b);if(n.includes("dot")&&(e=Gy(e)),n.includes("camel")&&(e=$y(e)),n.includes("passive")&&(f.passive=!0),n.includes("capture")&&(f.capture=!0),n.includes("window")&&(l=window),n.includes("document")&&(l=document),n.includes("debounce")){let E=n[n.indexOf("debounce")+1]||"invalid-wait",m=To(E.split("ms")[0])?Number(E.split("ms")[0]):250;u=d1(u,m)}if(n.includes("throttle")){let E=n[n.indexOf("throttle")+1]||"invalid-wait",m=To(E.split("ms")[0])?Number(E.split("ms")[0]):250;u=g1(u,m)}return n.includes("prevent")&&(u=p(u,(E,m)=>{m.preventDefault(),E(m)})),n.includes("stop")&&(u=p(u,(E,m)=>{m.stopPropagation(),E(m)})),n.includes("once")&&(u=p(u,(E,m)=>{E(m),l.removeEventListener(e,u,f)})),(n.includes("away")||n.includes("outside"))&&(l=document,u=p(u,(E,m)=>{i.contains(m.target)||m.target.isConnected!==!1&&(i.offsetWidth<1&&i.offsetHeight<1||i._x_isShown!==!1&&E(m))})),n.includes("self")&&(u=p(u,(E,m)=>{m.target===i&&E(m)})),(Ky(e)||P1(e))&&(u=p(u,(E,m)=>{Zy(m,n)||E(m)})),l.addEventListener(e,u,f),()=>{l.removeEventListener(e,u,f)}}function Gy(i){return i.replace(/-/g,".")}function $y(i){return i.toLowerCase().replace(/-(\w)/g,(e,n)=>n.toUpperCase())}function To(i){return!Array.isArray(i)&&!isNaN(i)}function qy(i){return[" ","_"].includes(i)?i:i.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Ky(i){return["keydown","keyup"].includes(i)}function P1(i){return["contextmenu","click","mouse"].some(e=>i.includes(e))}function Zy(i,e){let n=e.filter(u=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(u));if(n.includes("debounce")){let u=n.indexOf("debounce");n.splice(u,To((n[u+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.includes("throttle")){let u=n.indexOf("throttle");n.splice(u,To((n[u+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.length===0||n.length===1&&ph(i.key).includes(n[0]))return!1;const l=["ctrl","shift","alt","meta","cmd","super"].filter(u=>n.includes(u));return n=n.filter(u=>!l.includes(u)),!(l.length>0&&l.filter(f=>((f==="cmd"||f==="super")&&(f="meta"),i[`${f}Key`])).length===l.length&&(P1(i.type)||ph(i.key).includes(n[0])))}function ph(i){if(!i)return[];i=qy(i);let e={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return e[i]=i,Object.keys(e).map(n=>{if(e[n]===i)return n}).filter(n=>n)}st("model",(i,{modifiers:e,expression:n},{effect:o,cleanup:l})=>{let u=i;e.includes("parent")&&(u=i.parentNode);let f=vt(u,n),p;typeof n=="string"?p=vt(u,`${n} = __placeholder`):typeof n=="function"&&typeof n()=="string"?p=vt(u,`${n()} = __placeholder`):p=()=>{};let E=()=>{let S;return f(v=>S=v),mh(S)?S.get():S},m=S=>{let v;f(N=>v=N),mh(v)?v.set(S):p(()=>{},{scope:{__placeholder:S}})};typeof n=="string"&&i.type==="radio"&&Ge(()=>{i.hasAttribute("name")||i.setAttribute("name",n)});var b=i.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(i.type)||e.includes("lazy")?"change":"input";let y=ci?()=>{}:Dl(i,b,e,S=>{m(Fa(i,e,S,E()))});if(e.includes("fill")&&([void 0,null,""].includes(E())||Ec(i)&&Array.isArray(E())||i.tagName.toLowerCase()==="select"&&i.multiple)&&m(Fa(i,e,{target:i},E())),i._x_removeModelListeners||(i._x_removeModelListeners={}),i._x_removeModelListeners.default=y,l(()=>i._x_removeModelListeners.default()),i.form){let S=Dl(i.form,"reset",[],v=>{mc(()=>i._x_model&&i._x_model.set(Fa(i,e,{target:i},E())))});l(()=>S())}i._x_model={get(){return E()},set(S){m(S)}},i._x_forceModelUpdate=S=>{S===void 0&&typeof n=="string"&&n.match(/\./)&&(S=""),window.fromModel=!0,Ge(()=>l1(i,"value",S)),delete window.fromModel},o(()=>{let S=E();e.includes("unintrusive")&&document.activeElement.isSameNode(i)||i._x_forceModelUpdate(S)})});function Fa(i,e,n,o){return Ge(()=>{if(n instanceof CustomEvent&&n.detail!==void 0)return n.detail!==null&&n.detail!==void 0?n.detail:n.target.value;if(Ec(i))if(Array.isArray(o)){let l=null;return e.includes("number")?l=Ua(n.target.value):e.includes("boolean")?l=po(n.target.value):l=n.target.value,n.target.checked?o.includes(l)?o:o.concat([l]):o.filter(u=>!Qy(u,l))}else return n.target.checked;else{if(i.tagName.toLowerCase()==="select"&&i.multiple)return e.includes("number")?Array.from(n.target.selectedOptions).map(l=>{let u=l.value||l.text;return Ua(u)}):e.includes("boolean")?Array.from(n.target.selectedOptions).map(l=>{let u=l.value||l.text;return po(u)}):Array.from(n.target.selectedOptions).map(l=>l.value||l.text);{let l;return f1(i)?n.target.checked?l=n.target.value:l=o:l=n.target.value,e.includes("number")?Ua(l):e.includes("boolean")?po(l):e.includes("trim")?l.trim():l}}})}function Ua(i){let e=i?parseFloat(i):null;return Jy(e)?e:i}function Qy(i,e){return i==e}function Jy(i){return!Array.isArray(i)&&!isNaN(i)}function mh(i){return i!==null&&typeof i=="object"&&typeof i.get=="function"&&typeof i.set=="function"}st("cloak",i=>queueMicrotask(()=>Ge(()=>i.removeAttribute(kr("cloak")))));n1(()=>`[${kr("init")}]`);st("init",gi((i,{expression:e},{evaluate:n})=>typeof e=="string"?!!e.trim()&&n(e,{},!1):n(e,{},!1)));st("text",(i,{expression:e},{effect:n,evaluateLater:o})=>{let l=o(e);n(()=>{l(u=>{Ge(()=>{i.textContent=u})})})});st("html",(i,{expression:e},{effect:n,evaluateLater:o})=>{let l=o(e);n(()=>{l(u=>{Ge(()=>{i.innerHTML=u,i._x_ignoreSelf=!0,Wn(i),delete i._x_ignoreSelf})})})});dc(Xd(":",Gd(kr("bind:"))));var B1=(i,{value:e,modifiers:n,expression:o,original:l},{effect:u,cleanup:f})=>{if(!e){let E={};ry(E),vt(i,o)(b=>{x1(i,b,l)},{scope:E});return}if(e==="key")return eA(i,o);if(i._x_inlineBindings&&i._x_inlineBindings[e]&&i._x_inlineBindings[e].extract)return;let p=vt(i,o);u(()=>p(E=>{E===void 0&&typeof o=="string"&&o.match(/\./)&&(E=""),Ge(()=>l1(i,e,E,n))})),f(()=>{i._x_undoAddedClasses&&i._x_undoAddedClasses(),i._x_undoAddedStyles&&i._x_undoAddedStyles()})};B1.inline=(i,{value:e,modifiers:n,expression:o})=>{e&&(i._x_inlineBindings||(i._x_inlineBindings={}),i._x_inlineBindings[e]={expression:o,extract:!1})};st("bind",B1);function eA(i,e){i._x_keyExpression=e}t1(()=>`[${kr("data")}]`);st("data",(i,{expression:e},{cleanup:n})=>{if(tA(i))return;e=e===""?"{}":e;let o={};yl(o,i);let l={};oy(l,o);let u=Bi(i,e,{scope:l});(u===void 0||u===!0)&&(u={}),yl(u,i);let f=Pr(u);kd(f);let p=Cs(i,f);f.init&&Bi(i,f.init),n(()=>{f.destroy&&Bi(i,f.destroy),p()})});Go((i,e)=>{i._x_dataStack&&(e._x_dataStack=i._x_dataStack,e.setAttribute("data-has-alpine-state",!0))});function tA(i){return ci?Il?!0:i.hasAttribute("data-has-alpine-state"):!1}st("show",(i,{modifiers:e,expression:n},{effect:o})=>{let l=vt(i,n);i._x_doHide||(i._x_doHide=()=>{Ge(()=>{i.style.setProperty("display","none",e.includes("important")?"important":void 0)})}),i._x_doShow||(i._x_doShow=()=>{Ge(()=>{i.style.length===1&&i.style.display==="none"?i.removeAttribute("style"):i.style.removeProperty("display")})});let u=()=>{i._x_doHide(),i._x_isShown=!1},f=()=>{i._x_doShow(),i._x_isShown=!0},p=()=>setTimeout(f),E=Sl(y=>y?f():u(),y=>{typeof i._x_toggleAndCascadeWithTransitions=="function"?i._x_toggleAndCascadeWithTransitions(i,y,f,u):y?p():u()}),m,b=!0;o(()=>l(y=>{!b&&y===m||(e.includes("immediate")&&(y?p():u()),E(y),m=y,b=!1)}))});st("for",(i,{expression:e},{effect:n,cleanup:o})=>{let l=iA(e),u=vt(i,l.items),f=vt(i,i._x_keyExpression||"index");i._x_prevKeys=[],i._x_lookup={},n(()=>nA(i,l,u,f)),o(()=>{Object.values(i._x_lookup).forEach(p=>Ge(()=>{Ur(p),p.remove()})),delete i._x_prevKeys,delete i._x_lookup})});function nA(i,e,n,o){let l=f=>typeof f=="object"&&!Array.isArray(f),u=i;n(f=>{rA(f)&&f>=0&&(f=Array.from(Array(f).keys(),O=>O+1)),f===void 0&&(f=[]);let p=i._x_lookup,E=i._x_prevKeys,m=[],b=[];if(l(f))f=Object.entries(f).map(([O,L])=>{let k=xh(e,L,O,f);o(F=>{b.includes(F)&&on("Duplicate key on x-for",i),b.push(F)},{scope:{index:O,...k}}),m.push(k)});else for(let O=0;O<f.length;O++){let L=xh(e,f[O],O,f);o(k=>{b.includes(k)&&on("Duplicate key on x-for",i),b.push(k)},{scope:{index:O,...L}}),m.push(L)}let y=[],S=[],v=[],N=[];for(let O=0;O<E.length;O++){let L=E[O];b.indexOf(L)===-1&&v.push(L)}E=E.filter(O=>!v.includes(O));let M="template";for(let O=0;O<b.length;O++){let L=b[O],k=E.indexOf(L);if(k===-1)E.splice(O,0,L),y.push([M,O]);else if(k!==O){let F=E.splice(O,1)[0],W=E.splice(k-1,1)[0];E.splice(O,0,W),E.splice(k,0,F),S.push([F,W])}else N.push(L);M=L}for(let O=0;O<v.length;O++){let L=v[O];L in p&&(Ge(()=>{Ur(p[L]),p[L].remove()}),delete p[L])}for(let O=0;O<S.length;O++){let[L,k]=S[O],F=p[L],W=p[k],ee=document.createElement("div");Ge(()=>{W||on('x-for ":key" is undefined or invalid',u,k,p),W.after(ee),F.after(W),W._x_currentIfEl&&W.after(W._x_currentIfEl),ee.before(F),F._x_currentIfEl&&F.after(F._x_currentIfEl),ee.remove()}),W._x_refreshXForScope(m[b.indexOf(k)])}for(let O=0;O<y.length;O++){let[L,k]=y[O],F=L==="template"?u:p[L];F._x_currentIfEl&&(F=F._x_currentIfEl);let W=m[k],ee=b[k],Z=document.importNode(u.content,!0).firstElementChild,j=Pr(W);Cs(Z,j,u),Z._x_refreshXForScope=ie=>{Object.entries(ie).forEach(([Y,Me])=>{j[Y]=Me})},Ge(()=>{F.after(Z),gi(()=>Wn(Z))()}),typeof ee=="object"&&on("x-for key cannot be an object, it must be a string or an integer",u),p[ee]=Z}for(let O=0;O<N.length;O++)p[N[O]]._x_refreshXForScope(m[b.indexOf(N[O])]);u._x_prevKeys=b})}function iA(i){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,o=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,l=i.match(o);if(!l)return;let u={};u.items=l[2].trim();let f=l[1].replace(n,"").trim(),p=f.match(e);return p?(u.item=f.replace(e,"").trim(),u.index=p[1].trim(),p[2]&&(u.collection=p[2].trim())):u.item=f,u}function xh(i,e,n,o){let l={};return/^\[.*\]$/.test(i.item)&&Array.isArray(e)?i.item.replace("[","").replace("]","").split(",").map(f=>f.trim()).forEach((f,p)=>{l[f]=e[p]}):/^\{.*\}$/.test(i.item)&&!Array.isArray(e)&&typeof e=="object"?i.item.replace("{","").replace("}","").split(",").map(f=>f.trim()).forEach(f=>{l[f]=e[f]}):l[i.item]=e,i.index&&(l[i.index]=n),i.collection&&(l[i.collection]=o),l}function rA(i){return!Array.isArray(i)&&!isNaN(i)}function k1(){}k1.inline=(i,{expression:e},{cleanup:n})=>{let o=Yo(i);o._x_refs||(o._x_refs={}),o._x_refs[e]=i,n(()=>delete o._x_refs[e])};st("ref",k1);st("if",(i,{expression:e},{effect:n,cleanup:o})=>{i.tagName.toLowerCase()!=="template"&&on("x-if can only be used on a <template> tag",i);let l=vt(i,e),u=()=>{if(i._x_currentIfEl)return i._x_currentIfEl;let p=i.content.cloneNode(!0).firstElementChild;return Cs(p,{},i),Ge(()=>{i.after(p),gi(()=>Wn(p))()}),i._x_currentIfEl=p,i._x_undoIf=()=>{Ge(()=>{Ur(p),p.remove()}),delete i._x_currentIfEl},p},f=()=>{i._x_undoIf&&(i._x_undoIf(),delete i._x_undoIf)};n(()=>l(p=>{p?u():f()})),o(()=>i._x_undoIf&&i._x_undoIf())});st("id",(i,{expression:e},{evaluate:n})=>{n(e).forEach(l=>Wy(i,l))});Go((i,e)=>{i._x_ids&&(e._x_ids=i._x_ids)});dc(Xd("@",Gd(kr("on:"))));st("on",gi((i,{value:e,modifiers:n,expression:o},{cleanup:l})=>{let u=o?vt(i,o):()=>{};i.tagName.toLowerCase()==="template"&&(i._x_forwardEvents||(i._x_forwardEvents=[]),i._x_forwardEvents.includes(e)||i._x_forwardEvents.push(e));let f=Dl(i,e,n,p=>{u(()=>{},{scope:{$event:p},params:[p]})});l(()=>f())}));Zo("Collapse","collapse","collapse");Zo("Intersect","intersect","intersect");Zo("Focus","trap","focus");Zo("Mask","mask","mask");function Zo(i,e,n){st(e,o=>on(`You can't use [x-${e}] without first installing the "${i}" plugin here: https://alpinejs.dev/plugins/${n}`,o))}vs.setEvaluator(Hd);vs.setReactivityEngine({reactive:vc,effect:my,release:xy,raw:We});var sA=vs,F1=sA;const J=(i,e=1e4)=>(i=parseFloat(i+"")||0,Math.round((i+Number.EPSILON)*e)/e),Rl=function(i){if(!(i&&i instanceof Element&&i.offsetParent))return!1;const e=i.scrollHeight>i.clientHeight,n=window.getComputedStyle(i).overflowY,o=n.indexOf("hidden")!==-1,l=n.indexOf("visible")!==-1;return e&&!o&&!l},Io=function(i,e=void 0){return!(!i||i===document.body||e&&i===e)&&(Rl(i)?i:Io(i.parentElement,e))},Nn=function(i){var e=new DOMParser().parseFromString(i,"text/html").body;if(e.childElementCount>1){for(var n=document.createElement("div");e.firstChild;)n.appendChild(e.firstChild);return n}return e.firstChild},Sc=i=>`${i||""}`.split(" ").filter(e=>!!e),Mn=(i,e,n)=>{i&&Sc(e).forEach(o=>{i.classList.toggle(o,n||!1)})};class lr{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}}const cr={passive:!1};class oA{constructor(e,{start:n=()=>!0,move:o=()=>{},end:l=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=n,this.moveCallback=o,this.endCallback=l;for(const u of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[u]=this[u].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,cr),this.element.addEventListener("touchstart",this.onTouchStart,cr),this.element.addEventListener("touchmove",this.onMove,cr),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;const n=new lr(e);this.currentPointers.some(o=>o.id===n.id)||this.triggerPointerStart(n,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const n of Array.from(e.changedTouches||[]))this.triggerPointerStart(new lr(n),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const n=this.currentPointers.slice(),o="changedTouches"in e?Array.from(e.changedTouches||[]).map(u=>new lr(u)):[new lr(e)],l=[];for(const u of o){const f=this.currentPointers.findIndex(p=>p.id===u.id);f<0||(l.push(u),this.currentPointers[f]=u)}l.length&&this.moveCallback(e,this.currentPointers.slice(),n)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new lr(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const n of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new lr(n))}triggerPointerStart(e,n){return!!this.startCallback(n,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,n){const o=this.currentPointers.findIndex(l=>l.id===n.id);o<0||(this.currentPointers.splice(o,1),this.startPointers.splice(o,1),this.endCallback(e,n,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,cr),this.element.removeEventListener("touchstart",this.onTouchStart,cr),this.element.removeEventListener("touchmove",this.onMove,cr),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function Eh(i,e){return e?Math.sqrt(Math.pow(e.clientX-i.clientX,2)+Math.pow(e.clientY-i.clientY,2)):0}function bh(i,e){return e?{clientX:(i.clientX+e.clientX)/2,clientY:(i.clientY+e.clientY)/2}:i}const Ll=i=>typeof i=="object"&&i!==null&&i.constructor===Object&&Object.prototype.toString.call(i)==="[object Object]",Lt=(i,...e)=>{const n=e.length;for(let o=0;o<n;o++){const l=e[o]||{};Object.entries(l).forEach(([u,f])=>{const p=Array.isArray(f)?[]:{};i[u]||Object.assign(i,{[u]:p}),Ll(f)?Object.assign(i[u],Lt(p,f)):Array.isArray(f)?Object.assign(i,{[u]:[...f]}):Object.assign(i,{[u]:f})})}return i},za=function(i,e){return i.split(".").reduce((n,o)=>typeof n=="object"?n[o]:void 0,e)};class Oo{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const n of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))n.startsWith("on")&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}setOptions(e){this.options=e?Lt({},this.constructor.defaults,e):{};for(const[n,o]of Object.entries(this.option("on")||{}))this.on(n,o)}option(e,...n){let o=za(e,this.options);return o&&typeof o=="function"&&(o=o.call(this,this,...n)),o}optionFor(e,n,o,...l){let u=za(n,e);var f;typeof(f=u)!="string"||isNaN(f)||isNaN(parseFloat(f))||(u=parseFloat(u)),u==="true"&&(u=!0),u==="false"&&(u=!1),u&&typeof u=="function"&&(u=u.call(this,this,e,...l));let p=za(n,this.options);return p&&typeof p=="function"?u=p.call(this,this,e,...l,u):u===void 0&&(u=p),u===void 0?o:u}cn(e){const n=this.options.classes;return n&&n[e]||""}localize(e,n=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(o,l,u)=>{let f="";return u?f=this.option(`${l[0]+l.toLowerCase().substring(1)}.l10n.${u}`):l&&(f=this.option(`l10n.${l}`)),f||(f=o),f});for(let o=0;o<n.length;o++)e=e.split(n[o][0]).join(n[o][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(o,l)=>l)}on(e,n){let o=[];typeof e=="string"?o=e.split(" "):Array.isArray(e)&&(o=e),this.events||(this.events=new Map),o.forEach(l=>{let u=this.events.get(l);u||(this.events.set(l,[]),u=[]),u.includes(n)||u.push(n),this.events.set(l,u)})}off(e,n){let o=[];typeof e=="string"?o=e.split(" "):Array.isArray(e)&&(o=e),o.forEach(l=>{const u=this.events.get(l);if(Array.isArray(u)){const f=u.indexOf(n);f>-1&&u.splice(f,1)}})}emit(e,...n){[...this.events.get(e)||[]].forEach(o=>o(this,...n)),e!=="*"&&this.emit("*",e,...n)}}Object.defineProperty(Oo,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Oo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class Tc extends Oo{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const n=new Map;for(const[o,l]of Object.entries(e)){const u=this.option(o),f=this.plugins[o];f||u===!1?f&&u===!1&&(f.detach(),delete this.plugins[o]):n.set(o,new l(this,u||{}))}for(const[o,l]of n)this.plugins[o]=l,l.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(const n of e){const o=this.plugins[n];o&&o.detach(),delete this.plugins[n]}return this.emit("detachPlugins"),this}}var Re;(function(i){i[i.Init=0]="Init",i[i.Error=1]="Error",i[i.Ready=2]="Ready",i[i.Panning=3]="Panning",i[i.Mousemove=4]="Mousemove",i[i.Destroy=5]="Destroy"})(Re||(Re={}));const Bn=["a","b","c","d","e","f"],U1={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},aA={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:U1},wh='<circle cx="25" cy="25" r="20"></circle>',Ic='<div class="f-spinner"><svg viewBox="0 0 50 50">'+wh+wh+"</svg></div>",Dt=i=>i&&i!==null&&i instanceof Element&&"nodeType"in i,Ne=(i,e)=>{i&&Sc(e).forEach(n=>{i.classList.remove(n)})},ae=(i,e)=>{i&&Sc(e).forEach(n=>{i.classList.add(n)})},qs={a:1,b:0,c:0,d:1,e:0,f:0},lA=1e5,Ks=1e4,tn="mousemove",yh="drag",Ah="content",nn="auto";let ja=null,Ha=null;class Wi extends Tc{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Ha===null&&(Ha=window.matchMedia("(hover: none)").matches),Ha}get isMobile(){return ja===null&&(ja=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),ja}get panMode(){return this.options.panMode!==tn||this.isTouchDevice?yh:tn}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return e===nn?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:n}=this.current;return Math.sqrt(e*e+n*n)||1}get targetScale(){const{a:e,b:n}=this.target;return Math.sqrt(e*e+n*n)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:n}=this,o=Math.max(e.height/n.fitHeight,e.width/n.fitWidth)||1;return Math.min(this.fullScale,o)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of Bn){const n=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>n)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,n={},o={}){var l;if(super(n),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Re.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},qs)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},qs)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},Wi.Plugins),o)),this.emit("attachPlugins"),this.emit("init");const u=this.content;if(u.addEventListener("load",this.onLoad),u.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const f=Nn(Ic);!e.contains(u)||u.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(f):this.spinner=((l=u.parentElement)===null||l===void 0?void 0:l.insertBefore(f,u))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:e}=this,n=this.cn(Ah);let o=this.option(Ah)||e.querySelector(`.${n}`);if(o||(o=e.querySelector("img,picture")||e.firstElementChild,o&&ae(o,n)),o instanceof HTMLPictureElement&&(o=o.querySelector("img")),!o)throw new Error("No content found");this.content=o}onLoad(){const{spinner:e,container:n,state:o}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&n.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),o===Re.Init?this.enable():this.updateMetrics()}onError(){this.state!==Re.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=Re.Error,this.emit("error"))}getNextScale(e){const{fullScale:n,targetScale:o,coverScale:l,maxScale:u,minScale:f}=this;let p=f;switch(e){case"toggleMax":p=o-f<.5*(u-f)?u:f;break;case"toggleCover":p=o-f<.5*(l-f)?l:f;break;case"toggleZoom":p=o-f<.5*(n-f)?n:f;break;case"iterateZoom":let E=[1,n,u].sort((b,y)=>b-y),m=E.findIndex(b=>b>o+1e-5);p=E[m]||1}return p}attachObserver(){var e;const n=()=>{const{container:o,containerRect:l}=this;return Math.abs(l.width-o.getBoundingClientRect().width)>.1||Math.abs(l.height-o.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(n()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{n()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new oA(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(tn,this.onMouseMove)}detachEvents(){var e;const{container:n}=this;n.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),n.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(tn,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const e=this.friction,n=this.option("maxVelocity");for(const o of Bn)e?(this.velocity[o]*=1-e,n&&!this.isScaling&&(this.velocity[o]=Math.max(Math.min(this.velocity[o],n),-1*n)),this.current[o]+=this.velocity[o]):this.current[o]=this.target[o];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const e of Bn)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,n=0){const{current:o}=this,l=o.e+e,u=o.f+n,f=this.getBounds(),{x:p,y:E}=f,m=p.min,b=p.max,y=E.min,S=E.max;let v=0,N=0;return m!==1/0&&l<m?v=m-l:b!==1/0&&l>b&&(v=b-l),y!==1/0&&u<y?N=y-u:S!==1/0&&u>S&&(N=S-u),Math.abs(v)<1e-4&&(v=0),Math.abs(N)<1e-4&&(N=0),Object.assign(Object.assign({},f),{xDiff:v,yDiff:N,inBounds:!v&&!N})}clampTargetBounds(){const{target:e}=this,{x:n,y:o}=this.getBounds();n.min!==1/0&&(e.e=Math.max(e.e,n.min)),n.max!==1/0&&(e.e=Math.min(e.e,n.max)),o.min!==1/0&&(e.f=Math.max(e.f,o.min)),o.max!==1/0&&(e.f=Math.min(e.f,o.max))}calculateContentDim(e=this.current){const{content:n,contentRect:o}=this,{fitWidth:l,fitHeight:u,fullWidth:f,fullHeight:p}=o;let E=f,m=p;if(this.option("zoom")||this.angle!==0){const b=!(n instanceof HTMLImageElement)&&(window.getComputedStyle(n).maxWidth==="none"||window.getComputedStyle(n).maxHeight==="none"),y=b?f:l,S=b?p:u,v=this.getMatrix(e),N=new DOMPoint(0,0).matrixTransform(v),M=new DOMPoint(0+y,0).matrixTransform(v),O=new DOMPoint(0+y,0+S).matrixTransform(v),L=new DOMPoint(0,0+S).matrixTransform(v),k=Math.abs(O.x-N.x),F=Math.abs(O.y-N.y),W=Math.abs(L.x-M.x),ee=Math.abs(L.y-M.y);E=Math.max(k,W),m=Math.max(F,ee)}return{contentWidth:E,contentHeight:m}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===tn||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:n,y:o,xDiff:l,yDiff:u}=this.checkBounds(),f=this.option("maxVelocity");let p=this.velocity.e,E=this.velocity.f;l!==0?(this.isBouncingX=!0,l*p<=0?p+=.14*l:(p=.14*l,n.min!==1/0&&(this.target.e=Math.max(e.e,n.min)),n.max!==1/0&&(this.target.e=Math.min(e.e,n.max))),f&&(p=Math.max(Math.min(p,f),-1*f))):this.isBouncingX=!1,u!==0?(this.isBouncingY=!0,u*E<=0?E+=.14*u:(E=.14*u,o.min!==1/0&&(this.target.f=Math.max(e.f,o.min)),o.max!==1/0&&(this.target.f=Math.min(e.f,o.max))),f&&(E=Math.max(Math.min(E,f),-1*f))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=p),this.isBouncingY&&(this.velocity.f=E)}enable(){const{content:e}=this,n=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const o of Bn)this.current[o]=this.target[o]=n[o];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=Re.Ready,this.emit("ready")}onClick(e){var n;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((n=this.pointerTracker)===null||n===void 0||n.clear(),this.trackingPoints=[],this.startDecelAnim());const o=e.target;if(!o||e.defaultPrevented)return;if(o.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const v=window.getSelection();return v&&v.type==="Range"})()&&!o.closest("button"))return;const l=o.closest("[data-panzoom-action]"),u=o.closest("[data-panzoom-change]"),f=l||u,p=f&&Dt(f)?f.dataset:null;if(p){const v=p.panzoomChange,N=p.panzoomAction;if((v||N)&&e.preventDefault(),v){let M={};try{M=JSON.parse(v)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(M)}if(N)return void(this[N]&&this[N]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(o.closest("[data-fancybox]"))return;const E=this.content.getBoundingClientRect(),m=this.dragStart;if(m.time&&!this.canZoomOut()&&(Math.abs(E.x-m.x)>2||Math.abs(E.y-m.y)>2))return;this.dragStart.time=0;const b=v=>{this.option("zoom",e)&&v&&typeof v=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(v)&&typeof this[v]=="function"&&(e.preventDefault(),this[v]({event:e}))},y=this.option("click",e),S=this.option("dblClick",e);S?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&y&&b(y)):(this.emit("dblClick",e),e.defaultPrevented||b(S)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&y&&b(y))}addTrackingPoint(e){const n=this.trackingPoints.filter(o=>o.time>Date.now()-100);n.push(e),this.trackingPoints=n}onPointerDown(e,n,o){var l;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const u=this.content.getBoundingClientRect();if(this.dragStart={x:u.x,y:u.y,top:u.top,left:u.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===tn&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;const f=e.composedPath()[0];if(!o.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(f.nodeName)||f.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(l=window.getSelection())===null||l===void 0||l.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(f.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(n),this.emit("touchStart",e)),!0}onPointerMove(e,n,o){if(this.option("touch",e)===!1||!this.isDragging||n.length<2&&this.panOnlyZoomed&&J(this.targetScale)<=J(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(n[0]);const{content:l}=this,u=bh(o[0],o[1]),f=bh(n[0],n[1]);let p=0,E=0;if(n.length>1){const F=l.getBoundingClientRect();p=u.clientX-F.left-.5*F.width,E=u.clientY-F.top-.5*F.height}const m=Eh(o[0],o[1]),b=Eh(n[0],n[1]);let y=m?b/m:1,S=f.clientX-u.clientX,v=f.clientY-u.clientY;this.dragOffset.x+=S,this.dragOffset.y+=v,this.dragOffset.time=Date.now()-this.dragStart.time;let N=J(this.targetScale)===J(this.minScale)&&this.option("lockAxis");if(N&&!this.lockedAxis)if(N==="xy"||N==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const F=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=F>45&&F<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,S=0,v=0}else this.lockedAxis=N;if(Io(e.target,this.content)&&(N="x",this.dragOffset.y=0),N&&N!=="xy"&&this.lockedAxis!==N&&J(this.targetScale)===J(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const M=this.checkBounds(S,v);this.option("rubberband")?(this.isInfinite!=="x"&&(M.xDiff>0&&S<0||M.xDiff<0&&S>0)&&(S*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*M.xDiff))),this.isInfinite!=="y"&&(M.yDiff>0&&v<0||M.yDiff<0&&v>0)&&(v*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*M.yDiff)))):(M.xDiff&&(S=0),M.yDiff&&(v=0));const O=this.targetScale,L=this.minScale,k=this.maxScale;O<.5*L&&(y=Math.max(y,L)),O>1.5*k&&(y=Math.min(y,k)),this.lockedAxis==="y"&&J(O)===J(L)&&(S=0),this.lockedAxis==="x"&&J(O)===J(L)&&(v=0),this.applyChange({originX:p,originY:E,panX:S,panY:v,scale:y,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,n,o){if(o.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(n),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),Io(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==Re.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const n=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const F of Bn)this.velocity[F]=0;this.target.e=this.current.e,this.target.f=this.current.f,Ne(this.container,"is-scaling"),Ne(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:o}=this,l=o[0],u=o[o.length-1];let f=0,p=0,E=0;u&&l&&(f=u.clientX-l.clientX,p=u.clientY-l.clientY,E=u.time-l.time);const m=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;m!==1&&(f*=m,p*=m);let b=0,y=0,S=0,v=0,N=this.option("decelFriction");const M=this.targetScale;if(E>0){S=Math.abs(f)>3?f/(E/30):0,v=Math.abs(p)>3?p/(E/30):0;const F=this.option("maxVelocity");F&&(S=Math.max(Math.min(S,F),-1*F),v=Math.max(Math.min(v,F),-1*F))}S&&(b=S/(1/(1-N)-1)),v&&(y=v/(1/(1-N)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&J(M)===this.minScale)&&(b=S=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&J(M)===this.minScale)&&(y=v=0);const O=this.dragOffset.x,L=this.dragOffset.y,k=this.option("dragMinThreshold")||0;Math.abs(O)<k&&Math.abs(L)<k&&(b=y=0,S=v=0),(this.option("zoom")&&(M<this.minScale-1e-5||M>this.maxScale+1e-5)||n&&!b&&!y)&&(N=.35),this.applyChange({panX:b,panY:y,friction:N}),this.emit("decel",S,v,O,L)}onWheel(e){var n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(u,f){return Math.abs(f)>Math.abs(u)?f:u});const o=Math.max(-1,Math.min(1,n));if(this.emit("wheel",e,o),this.panMode===tn||e.defaultPrevented)return;const l=this.option("wheel");l==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):l==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:n,content:o,contentRect:l}=this,u=Object.assign({},qs);for(const O of Bn){const L=O=="e"||O==="f"?Ks:lA;u[O]=J(e[O],L),Math.abs(n[O]-e[O])<(O=="e"||O==="f"?.51:.001)&&(e[O]=n[O])}let{a:f,b:p,c:E,d:m,e:b,f:y}=u,S=`matrix(${f}, ${p}, ${E}, ${m}, ${b}, ${y})`,v=o.parentElement instanceof HTMLPictureElement?o.parentElement:o;if(this.option("transformParent")&&(v=v.parentElement||v),v.style.transform===S)return;v.style.transform=S;const{contentWidth:N,contentHeight:M}=this.calculateContentDim();l.width=N,l.height=M,this.emit("afterTransform")}updateMetrics(e=!1){var n;if(!this||this.state===Re.Destroy||this.isContentLoading)return;const o=Math.max(1,((n=window.visualViewport)===null||n===void 0?void 0:n.scale)||1),{container:l,content:u}=this,f=u instanceof HTMLImageElement,p=l.getBoundingClientRect(),E=getComputedStyle(this.container);let m=p.width*o,b=p.height*o;const y=parseFloat(E.paddingTop)+parseFloat(E.paddingBottom),S=m-(parseFloat(E.paddingLeft)+parseFloat(E.paddingRight)),v=b-y;this.containerRect={width:m,height:b,innerWidth:S,innerHeight:v};const N=parseFloat(u.dataset.width||"")||(oe=>{let we=0;return we=oe instanceof HTMLImageElement?oe.naturalWidth:oe instanceof SVGElement?oe.width.baseVal.value:Math.max(oe.offsetWidth,oe.scrollWidth),we||0})(u),M=parseFloat(u.dataset.height||"")||(oe=>{let we=0;return we=oe instanceof HTMLImageElement?oe.naturalHeight:oe instanceof SVGElement?oe.height.baseVal.value:Math.max(oe.offsetHeight,oe.scrollHeight),we||0})(u);let O=this.option("width",N)||nn,L=this.option("height",M)||nn;const k=O===nn,F=L===nn;typeof O!="number"&&(O=N),typeof L!="number"&&(L=M),k&&(O=N*(L/M)),F&&(L=M/(N/O));let W=u.parentElement instanceof HTMLPictureElement?u.parentElement:u;this.option("transformParent")&&(W=W.parentElement||W);const ee=W.getAttribute("style")||"";W.style.setProperty("transform","none","important"),f&&(W.style.width="",W.style.height=""),W.offsetHeight;const Z=u.getBoundingClientRect();let j=Z.width*o,ie=Z.height*o,Y=j,Me=ie;j=Math.min(j,O),ie=Math.min(ie,L),f?{width:j,height:ie}=((oe,we,H,_e)=>{const ue=H/oe,Xt=_e/we,ot=Math.min(ue,Xt);return{width:oe*=ot,height:we*=ot}})(O,L,j,ie):(j=Math.min(j,O),ie=Math.min(ie,L));let Ce=.5*(Me-ie),se=.5*(Y-j);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:Z.top-p.top+Ce,bottom:p.bottom-Z.bottom+Ce,left:Z.left-p.left+se,right:p.right-Z.right+se,fitWidth:j,fitHeight:ie,width:j,height:ie,fullWidth:O,fullHeight:L}),W.style.cssText=ee,f&&(W.style.width=`${j}px`,W.style.height=`${ie}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(J(this.targetScale)<J(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===Re.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:e,contentHeight:n}=this.calculateContentDim(this.target),{targetScale:o,lockedAxis:l}=this,{fitWidth:u,fitHeight:f}=this.contentRect;let p=0,E=0,m=0,b=0;const y=this.option("infinite");if(y===!0||l&&y===l)p=-1/0,m=1/0,E=-1/0,b=1/0;else{let{containerRect:S,contentRect:v}=this,N=J(u*o,Ks),M=J(f*o,Ks),{innerWidth:O,innerHeight:L}=S;if(S.width===N&&(O=S.width),S.width===M&&(L=S.height),e>O){m=.5*(e-O),p=-1*m;let k=.5*(v.right-v.left);p+=k,m+=k}if(u>O&&e<O&&(p-=.5*(u-O),m-=.5*(u-O)),n>L){b=.5*(n-L),E=-1*b;let k=.5*(v.bottom-v.top);E+=k,b+=k}f>L&&n<L&&(p-=.5*(f-L),m-=.5*(f-L))}return{x:{min:p,max:m},y:{min:E,max:b}}}getBounds(){const e=this.option("bounds");return e!==nn?e:this.calculateBounds()}updateControls(){const e=this,n=e.container,{panMode:o,contentRect:l,targetScale:u,minScale:f}=e;let p=f,E=e.option("click")||!1;E&&(p=e.getNextScale(E));let m=e.canZoomIn(),b=e.canZoomOut(),y=o===yh&&!!this.option("touch"),S=b&&y;if(y&&(J(u)<J(f)&&!this.panOnlyZoomed&&(S=!0),(J(l.width,1)>J(l.fitWidth,1)||J(l.height,1)>J(l.fitHeight,1))&&(S=!0)),J(l.width*u,1)<J(l.fitWidth,1)&&(S=!1),o===tn&&(S=!1),Mn(n,this.cn("isDraggable"),S),!this.option("zoom"))return;let v=m&&J(p)>J(u),N=!v&&!S&&b&&J(p)<J(u);Mn(n,this.cn("canZoomIn"),v),Mn(n,this.cn("canZoomOut"),N);for(const M of n.querySelectorAll("[data-panzoom-action]")){let O=!1,L=!1;switch(M.dataset.panzoomAction){case"zoomIn":m?O=!0:L=!0;break;case"zoomOut":b?O=!0:L=!0;break;case"toggleZoom":case"iterateZoom":m||b?O=!0:L=!0;const k=M.querySelector("g");k&&(k.style.display=m?"":"none")}O?(M.removeAttribute("disabled"),M.removeAttribute("tabindex")):L&&(M.setAttribute("disabled",""),M.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:n=this.target.f,scale:o=this.targetScale,friction:l=this.option("friction"),angle:u=0,originX:f=0,originY:p=0,flipX:E=!1,flipY:m=!1,ignoreBounds:b=!1}){this.state!==Re.Destroy&&this.applyChange({panX:e-this.target.e,panY:n-this.target.f,scale:o/this.targetScale,angle:u,originX:f,originY:p,friction:l,flipX:E,flipY:m,ignoreBounds:b})}applyChange({panX:e=0,panY:n=0,scale:o=1,angle:l=0,originX:u=-this.current.e,originY:f=-this.current.f,friction:p=this.option("friction"),flipX:E=!1,flipY:m=!1,ignoreBounds:b=!1,bounce:y=this.option("bounce")}){const S=this.state;if(S===Re.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=p||0,this.ignoreBounds=b;const{current:v}=this,N=v.e,M=v.f,O=this.getMatrix(this.target);let L=new DOMMatrix().translate(N,M).translate(u,f).translate(e,n);if(this.option("zoom")){if(!b){const k=this.targetScale,F=this.minScale,W=this.maxScale;k*o<F&&(o=F/k),k*o>W&&(o=W/k)}L=L.scale(o)}L=L.translate(-u,-f).translate(-N,-M).multiply(O),l&&(L=L.rotate(l)),E&&(L=L.scale(-1,1)),m&&(L=L.scale(1,-1));for(const k of Bn)k!=="e"&&k!=="f"&&(L[k]>this.minScale+1e-5||L[k]<this.minScale-1e-5)?this.target[k]=L[k]:this.target[k]=J(L[k],Ks);(this.targetScale<this.scale||Math.abs(o-1)>.1||this.panMode===tn||y===!1)&&!b&&this.clampTargetBounds(),S===Re.Init?this.animate():this.isResting||(this.state=Re.Panning,this.requestTick())}stop(e=!1){if(this.state===Re.Init||this.state===Re.Destroy)return;const n=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const o of Bn)this.velocity[o]=0,e==="current"?this.current[o]=this.target[o]:e==="target"&&(this.target[o]=this.current[o]);this.setTransform(),Ne(this.container,"is-scaling"),Ne(this.container,"is-animating"),this.isTicking=!1,this.state=Re.Ready,n&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),ae(this.container,"is-animating"),this.isScaling&&ae(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,n=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==tn||!e||J(this.targetScale)<=J(this.minScale))return;this.emit("mouseMove",e);const{container:o,containerRect:l,contentRect:u}=this,f=l.width,p=l.height,E=o.getBoundingClientRect(),m=(e.clientX||0)-E.left,b=(e.clientY||0)-E.top;let{contentWidth:y,contentHeight:S}=this.calculateContentDim(this.target);const v=this.option("mouseMoveFactor");v>1&&(y!==f&&(y*=v),S!==p&&(S*=v));let N=.5*(y-f)-m/f*100/100*(y-f);N+=.5*(u.right-u.left);let M=.5*(S-p)-b/p*100/100*(S-p);M+=.5*(u.bottom-u.top),this.applyChange({panX:N-this.target.e,panY:M-this.target.f,friction:n})}zoomWithWheel(e){if(this.state===Re.Destroy||this.state===Re.Init)return;const n=Date.now();if(n-this.pwt<45)return void e.preventDefault();this.pwt=n;var o=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(m,b){return Math.abs(b)>Math.abs(m)?b:m});const l=Math.max(-1,Math.min(1,o)),{targetScale:u,maxScale:f,minScale:p}=this;let E=u*(100+45*l)/100;J(E)<J(p)&&J(u)<=J(p)?(this.cwd+=Math.abs(l),E=p):J(E)>J(f)&&J(u)>=J(f)?(this.cwd+=Math.abs(l),E=f):(this.cwd=0,E=Math.max(Math.min(E,f),p)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),J(E)!==J(u)&&this.zoomTo(E,{event:e}))}canZoomIn(){return this.option("zoom")&&(J(this.contentRect.width,1)<J(this.contentRect.fitWidth,1)||J(this.targetScale)<J(this.maxScale))}canZoomOut(){return this.option("zoom")&&J(this.targetScale)>J(this.minScale)}zoomIn(e=1.25,n){this.zoomTo(this.targetScale*e,n)}zoomOut(e=.8,n){this.zoomTo(this.targetScale*e,n)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:n=nn,originX:o=nn,originY:l=nn,event:u}={}){if(this.isContentLoading||this.state===Re.Destroy)return;const{targetScale:f,fullScale:p,maxScale:E,coverScale:m}=this;if(this.stop(),this.panMode===tn&&(u=this.pmme||u),u||o===nn||l===nn){const y=this.content.getBoundingClientRect(),S=this.container.getBoundingClientRect(),v=u?u.clientX:S.left+.5*S.width,N=u?u.clientY:S.top+.5*S.height;o=v-y.left-.5*y.width,l=N-y.top-.5*y.height}let b=1;typeof e=="number"?b=e:e==="full"?b=p:e==="cover"?b=m:e==="max"?b=E:e==="fit"?b=1:e==="next"&&(b=this.getNextScale("iterateZoom")),b=b/f||1,n=n===nn?b>1?.15:.25:n,this.applyChange({scale:b,originX:o,originY:l,friction:n}),u&&this.panMode===tn&&this.panWithMouse(u,n)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:n,target:o}=this;this.applyChange({panX:.5*e.width-(n.left+.5*n.fitWidth)-o.e,panY:.5*e.height-(n.top+.5*n.fitHeight)-o.f,scale:e.width/n.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:n,target:o}=this;this.applyChange({panX:.5*e.width-(n.left+.5*n.fitWidth)-o.e,panY:.5*e.innerHeight-(n.top+.5*n.fitHeight)-o.f,scale:e.height/n.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,n=this.cn("inFullscreen"),o=this.cn("htmlHasFullscreen");e.classList.toggle(n);const l=e.classList.contains(n);l?(document.documentElement.classList.add(o),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(o),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(l?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:n,b:o,c:l,d:u,e:f,f:p}=e;return new DOMMatrix([n,o,l,u,f,p])}reset(e){if(this.state!==Re.Init&&this.state!==Re.Destroy){this.stop("current");for(const n of Bn)this.target[n]=qs[n];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=Re.Panning,this.requestTick())}}destroy(){this.stop(),this.state=Re.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:n}=this,o=this.option("classes")||{};for(const l of Object.values(o))e.classList.remove(l+"");n&&(n.removeEventListener("load",this.onLoad),n.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(Wi,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:aA}),Object.defineProperty(Wi,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const Ch=function(i,e){let n=!0;return(...o)=>{n&&(n=!1,i(...o),setTimeout(()=>{n=!0},e))}},_h=(i,e)=>{let n=[];return i.childNodes.forEach(o=>{o.nodeType!==Node.ELEMENT_NODE||e&&!o.matches(e)||n.push(o)}),n},cA={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var rt;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Destroy=2]="Destroy"})(rt||(rt={}));const Va=i=>{if(typeof i=="string"||i instanceof HTMLElement)i={html:i};else{const e=i.thumb;e!==void 0&&(typeof e=="string"&&(i.thumbSrc=e),e instanceof HTMLImageElement&&(i.thumbEl=e,i.thumbElSrc=e.src,i.thumbSrc=e.src),delete i.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},i)},uA=(i={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},i);class bn extends Oo{constructor(e,n){super(n),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}const hA={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class z1 extends bn{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),ae(e,this.cn("list")),e.setAttribute("role","tablist");const n=this.instance.container;n.appendChild(e),ae(n,this.cn("hasDots")),this.list=e}return e}refresh(){var e;const n=this.instance.pages.length,o=Math.min(2,this.option("minCount")),l=Math.max(2e3,this.option("maxCount")),u=this.option("dynamicFrom");if(n<o||n>l)return void this.cleanup();const f=typeof u=="number"&&n>5&&n>=u,p=!this.list||this.isDynamic!==f||this.list.children.length!==n;p&&this.cleanup();const E=this.build();if(Mn(E,this.cn("isDynamic"),!!f),p)for(let y=0;y<n;y++)E.append(this.createItem(y));let m,b=0;for(const y of[...E.children]){const S=b===this.instance.page;S&&(m=y),Mn(y,this.cn("isCurrent"),S),(e=y.children[0])===null||e===void 0||e.setAttribute("aria-selected",S?"true":"false");for(const v of["isBeforePrev","isPrev","isNext","isAfterNext"])Ne(y,this.cn(v));b++}if(m=m||E.firstChild,f&&m){const y=m.previousElementSibling,S=y&&y.previousElementSibling;ae(y,this.cn("isPrev")),ae(S,this.cn("isBeforePrev"));const v=m.nextElementSibling,N=v&&v.nextElementSibling;ae(v,this.cn("isNext")),ae(N,this.cn("isAfterNext"))}this.isDynamic=f}createItem(e=0){var n;const o=document.createElement("li");o.setAttribute("role","presentation");const l=Nn(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return o.appendChild(l),(n=o.children[0])===null||n===void 0||n.setAttribute("role","tab"),o}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,Ne(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(z1,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:hA});const Zs="disabled",Qs="next",vh="prev";class j1 extends bn{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const e=this.instance,n=e.pages.length,o=e.page;if(n<2)return void this.cleanup();this.build();let l=this.prev,u=this.next;l&&u&&(l.removeAttribute(Zs),u.removeAttribute(Zs),e.isInfinite||(o<=0&&l.setAttribute(Zs,""),o>=n-1&&u.setAttribute(Zs,"")))}addBtn(e){var n;const o=this.instance,l=document.createElement("button");l.setAttribute("tabindex","0"),l.setAttribute("title",o.localize(`{{${e.toUpperCase()}}}`)),ae(l,this.cn("button")+" "+this.cn(e===Qs?"isNext":"isPrev"));const u=o.isRTL?e===Qs?vh:Qs:e;var f;return l.innerHTML=o.localize(this.option(`${u}Tpl`)),l.dataset[`carousel${f=e,f?f.match("^[a-z]")?f.charAt(0).toUpperCase()+f.substring(1):f:""}`]="true",(n=this.container)===null||n===void 0||n.appendChild(l),l}build(){const e=this.instance.container,n=this.cn("container");let{container:o,prev:l,next:u}=this;o||(o=e.querySelector("."+n),this.isDom=!!o),o||(o=document.createElement("div"),ae(o,n),e.appendChild(o)),this.container=o,u||(u=o.querySelector("[data-carousel-next]")),u||(u=this.addBtn(Qs)),this.next=u,l||(l=o.querySelector("[data-carousel-prev]")),l||(l=this.addBtn(vh)),this.prev=l}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(j1,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class H1 extends bn{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){const{nav:e,target:n}=this;e&&n&&(e.options.initialSlide=n.options.initialPage,e.state===rt.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),n.state===rt.Ready?this.onTargetReady(n):n.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,n,o){this.onNavTouch(e,e.panzoom,o)}onNavTouch(e,n,o){var l,u;if(Math.abs(n.dragOffset.x)>3||Math.abs(n.dragOffset.y)>3)return;const f=o.target,{nav:p,target:E}=this;if(!p||!E||!f)return;const m=f.closest("[data-index]");if(o.stopPropagation(),o.preventDefault(),!m)return;const b=parseInt(m.dataset.index||"",10)||0,y=E.getPageForSlide(b),S=p.getPageForSlide(b);p.slideTo(S),E.slideTo(y,{friction:((u=(l=this.nav)===null||l===void 0?void 0:l.plugins)===null||u===void 0?void 0:u.Sync.option("friction"))||0}),this.markSelectedSlide(b)}onNavCreateSlide(e,n){n.index===this.selectedIndex&&this.markSelectedSlide(n.index)}onTargetChange(){var e,n;const{target:o,nav:l}=this;if(!o||!l||l.state!==rt.Ready||o.state!==rt.Ready)return;const u=(n=(e=o.pages[o.page])===null||e===void 0?void 0:e.slides[0])===null||n===void 0?void 0:n.index,f=l.getPageForSlide(u);this.markSelectedSlide(u),l.slideTo(f,l.prevPage===null&&o.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){const n=this.nav;n&&n.state===rt.Ready&&(this.selectedIndex=e,[...n.slides].map(o=>{o.el&&o.el.classList[o.index===e?"add":"remove"]("is-nav-selected")}))}attach(){const e=this;let n=e.options.target,o=e.options.nav;n?e.addAsNavFor(n):o&&e.addAsTargetFor(o)}detach(){const e=this,n=e.nav,o=e.target;n&&(n.off("ready",e.onNavReady),n.off("createSlide",e.onNavCreateSlide),n.off("Panzoom.click",e.onNavClick),n.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,o&&(o.off("ready",e.onTargetReady),o.off("refresh",e.onTargetChange),o.off("change",e.onTargetChange)),e.target=null}}Object.defineProperty(H1,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const fA={Navigation:j1,Dots:z1,Sync:H1},Js="animationend",Sh="isSelected",eo="slide";class Ui extends Tc{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===rt.Ready}get isInfinite(){let e=!1;const{contentDim:n,viewportDim:o,pages:l,slides:u}=this,f=u[0];return l.length>=2&&f&&n+f.dim>=o&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,n={},o={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:rt.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!Dt(e))throw new Error("No Element found");this.container=e,this.slideNext=Ch(this.slideNext.bind(this),150),this.slidePrev=Ch(this.slidePrev.bind(this),150),this.userOptions=n,this.userPlugins=o,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,n;const o=Lt({},Ui.defaults,this.userOptions);let l="";const u=o.breakpoints;if(u&&Ll(u))for(const[f,p]of Object.entries(u))window.matchMedia(f).matches&&Ll(p)&&(l+=f,Lt(o,p));l===this.bp&&this.state!==rt.Init||(this.bp=l,this.state===rt.Ready&&(o.initialSlide=((n=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||n===void 0?void 0:n.index)||0),this.state!==rt.Init&&this.destroy(),super.setOptions(o),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=rt.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},Ui.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=rt.Ready,this.emit("ready")}initLayout(){const{container:e}=this,n=this.option("classes");ae(e,this.cn("container")),Mn(e,n.isLTR,!this.isRTL),Mn(e,n.isRTL,this.isRTL),Mn(e,n.isVertical,!this.isHorizontal),Mn(e,n.isHorizontal,this.isHorizontal);let o=this.option("viewport")||e.querySelector(`.${n.viewport}`);o||(o=document.createElement("div"),ae(o,n.viewport),o.append(..._h(e,`.${n.slide}`)),e.prepend(o)),o.addEventListener("scroll",this.onScroll);let l=this.option("track")||e.querySelector(`.${n.track}`);l||(l=document.createElement("div"),ae(l,n.track),l.append(...Array.from(o.childNodes))),l.setAttribute("aria-live","polite"),o.contains(l)||o.prepend(l),this.viewport=o,this.track=l,this.emit("initLayout")}initSlides(){const{track:e}=this;if(!e)return;const n=[...this.slides],o=[];[..._h(e,`.${this.cn(eo)}`)].forEach(l=>{if(Dt(l)){const u=Va({el:l,isDom:!0,index:this.slides.length});o.push(u)}});for(let l of[...this.option("slides",[])||[],...n])o.push(Va(l));this.slides=o;for(let l=0;l<this.slides.length;l++)this.slides[l].index=l;for(const l of o)this.emit("beforeInitSlide",l,l.index),this.emit("initSlide",l,l.index);this.emit("initSlides")}setInitialPage(){const e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:e,pages:n,isHorizontal:o}=this;if(!e||!n.length)return;let l=this.page;n[l]||(this.page=l=0);const u=(n[l].pos||0)*(this.isRTL&&o?1:-1),f=o?`${u}px`:"0",p=o?"0":`${u}px`;e.style.transform=`translate3d(${f}, ${p}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new Wi(this.viewport,Lt({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:n=>!(this.pages.length<2&&!n.options.infinite),bounds:()=>this.getBounds(),maxVelocity:n=>Math.abs(n.target[this.axis]-n.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(n,o,...l)=>{this.emit(`Panzoom.${o}`,n,...l)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:n,viewportDim:o}=this;let l=this.option("slidesPerPage");l=(l==="auto"||n<=o)&&this.option("fill")!==!1?1/0:parseFloat(l+"");let u=0,f=0,p=0;for(const E of this.slides)(!e.length||f+E.dim-o>.05||p>=l)&&(e.push(uA()),u=e.length-1,f=0,p=0),e[u].slides.push(E),f+=E.dim+E.gap,p++;return e}processPages(){const e=this.pages,{contentDim:n,viewportDim:o,isInfinite:l}=this,u=this.option("center"),f=this.option("fill"),p=f&&u&&n>o&&!l;if(e.forEach((b,y)=>{var S;b.index=y,b.pos=((S=b.slides[0])===null||S===void 0?void 0:S.pos)||0,b.dim=0;for(const[v,N]of b.slides.entries())b.dim+=N.dim,v<b.slides.length-1&&(b.dim+=N.gap);p&&b.pos+.5*b.dim<.5*o?b.pos=0:p&&b.pos+.5*b.dim>=n-.5*o?b.pos=n-o:u&&(b.pos+=-.5*(o-b.dim))}),e.forEach(b=>{f&&!l&&n>o&&(b.pos=Math.max(b.pos,0),b.pos=Math.min(b.pos,n-o)),b.pos=J(b.pos,1e3),b.dim=J(b.dim,1e3),Math.abs(b.pos)<=.1&&(b.pos=0)}),l)return e;const E=[];let m;return e.forEach(b=>{const y=Object.assign({},b);m&&y.pos===m.pos?(m.dim+=y.dim,m.slides=[...m.slides,...y.slides]):(y.index=E.length,m=y,E.push(y))}),E}getPageFromIndex(e=0){const n=this.pages.length;let o;return e=parseInt((e||0).toString())||0,o=this.isInfinite?(e%n+n)%n:Math.max(Math.min(e,n-1),0),o}getSlideMetrics(e){var n,o;const l=this.isHorizontal?"width":"height";let u=0,f=0,p=e.el;const E=!(!p||p.parentNode);if(p?u=parseFloat(p.dataset[l]||"")||0:(p=document.createElement("div"),p.style.visibility="hidden",(this.track||document.body).prepend(p)),ae(p,this.cn(eo)+" "+e.class+" "+e.customClass),u)p.style[l]=`${u}px`,p.style[l==="width"?"height":"width"]="";else{E&&(this.track||document.body).prepend(p),u=p.getBoundingClientRect()[l]*Math.max(1,((n=window.visualViewport)===null||n===void 0?void 0:n.scale)||1);let b=p[this.isHorizontal?"offsetWidth":"offsetHeight"];b-1>u&&(u=b)}const m=getComputedStyle(p);return m.boxSizing==="content-box"&&(this.isHorizontal?(u+=parseFloat(m.paddingLeft)||0,u+=parseFloat(m.paddingRight)||0):(u+=parseFloat(m.paddingTop)||0,u+=parseFloat(m.paddingBottom)||0)),f=parseFloat(m[this.isHorizontal?"marginRight":"marginBottom"])||0,E?(o=p.parentElement)===null||o===void 0||o.removeChild(p):e.el||p.remove(),{dim:J(u,1e3),gap:J(f,1e3)}}getBounds(){const{isInfinite:e,isRTL:n,isHorizontal:o,pages:l}=this;let u={min:0,max:0};if(e)u={min:-1/0,max:1/0};else if(l.length){const f=l[0].pos,p=l[l.length-1].pos;u=n&&o?{min:f,max:p}:{min:-1*p,max:-1*f}}return{x:o?u:{min:0,max:0},y:o?{min:0,max:0}:u}}repositionSlides(){let e,{isHorizontal:n,isRTL:o,isInfinite:l,viewport:u,viewportDim:f,contentDim:p,page:E,pages:m,slides:b,panzoom:y}=this,S=0,v=0,N=0,M=0;y?M=-1*y.current[this.axis]:m[E]&&(M=m[E].pos||0),e=n?o?"right":"left":"top",o&&n&&(M*=-1);for(const F of b){const W=F.el;W?(e==="top"?(W.style.right="",W.style.left=""):W.style.top="",F.index!==S?W.style[e]=v===0?"":`${J(v,1e3)}px`:W.style[e]="",N+=F.dim+F.gap,S++):v+=F.dim+F.gap}if(l&&N&&u){let F=getComputedStyle(u),W="padding",ee=n?"Right":"Bottom",Z=parseFloat(F[W+(n?"Left":"Top")]);M-=Z,f+=Z,f+=parseFloat(F[W+ee]);for(const j of b)j.el&&(J(j.pos)<J(f)&&J(j.pos+j.dim+j.gap)<J(M)&&J(M)>J(p-f)&&(j.el.style[e]=`${J(v+N,1e3)}px`),J(j.pos+j.gap)>=J(p-f)&&J(j.pos)>J(M+f)&&J(M)<J(f)&&(j.el.style[e]=`-${J(N,1e3)}px`))}let O,L,k=[...this.inTransition];if(k.length>1&&(O=m[k[0]],L=m[k[1]]),O&&L){let F=0;for(const W of b)W.el?this.inTransition.has(W.index)&&O.slides.indexOf(W)<0&&(W.el.style[e]=`${J(F+(O.pos-L.pos),1e3)}px`):F+=W.dim+W.gap}}createSlideEl(e){const{track:n,slides:o}=this;if(!n||!e||e.el&&e.el.parentNode)return;const l=e.el||document.createElement("div");ae(l,this.cn(eo)),ae(l,e.class),ae(l,e.customClass);const u=e.html;u&&(u instanceof HTMLElement?l.appendChild(u):l.innerHTML=e.html+"");const f=[];o.forEach((b,y)=>{b.el&&f.push(y)});const p=e.index;let E=null;f.length&&(E=o[f.reduce((b,y)=>Math.abs(y-p)<Math.abs(b-p)?y:b)]);const m=E&&E.el&&E.el.parentNode?E.index<e.index?E.el.nextSibling:E.el:null;n.insertBefore(l,n.contains(m)?m:null),e.el=l,this.emit("createSlide",e)}removeSlideEl(e,n=!1){const o=e==null?void 0:e.el;if(!o||!o.parentNode)return;const l=this.cn(Sh);if(o.classList.contains(l)&&(Ne(o,l),this.emit("unselectSlide",e)),e.isDom&&!n)return o.removeAttribute("aria-hidden"),o.removeAttribute("data-index"),void(o.style.left="");this.emit("removeSlide",e);const u=new CustomEvent(Js);o.dispatchEvent(u),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,n=this.option("transition")){var o,l,u,f;if(!n)return!1;const p=this.page,{pages:E,panzoom:m}=this;e=parseInt((e||0).toString())||0;const b=this.getPageFromIndex(e);if(!m||!E[b]||E.length<2||Math.abs((((l=(o=E[p])===null||o===void 0?void 0:o.slides[0])===null||l===void 0?void 0:l.dim)||0)-this.viewportDim)>1)return!1;let y=e>p?1:-1;this.isInfinite&&(p===0&&e===E.length-1&&(y=-1),p===E.length-1&&e===0&&(y=1));const S=E[b].pos*(this.isRTL?1:-1);if(p===b&&Math.abs(S-m.target[this.axis])<1)return!1;this.clearTransitions();const v=m.isResting;ae(this.container,this.cn("inTransition"));const N=((u=E[p])===null||u===void 0?void 0:u.slides[0])||null,M=((f=E[b])===null||f===void 0?void 0:f.slides[0])||null;this.inTransition.add(M.index),this.createSlideEl(M);let O=N.el,L=M.el;v||n===eo||(n="fadeFast",O=null);const k=this.isRTL?"next":"prev",F=this.isRTL?"prev":"next";return O&&(this.inTransition.add(N.index),N.transition=n,O.addEventListener(Js,this.onAnimationEnd),O.classList.add(`f-${n}Out`,`to-${y>0?F:k}`)),L&&(M.transition=n,L.addEventListener(Js,this.onAnimationEnd),L.classList.add(`f-${n}In`,`from-${y>0?k:F}`)),m.current[this.axis]=S,m.target[this.axis]=S,m.requestTick(),this.onChange(b),!0}manageSlideVisiblity(){const e=new Set,n=new Set,o=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const l of this.slides)o.has(l)?e.add(l):n.add(l);for(const l of this.inTransition)e.add(this.slides[l]);for(const l of e)this.createSlideEl(l),this.lazyLoadSlide(l);for(const l of n)e.has(l)||this.removeSlideEl(l);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let n=this.cn(Sh);if(n)for(const o of this.slides){const l=o.el;l&&(l.dataset.index=`${o.index}`,l.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(o)?l.removeAttribute(e):l.setAttribute(e,"true"):this.pages[this.page].slides.includes(o)?(l.classList.contains(n)||(ae(l,n),this.emit("selectSlide",o)),l.removeAttribute(e)):(l.classList.contains(n)&&(Ne(l,n),this.emit("unselectSlide",o)),l.setAttribute(e,"true")))}}flipInfiniteTrack(){const{axis:e,isHorizontal:n,isInfinite:o,isRTL:l,viewportDim:u,contentDim:f}=this,p=this.panzoom;if(!p||!o)return;let E=p.current[e],m=p.target[e]-E,b=0,y=.5*u;l&&n?(E<-y&&(b=-1,E+=f),E>f-y&&(b=1,E-=f)):(E>y&&(b=1,E-=f),E<-f+y&&(b=-1,E+=f)),b&&(p.current[e]=E,p.target[e]=E+m)}lazyLoadImg(e,n){const o=this,l="f-fadeIn",u="is-preloading";let f=!1,p=null;const E=()=>{f||(f=!0,p&&(p.remove(),p=null),Ne(n,u),n.complete&&(ae(n,l),setTimeout(()=>{Ne(n,l)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(o.updateMetrics(),o.setViewportHeight()),this.emit("load",e))};ae(n,u),n.src=n.dataset.lazySrcset||n.dataset.lazySrc||"",delete n.dataset.lazySrc,delete n.dataset.lazySrcset,n.addEventListener("error",()=>{E()}),n.addEventListener("load",()=>{E()}),setTimeout(()=>{const m=n.parentNode;m&&e.el&&(n.complete?E():f||(p=Nn(Ic),m.insertBefore(p,n)))},300)}lazyLoadSlide(e){const n=e&&e.el;if(!n)return;const o=new Set;let l=Array.from(n.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));n.dataset.lazySrc&&l.push(n),l.map(u=>{u instanceof HTMLImageElement?o.add(u):u instanceof HTMLElement&&u.dataset.lazySrc&&(u.style.backgroundImage=`url('${u.dataset.lazySrc}')`,delete u.dataset.lazySrc)});for(const u of o)this.lazyLoadImg(e,u)}onAnimationEnd(e){var n;const o=e.target,l=o?parseInt(o.dataset.index||"",10)||0:-1,u=this.slides[l],f=e.animationName;if(!o||!u||!f)return;const p=!!this.inTransition.has(l)&&u.transition;p&&f.substring(0,p.length+2)===`f-${p}`&&this.inTransition.delete(l),this.inTransition.size||this.clearTransitions(),l===this.page&&(!((n=this.panzoom)===null||n===void 0)&&n.isResting)&&this.emit("settle")}onDecel(e,n=0,o=0,l=0,u=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:f,isHorizontal:p,axis:E,pages:m}=this,b=m.length,y=Math.abs(Math.atan2(o,n)/(Math.PI/180));let S=0;if(S=y>45&&y<135?p?0:o:p?n:0,!b)return;let v=this.page,N=f&&p?1:-1;const M=e.current[E]*N;let{pageIndex:O}=this.getPageFromPosition(M);Math.abs(S)>5?(m[v].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(v=O),v=f&&p?S<0?v-1:v+1:S<0?v+1:v-1):v=l===0&&u===0?v:O,this.slideTo(v,{transition:!1,friction:e.option("decelFriction")})}onClick(e){const n=e.target,o=n&&Dt(n)?n.dataset:null;let l,u;o&&(o.carouselPage!==void 0?(u="slideTo",l=o.carouselPage):o.carouselNext!==void 0?u="slideNext":o.carouselPrev!==void 0&&(u="slidePrev")),u?(e.preventDefault(),e.stopPropagation(),n&&!n.hasAttribute("disabled")&&this[u](l)):this.emit("click",e)}onSlideTo(e){const n=e.detail||0;this.slideTo(this.getPageForSlide(n),{friction:0})}onChange(e,n=0){const o=this.page;this.prevPage=o,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==o&&(this.markSelectedSlides(),this.emit("change",e,o,n))}onRefresh(){let e=this.contentDim,n=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===n||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,n=null){this.destroy(),this.state=rt.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=n||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:n=this.option("friction"),transition:o=this.option("transition")}={}){if(this.state===rt.Destroy)return;e=parseInt((e||0).toString())||0;const l=this.getPageFromIndex(e),{axis:u,isHorizontal:f,isRTL:p,pages:E,panzoom:m}=this,b=E.length,y=p&&f?1:-1;if(!m||!b)return;if(this.page!==l){const v=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",v,e),v.defaultPrevented)return}if(this.transitionTo(e,o))return;let S=E[l].pos;if(this.isInfinite){const v=this.contentDim,N=m.target[u]*y;b===2?S+=v*Math.floor(parseFloat(e+"")/2):S=[S,S-v,S+v].reduce(function(M,O){return Math.abs(O-N)<Math.abs(M-N)?O:M})}S*=y,Math.abs(m.target[u]-S)<1||(m.panTo({x:f?S:0,y:f?0:S,friction:n}),this.onChange(l))}slideToClosest(e){if(this.panzoom){const{pageIndex:n}=this.getPageFromPosition();this.slideTo(n,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),Ne(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const n of this.slides){const o=n.el;if(o){o.removeEventListener(Js,this.onAnimationEnd),o.classList.remove(...e);const l=n.transition;l&&o.classList.remove(`f-${l}Out`,`f-${l}In`)}}this.manageSlideVisiblity()}addSlide(e,n){var o,l,u,f;const p=this.panzoom,E=((o=this.pages[this.page])===null||o===void 0?void 0:o.pos)||0,m=((l=this.pages[this.page])===null||l===void 0?void 0:l.dim)||0,b=this.contentDim<this.viewportDim;let y=Array.isArray(n)?n:[n];const S=[];for(const v of y)S.push(Va(v));this.slides.splice(e,0,...S);for(let v=0;v<this.slides.length;v++)this.slides[v].index=v;for(const v of S)this.emit("beforeInitSlide",v,v.index);if(this.page>=e&&(this.page+=S.length),this.updateMetrics(),p){const v=((u=this.pages[this.page])===null||u===void 0?void 0:u.pos)||0,N=((f=this.pages[this.page])===null||f===void 0?void 0:f.dim)||0,M=this.pages.length||1,O=this.isRTL?m-N:N-m,L=this.isRTL?E-v:v-E;b&&M===1?(e<=this.page&&(p.current[this.axis]-=O,p.target[this.axis]-=O),p.panTo({[this.isHorizontal?"x":"y"]:-1*v})):L&&e<=this.page&&(p.target[this.axis]-=L,p.current[this.axis]-=L,p.requestTick())}for(const v of S)this.emit("initSlide",v,v.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){const n=this.slides.length;e=(e%n+n)%n;const o=this.slides[e];if(o){this.removeSlideEl(o,!0),this.slides.splice(e,1);for(let l=0;l<this.slides.length;l++)this.slides[l].index=l;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",o)}}updateMetrics(){const{panzoom:e,viewport:n,track:o,slides:l,isHorizontal:u,isInfinite:f}=this;if(!o)return;const p=u?"width":"height",E=u?"offsetWidth":"offsetHeight";if(n){let y=Math.max(n[E],J(n.getBoundingClientRect()[p],1e3)),S=getComputedStyle(n),v="padding",N=u?"Right":"Bottom";y-=parseFloat(S[v+(u?"Left":"Top")])+parseFloat(S[v+N]),this.viewportDim=y}let m,b=0;for(const[y,S]of l.entries()){let v=0,N=0;!S.el&&m?(v=m.dim,N=m.gap):({dim:v,gap:N}=this.getSlideMetrics(S),m=S),v=J(v,1e3),N=J(N,1e3),S.dim=v,S.gap=N,S.pos=b,b+=v,(f||y<l.length-1)&&(b+=N)}b=J(b,1e3),this.contentDim=b,e&&(e.contentRect[p]=b,e.contentRect[u?"fullWidth":"fullHeight"]=b),this.pages=this.createPages(),this.pages=this.processPages(),this.state===rt.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,n=!1,o=!1){e===void 0&&(e=this.page);const l=this,u=l.panzoom,f=l.contentDim,p=l.pages[e]||0;if(!p||!u)return e>this.page?-1:1;let E=-1*u.current.e,m=J((E-p.pos)/(1*p.dim),1e3),b=m,y=m;this.isInfinite&&o!==!0&&(b=J((E-p.pos+f)/(1*p.dim),1e3),y=J((E-p.pos-f)/(1*p.dim),1e3));let S=[m,b,y].reduce(function(v,N){return Math.abs(N)<Math.abs(v)?N:v});return n?S:S>1?1:S<-1?-1:S}setViewportHeight(){const{page:e,pages:n,viewport:o,isHorizontal:l}=this;if(!o||!n[e])return;let u=0;l&&this.track&&(this.track.style.height="auto",n[e].slides.forEach(f=>{f.el&&(u=Math.max(u,f.el.offsetHeight))})),o.style.height=u?`${u}px`:""}getPageForSlide(e){for(const n of this.pages)for(const o of n.slides)if(o.index===e)return n.index;return-1}getVisibleSlides(e=0){var n;const o=new Set;let{panzoom:l,contentDim:u,viewportDim:f,pages:p,page:E}=this;if(f){u=u+((n=this.slides[this.slides.length-1])===null||n===void 0?void 0:n.gap)||0;let m=0;m=l&&l.state!==Re.Init&&l.state!==Re.Destroy?-1*l.current[this.axis]:p[E]&&p[E].pos||0,this.isInfinite&&(m-=Math.floor(m/u)*u),this.isRTL&&this.isHorizontal&&(m*=-1);const b=m-f*e,y=m+f*(e+1),S=this.isInfinite?[-1,0,1]:[0];for(const v of this.slides)for(const N of S){const M=v.pos+N*u,O=M+v.dim+v.gap;M<y&&O>b&&o.add(v)}}return o}getPageFromPosition(e){const{viewportDim:n,contentDim:o,slides:l,pages:u,panzoom:f}=this,p=u.length,E=l.length,m=l[0],b=l[E-1],y=this.option("center");let S=0,v=0,N=0,M=e===void 0?-1*((f==null?void 0:f.target[this.axis])||0):e;y&&(M+=.5*n),this.isInfinite?(M<m.pos-.5*b.gap&&(M-=o,N=-1),M>b.pos+b.dim+.5*b.gap&&(M-=o,N=1)):M=Math.max(m.pos||0,Math.min(M,b.pos));let O=b,L=l.find(k=>{const F=k.pos-.5*O.gap,W=k.pos+k.dim+.5*k.gap;return O=k,M>=F&&M<W});return L||(L=b),v=this.getPageForSlide(L.index),S=v+N*p,{page:S,pageIndex:v}}setPageFromPosition(){const{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([rt.Destroy].includes(this.state))return;this.state=rt.Destroy;const{container:e,viewport:n,track:o,slides:l,panzoom:u}=this,f=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),u&&(u.destroy(),this.panzoom=null),l&&l.forEach(E=>{this.removeSlideEl(E)}),this.detachPlugins(),n&&(n.removeEventListener("scroll",this.onScroll),n.offsetParent&&o&&o.offsetParent&&n.replaceWith(...o.childNodes));for(const[E,m]of Object.entries(f))E!=="container"&&m&&e.classList.remove(m);this.track=null,this.viewport=null,this.page=0,this.slides=[];const p=this.events.get("ready");this.events=new Map,p&&this.events.set("ready",p)}}Object.defineProperty(Ui,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:Wi}),Object.defineProperty(Ui,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:cA}),Object.defineProperty(Ui,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:fA});const V1=function(i){if(!Dt(i))return 0;const e=window.scrollY,n=window.innerHeight,o=e+n,l=i.getBoundingClientRect(),u=l.y+e,f=l.height,p=u+f;if(e>p||o<u)return 0;if(e<u&&o>p||u<e&&p>o)return 100;let E=f;u<e&&(E-=e-u),p>o&&(E-=p-o);const m=E/n*100;return Math.round(m)},fs=!(typeof window>"u"||!window.document||!window.document.createElement);let Wa;const Ya=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),Th=i=>{if(i&&fs){Wa===void 0&&document.createElement("div").focus({get preventScroll(){return Wa=!0,!1}});try{if(Wa)i.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,n=window.scrollX||document.body.scrollLeft;i.focus(),document.body.scrollTo({top:e,left:n,behavior:"auto"})}}catch{}}},W1=()=>{const i=document;let e,n="",o="",l="";return i.fullscreenEnabled?(n="requestFullscreen",o="exitFullscreen",l="fullscreenElement"):i.webkitFullscreenEnabled&&(n="webkitRequestFullscreen",o="webkitExitFullscreen",l="webkitFullscreenElement"),n&&(e={request:function(u=i.documentElement){return n==="webkitRequestFullscreen"?u[n](Element.ALLOW_KEYBOARD_INPUT):u[n]()},exit:function(){return i[l]&&i[o]()},isFullscreen:function(){return i[l]}}),e},Pl={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},U1),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"};var dt,bt;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Closing=2]="Closing",i[i.CustomClosing=3]="CustomClosing",i[i.Destroy=4]="Destroy"})(dt||(dt={})),function(i){i[i.Loading=0]="Loading",i[i.Opening=1]="Opening",i[i.Ready=2]="Ready",i[i.Closing=3]="Closing"}(bt||(bt={}));let Ih="",as=!1,to=!1,Ti=null;const Y1=()=>{let i="",e="";const n=Se.getInstance();if(n){const o=n.carousel,l=n.getSlide();if(o&&l){let u=l.slug||void 0,f=l.triggerEl||void 0;e=u||n.option("slug")||"",!e&&f&&f.dataset&&(e=f.dataset.fancybox||""),e&&e!=="true"&&(i="#"+e+(!u&&o.slides.length>1?"-"+(l.index+1):""))}}return{hash:i,slug:e,index:1}},No=()=>{const i=new URL(document.URL).hash,e=i.slice(1).split("-"),n=e[e.length-1],o=n&&/^\+?\d+$/.test(n)&&parseInt(e.pop()||"1",10)||1;return{hash:i,slug:e.join("-"),index:o}},X1=()=>{const{slug:i,index:e}=No();if(!i)return;let n=document.querySelector(`[data-slug="${i}"]`);if(n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),Se.getInstance())return;const o=document.querySelectorAll(`[data-fancybox="${i}"]`);o.length&&(n=o[e-1],n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},G1=()=>{if(Se.defaults.Hash===!1)return;const i=Se.getInstance();if((i==null?void 0:i.options.Hash)===!1)return;const{slug:e,index:n}=No(),{slug:o}=Y1();i&&(e===o?i.jumpTo(n-1):(as=!0,i.close())),X1()},$1=()=>{Ti&&clearTimeout(Ti),queueMicrotask(()=>{G1()})},Oh=()=>{window.addEventListener("hashchange",$1,!1),setTimeout(()=>{G1()},500)};fs&&(/complete|interactive|loaded/.test(document.readyState)?Oh():document.addEventListener("DOMContentLoaded",Oh));const no="is-zooming-in";class q1 extends bn{onCreateSlide(e,n,o){const l=this.instance.optionFor(o,"src")||"";o.el&&o.type==="image"&&typeof l=="string"&&this.setImage(o,l)}onRemoveSlide(e,n,o){o.panzoom&&o.panzoom.destroy(),o.panzoom=void 0,o.imageEl=void 0}onChange(e,n,o,l){Ne(this.instance.container,no);for(const u of n.slides){const f=u.panzoom;f&&u.index!==o&&f.reset(.35)}}onClose(){var e;const n=this.instance,o=n.container,l=n.getSlide();if(!o||!o.parentElement||!l)return;const{el:u,contentEl:f,panzoom:p,thumbElSrc:E}=l;if(!u||!E||!f||!p||p.isContentLoading||p.state===Re.Init||p.state===Re.Destroy)return;p.updateMetrics();let m=this.getZoomInfo(l);if(!m)return;this.instance.state=dt.CustomClosing,o.classList.remove(no),o.classList.add("is-zooming-out"),f.style.backgroundImage=`url('${E}')`;const b=o.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(o.style,{position:"absolute",top:`${o.offsetTop+window.scrollY}px`,left:`${o.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${b.width}px`,height:`${b.height}px`,overflow:"hidden"});const{x:y,y:S,scale:v,opacity:N}=m;if(N){const M=((O,L,k,F)=>{const W=L-O,ee=F-k;return Z=>k+((Z-O)/W*ee||0)})(p.scale,v,1,0);p.on("afterTransform",()=>{f.style.opacity=M(p.scale)+""})}p.on("endAnimation",()=>{n.destroy()}),p.target.a=v,p.target.b=0,p.target.c=0,p.target.d=v,p.panTo({x:y,y:S,scale:v,friction:N?.2:.33,ignoreBounds:!0}),p.isResting&&n.destroy()}setImage(e,n){const o=this.instance;e.src=n,this.process(e,n).then(l=>{const{contentEl:u,imageEl:f,thumbElSrc:p,el:E}=e;if(o.isClosing()||!u||!f)return;u.offsetHeight;const m=!!o.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&E){E.addEventListener("contextmenu",S=>{S.preventDefault()});const y=document.createElement("div");ae(y,"fancybox-protected"),u.appendChild(y)}if(p&&m){const y=l.contentRect,S=Math.max(y.fullWidth,y.fullHeight);let v=null;!m.opacity&&S>1200&&(v=document.createElement("img"),ae(v,"fancybox-ghost"),v.src=p,u.appendChild(v));const N=()=>{v&&(ae(v,"f-fadeFastOut"),setTimeout(()=>{v&&(v.remove(),v=null)},200))};(b=p,new Promise((M,O)=>{const L=new Image;L.onload=M,L.onerror=O,L.src=b})).then(()=>{o.hideLoading(e),e.state=bt.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{N(),this.instance.done(e)},()=>{}),v&&setTimeout(()=>{N()},S>2500?800:200)},()=>{o.hideLoading(e),o.revealContent(e)})}else{const y=this.optionFor(e,"initialSize"),S=this.optionFor(e,"zoom"),v={event:o.prevMouseMoveEvent||o.options.event,friction:S?.12:0};let N=o.optionFor(e,"showClass")||void 0,M=!0;o.isOpeningSlide(e)&&(y==="full"?l.zoomToFull(v):y==="cover"?l.zoomToCover(v):y==="max"?l.zoomToMax(v):M=!1,l.stop("current")),M&&N&&(N=l.isDragging?"f-fadeIn":""),o.hideLoading(e),o.revealContent(e,N)}var b},()=>{o.setError(e,"{{IMAGE_ERROR}}")})}process(e,n){return new Promise((o,l)=>{var u;const f=this.instance,p=e.el;f.clearContent(e),f.showLoading(e);let E=this.optionFor(e,"content");if(typeof E=="string"&&(E=Nn(E)),!E||!Dt(E)){if(E=document.createElement("img"),E instanceof HTMLImageElement){let m="",b=e.caption;m=typeof b=="string"&&b?b.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((u=f.carousel)===null||u===void 0?void 0:u.pages.length)||1}`,E.src=n||"",E.alt=m,E.draggable=!1,e.srcset&&E.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(E.fetchPriority="high")}e.sizes&&E.setAttribute("sizes",e.sizes)}ae(E,"fancybox-image"),e.imageEl=E,f.setContent(e,E,!1),e.panzoom=new Wi(p,Lt({transformParent:!0},this.option("Panzoom")||{},{content:E,width:(m,b)=>f.optionFor(e,"width","auto",b)||"auto",height:(m,b)=>f.optionFor(e,"height","auto",b)||"auto",wheel:()=>{const m=f.option("wheel");return(m==="zoom"||m=="pan")&&m},click:(m,b)=>{var y,S;if(f.isCompact||f.isClosing()||e.index!==((y=f.getSlide())===null||y===void 0?void 0:y.index))return!1;if(b){const N=b.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(N.nodeName))return!1}let v=!b||b.target&&((S=e.contentEl)===null||S===void 0?void 0:S.contains(b.target));return f.option(v?"contentClick":"backdropClick")||!1},dblClick:()=>f.isCompact?"toggleZoom":f.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:m=>{o(m)},error:()=>{l()},destroy:()=>{l()}}}))})}zoomIn(e){return new Promise((n,o)=>{const l=this.instance,u=l.container,{panzoom:f,contentEl:p,el:E}=e;f&&f.updateMetrics();const m=this.getZoomInfo(e);if(!(m&&E&&p&&f&&u))return void o();const{x:b,y,scale:S,opacity:v}=m,N=()=>{e.state!==bt.Closing&&(v&&(p.style.opacity=Math.max(Math.min(1,1-(1-f.scale)/(1-S)),0)+""),f.scale>=1&&f.scale>f.targetScale-.1&&n(f))},M=k=>{(k.scale<.99||k.scale>1.01)&&!k.isDragging||(Ne(u,no),p.style.opacity="",k.off("endAnimation",M),k.off("touchStart",M),k.off("afterTransform",N),n(k))};f.on("endAnimation",M),f.on("touchStart",M),f.on("afterTransform",N),f.on(["error","destroy"],()=>{o()}),f.panTo({x:b,y,scale:S,friction:0,ignoreBounds:!0}),f.stop("current");const O={event:f.panMode==="mousemove"?l.prevMouseMoveEvent||l.options.event:void 0},L=this.optionFor(e,"initialSize");ae(u,no),l.hideLoading(e),L==="full"?f.zoomToFull(O):L==="cover"?f.zoomToCover(O):L==="max"?f.zoomToMax(O):f.reset(.172)})}getZoomInfo(e){const{el:n,imageEl:o,thumbEl:l,panzoom:u}=e,f=this.instance,p=f.container;if(!n||!o||!l||!u||V1(l)<3||!this.optionFor(e,"zoom")||!p||f.state===dt.Destroy||getComputedStyle(p).getPropertyValue("--f-images-zoom")==="0")return!1;const E=window.visualViewport||null;if((E?E.scale:1)!==1)return!1;let{top:m,left:b,width:y,height:S}=l.getBoundingClientRect(),{top:v,left:N,fitWidth:M,fitHeight:O}=u.contentRect;if(!(y&&S&&M&&O))return!1;const L=u.container.getBoundingClientRect();N+=L.left,v+=L.top;const k=-1*(N+.5*M-(b+.5*y)),F=-1*(v+.5*O-(m+.5*S)),W=y/M;let ee=this.option("zoomOpacity")||!1;return ee==="auto"&&(ee=Math.abs(y/S-M/O)>.1),{x:k,y:F,scale:W,opacity:ee}}attach(){const e=this,n=e.instance;n.on("Carousel.change",e.onChange),n.on("Carousel.createSlide",e.onCreateSlide),n.on("Carousel.removeSlide",e.onRemoveSlide),n.on("close",e.onClose)}detach(){const e=this,n=e.instance;n.off("Carousel.change",e.onChange),n.off("Carousel.createSlide",e.onCreateSlide),n.off("Carousel.removeSlide",e.onRemoveSlide),n.off("close",e.onClose)}}Object.defineProperty(q1,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const Xa="html",Nh="image",Ga="map",kn="youtube",Ci="vimeo",is="html5video",Mh=(i,e={})=>{const n=new URL(i),o=new URLSearchParams(n.search),l=new URLSearchParams;for(const[p,E]of[...o,...Object.entries(e)]){let m=E+"";if(p==="t"){let b=m.match(/((\d*)m)?(\d*)s?/);b&&l.set("start",60*parseInt(b[2]||"0")+parseInt(b[3]||"0")+"")}else l.set(p,m)}let u=l+"",f=i.match(/#t=((.*)?\d+s)/);return f&&(u+=`#t=${f[1]}`),u},dA={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},gA=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class K1 extends bn{onBeforeInitSlide(e,n,o){this.processType(o)}onCreateSlide(e,n,o){this.setContent(o)}onClearContent(e,n){n.xhr&&(n.xhr.abort(),n.xhr=null);const o=n.iframeEl;o&&(o.onload=o.onerror=null,o.src="//about:blank",n.iframeEl=null);const l=n.contentEl,u=n.placeholderEl;if(n.type==="inline"&&l&&u)l.classList.remove("fancybox__content"),getComputedStyle(l).getPropertyValue("display")!=="none"&&(l.style.display="none"),setTimeout(()=>{u&&(l&&u.parentNode&&u.parentNode.insertBefore(l,u),u.remove())},0),n.contentEl=void 0,n.placeholderEl=void 0;else for(;n.el&&n.el.firstChild;)n.el.removeChild(n.el.firstChild)}onSelectSlide(e,n,o){o.state===bt.Ready&&this.playVideo()}onUnselectSlide(e,n,o){var l,u;if(o.type===is){try{(u=(l=o.el)===null||l===void 0?void 0:l.querySelector("video"))===null||u===void 0||u.pause()}catch{}return}let f;o.type===Ci?f={method:"pause",value:"true"}:o.type===kn&&(f={event:"command",func:"pauseVideo"}),f&&o.iframeEl&&o.iframeEl.contentWindow&&o.iframeEl.contentWindow.postMessage(JSON.stringify(f),"*"),o.poller&&clearTimeout(o.poller)}onDone(e,n){e.isCurrentSlide(n)&&!e.isClosing()&&this.playVideo()}onRefresh(e,n){n.slides.forEach(o=>{o.el&&(this.resizeIframe(o),this.setAspectRatio(o))})}onMessage(e){try{let n=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(n.event==="ready")for(let o of Array.from(document.getElementsByClassName("fancybox__iframe")))o instanceof HTMLIFrameElement&&o.contentWindow===e.source&&(o.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&n.event==="onReady"){const o=document.getElementById(n.id);o&&(o.dataset.ready="true")}}catch{}}loadAjaxContent(e){const n=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const o=this.instance,l=new XMLHttpRequest;o.showLoading(e),l.onreadystatechange=function(){l.readyState===XMLHttpRequest.DONE&&o.state===dt.Ready&&(o.hideLoading(e),l.status===200?o.setContent(e,l.responseText):o.setError(e,l.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const u=e.ajax||null;l.open(u?"POST":"GET",n+""),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(u),e.xhr=l}setInlineContent(e){let n=null;if(Dt(e.src))n=e.src;else if(typeof e.src=="string"){const o=e.src.split("#",2).pop();n=o?document.getElementById(o):null}if(n){if(e.type==="clone"||n.closest(".fancybox__slide")){n=n.cloneNode(!0);const o=n.dataset.animationName;o&&(n.classList.remove(o),delete n.dataset.animationName);let l=n.getAttribute("id");l=l?`${l}--clone`:`clone-${this.instance.id}-${e.index}`,n.setAttribute("id",l)}else if(n.parentNode){const o=document.createElement("div");o.classList.add("fancybox-placeholder"),n.parentNode.insertBefore(o,n),e.placeholderEl=o}this.instance.setContent(e,n)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:n,el:o}=e;if(!n||typeof n!="string"||!o)return;o.classList.add("is-loading");const l=this.instance,u=document.createElement("iframe");u.className="fancybox__iframe",u.setAttribute("id",`fancybox__iframe_${l.id}_${e.index}`);for(const[p,E]of Object.entries(this.optionFor(e,"iframeAttr")||{}))u.setAttribute(p,E);u.onerror=()=>{l.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=u;const f=this.optionFor(e,"preload");if(e.type!=="iframe"||f===!1)return u.setAttribute("src",e.src+""),l.setContent(e,u,!1),this.resizeIframe(e),void l.revealContent(e);l.showLoading(e),u.onload=()=>{if(!u.src.length)return;const p=u.dataset.ready!=="true";u.dataset.ready="true",this.resizeIframe(e),p?l.revealContent(e):l.hideLoading(e)},u.setAttribute("src",n),l.setContent(e,u,!1)}resizeIframe(e){const{type:n,iframeEl:o}=e;if(n===kn||n===Ci)return;const l=o==null?void 0:o.parentElement;if(!o||!l)return;let u=e.autoSize;u===void 0&&(u=this.optionFor(e,"autoSize"));let f=e.width||0,p=e.height||0;f&&p&&(u=!1);const E=l&&l.style;if(e.preload!==!1&&u!==!1&&E)try{const m=window.getComputedStyle(l),b=parseFloat(m.paddingLeft)+parseFloat(m.paddingRight),y=parseFloat(m.paddingTop)+parseFloat(m.paddingBottom),S=o.contentWindow;if(S){const v=S.document,N=v.getElementsByTagName(Xa)[0],M=v.body;E.width="",M.style.overflow="hidden",f=f||N.scrollWidth+b,E.width=`${f}px`,M.style.overflow="",E.flex="0 0 auto",E.height=`${M.scrollHeight}px`,p=N.scrollHeight+y}}catch{}if(f||p){const m={flex:"0 1 auto",width:"",height:""};f&&f!=="auto"&&(m.width=`${f}px`),p&&p!=="auto"&&(m.height=`${p}px`),Object.assign(E,m)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:n}=e;if(!n||!n.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===is)try{const l=n.querySelector("video");if(l){const u=l.play();u!==void 0&&u.then(()=>{}).catch(f=>{l.muted=!0,l.play()})}}catch{}if(e.type!==kn&&e.type!==Ci)return;const o=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let l;if(e.iframeEl.dataset.ready==="true")return l=e.type===kn?{event:"command",func:"playVideo"}:{method:"play",value:"true"},l&&e.iframeEl.contentWindow.postMessage(JSON.stringify(l),"*"),void(e.poller=void 0);e.type===kn&&(l={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(l),"*"))}e.poller=setTimeout(o,250)};o()}processType(e){if(e.html)return e.type=Xa,e.src=e.html,void(e.html="");const n=this.instance.optionFor(e,"src","");if(!n||typeof n!="string")return;let o=e.type,l=null;if(l=n.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const u=this.optionFor(e,kn),{nocookie:f}=u,p=function(y,S){var v={};for(var N in y)Object.prototype.hasOwnProperty.call(y,N)&&S.indexOf(N)<0&&(v[N]=y[N]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function"){var M=0;for(N=Object.getOwnPropertySymbols(y);M<N.length;M++)S.indexOf(N[M])<0&&Object.prototype.propertyIsEnumerable.call(y,N[M])&&(v[N[M]]=y[N[M]])}return v}(u,["nocookie"]),E=`www.youtube${f?"-nocookie":""}.com`,m=Mh(n,p),b=encodeURIComponent(l[2]);e.videoId=b,e.src=`https://${E}/embed/${b}?${m}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${b}/mqdefault.jpg`,o=kn}else if(l=n.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const u=Mh(n,this.optionFor(e,Ci)),f=encodeURIComponent(l[1]),p=l[4]||"";e.videoId=f,e.src=`https://player.vimeo.com/video/${f}?${p?`h=${p}${u?"&":""}`:""}${u}`,o=Ci}if(!o&&e.triggerEl){const u=e.triggerEl.dataset.type;gA.includes(u)&&(o=u)}o||typeof n=="string"&&(n.charAt(0)==="#"?o="inline":(l=n.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(o=is,e.videoFormat=e.videoFormat||"video/"+(l[1]==="ogv"?"ogg":l[1])):n.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?o=Nh:n.match(/\.(pdf)((\?|#).*)?$/i)&&(o="pdf")),(l=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${l[1]}/?ll=${(l[2]?l[2]+"&z="+Math.floor(parseFloat(l[3]))+(l[4]?l[4].replace(/^\//,"&"):""):l[4]+"").replace(/\?/,"&")}&output=${l[4]&&l[4].indexOf("layer=c")>0?"svembed":"embed"}`,o=Ga):(l=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${l[1]}/maps?q=${l[2].replace("query=","q=").replace("api=1","")}&output=embed`,o=Ga),o=o||this.instance.option("defaultType"),e.type=o,o===Nh&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const n=this.instance.optionFor(e,"src")||"";if(e&&e.type&&n){switch(e.type){case Xa:this.instance.setContent(e,n);break;case is:const o=this.option("videoTpl");o&&this.instance.setContent(e,o.replace(/\{\{src\}\}/gi,n+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case Ga:case kn:case Ci:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){const n=e.contentEl;if(!(e.el&&n&&e.type&&[kn,Ci,is].includes(e.type)))return;let o,l=e.width||"auto",u=e.height||"auto";if(l==="auto"||u==="auto"){o=this.optionFor(e,"videoRatio");const m=(o+"").match(/(\d+)\s*\/\s?(\d+)/);o=m&&m.length>2?parseFloat(m[1])/parseFloat(m[2]):parseFloat(o+"")}else l&&u&&(o=l/u);if(!o)return;n.style.aspectRatio="",n.style.width="",n.style.height="",n.offsetHeight;const f=n.getBoundingClientRect(),p=f.width||1,E=f.height||1;n.style.aspectRatio=o+"",o<p/E?(u=u==="auto"?E:Math.min(E,u),n.style.width="auto",n.style.height=`${u}px`):(l=l==="auto"?p:Math.min(p,l),n.style.width=`${l}px`,n.style.height="auto")}attach(){const e=this,n=e.instance;n.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),n.on("Carousel.createSlide",e.onCreateSlide),n.on("Carousel.selectSlide",e.onSelectSlide),n.on("Carousel.unselectSlide",e.onUnselectSlide),n.on("Carousel.Panzoom.refresh",e.onRefresh),n.on("done",e.onDone),n.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){const e=this,n=e.instance;n.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),n.off("Carousel.createSlide",e.onCreateSlide),n.off("Carousel.selectSlide",e.onSelectSlide),n.off("Carousel.unselectSlide",e.onUnselectSlide),n.off("Carousel.Panzoom.refresh",e.onRefresh),n.off("done",e.onDone),n.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(K1,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:dA});const io="play",ro="pause",rs="ready";class Z1 extends bn{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:rs}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==rs}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){const e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const n=this.instance,o=((e=n.pages[n.page])===null||e===void 0?void 0:e.slides)||[];let l=this.option("progressParentEl");if(l||(l=(o.length===1?o[0].el:null)||n.viewport),!l)return null;const u=document.createElement("div");return ae(u,"f-progress"),l.prepend(u),this.progressBar=u,u.offsetHeight,u}set(){const e=this,n=e.instance;if(n.pages.length<2||e.timer)return;const o=e.option("timeout");e.state=io,ae(n.container,"has-autoplay");let l=e.createProgressBar();l&&(l.style.transitionDuration=`${o}ms`,l.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},o),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==rs){if(e.option("pauseOnHover")){const n=e.instance.container;n.addEventListener("mouseenter",e.onMouseEnter,!1),n.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,n=e.state,o=e.instance.container;e.clear(),e.state=rs,o.removeEventListener("mouseenter",e.onMouseEnter,!1),o.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),Ne(o,"has-autoplay"),n!==rs&&e.emit("stop")}pause(){const e=this;e.state===io&&(e.state=ro,e.clear(),e.emit(ro))}resume(){const e=this,n=e.instance;if(n.isInfinite||n.page!==n.pages.length-1)if(e.state!==io){if(e.state===ro&&!e.inHover){const o=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",o),o.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===io||this.state===ro?this.stop():this.start()}attach(){const e=this,n=e.instance;n.on("ready",e.onReady),n.on("Panzoom.startAnimation",e.onChange),n.on("Panzoom.endAnimation",e.onSettle),n.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,n=e.instance;n.off("ready",e.onReady),n.off("Panzoom.startAnimation",e.onChange),n.off("Panzoom.endAnimation",e.onSettle),n.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(Z1,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class Q1 extends bn{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const n=e.carousel;if(!n)return;const o=e.container;o&&(n.options.Autoplay=Lt({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:l=>{var u;o.classList.add("has-slideshow"),((u=e.getSlide())===null||u===void 0?void 0:u.state)!==bt.Ready&&l.pause()},stop:()=>{o.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(l,u)=>{var f,p,E;!u||!u.cancelable||((f=e.getSlide())===null||f===void 0?void 0:f.state)===bt.Ready&&(!((E=(p=e.carousel)===null||p===void 0?void 0:p.panzoom)===null||E===void 0)&&E.isResting)||u.preventDefault()}}}),n.attachPlugins({Autoplay:Z1}),this.ref=n.plugins.Autoplay)}onReady(e){const n=e.carousel,o=this.ref;o&&n&&this.option("playOnStart")&&(n.isInfinite||n.page<n.pages.length-1)&&o.start()}onDone(e,n){const o=this.ref,l=e.carousel;if(!o||!l)return;const u=n.panzoom;u&&u.on("startAnimation",()=>{e.isCurrentSlide(n)&&o.stop()}),e.isCurrentSlide(n)&&o.resume()}onKeydown(e,n){var o;const l=this.ref;l&&n===this.option("key")&&((o=document.activeElement)===null||o===void 0?void 0:o.nodeName)!=="BUTTON"&&l.toggle()}attach(){const e=this,n=e.instance;n.on("Carousel.init",e.onPrepare),n.on("Carousel.ready",e.onReady),n.on("done",e.onDone),n.on("keydown",e.onKeydown)}detach(){const e=this,n=e.instance;n.off("Carousel.init",e.onPrepare),n.off("Carousel.ready",e.onReady),n.off("done",e.onDone),n.off("keydown",e.onKeydown)}}Object.defineProperty(Q1,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:i=>{var e;return((e=i.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||i.instance.container},timeout:3e3}});const J1={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var Un;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Hidden=2]="Hidden"})(Un||(Un={}));const Dh="isResting",so="thumbWidth",ur="thumbHeight",Tn="thumbClipWidth";let e0=class extends bn{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Un.Init})}get isModern(){return this.type==="modern"}onInitSlide(i,e){const n=e.el?e.el.dataset:void 0;n&&(e.thumbSrc=n.thumbSrc||e.thumbSrc||"",e[Tn]=parseFloat(n[Tn]||"")||e[Tn]||0,e[ur]=parseFloat(n.thumbHeight||"")||e[ur]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var i;if(!this.isModern)return;const e=this.container,n=this.instance,o=n.panzoom,l=this.carousel,u=l?l.panzoom:null,f=n.page;if(o&&l&&u){if(o.isDragging){Ne(e,this.cn(Dh));let p=((i=l.pages[f])===null||i===void 0?void 0:i.pos)||0;p+=n.getProgress(f)*(this[Tn]+this.thumbGap);let E=u.getBounds();-1*p>E.x.min&&-1*p<E.x.max&&u.panTo({x:-1*p,friction:.12})}else Mn(e,this.cn(Dh),o.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const i of this.instance.slides||[])this.resizeModernSlide(i);this.shiftModern()}isDisabled(){const i=this.option("minCount")||0;if(i){const n=this.instance;let o=0;for(const l of n.slides||[])l.thumbSrc&&o++;if(o<i)return!0}const e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(i){const e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",i.index],["%d",i.index+1],["%s",i.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(i){const e=this.carousel;e&&e.addSlide(i.index,this.getThumb(i))}getSlides(){const i=[];for(const e of this.instance.slides||[])i.push(this.getThumb(e));return i}resizeModernSlide(i){this.isModern&&(i[so]=i[Tn]&&i[ur]?Math.round(this[ur]*(i[Tn]/i[ur])):this[so])}updateProps(){const i=this.container;if(!i)return;const e=n=>parseFloat(getComputedStyle(i).getPropertyValue("--f-thumb-"+n))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[so]=e("width")||40,this[Tn]=e("clip-width")||40,this[ur]=e("height")||40}build(){const i=this;if(i.state!==Un.Init)return;if(i.isDisabled())return void i.emit("disabled");const e=i.instance,n=e.container,o=i.getSlides(),l=i.option("type");i.type=l;const u=i.option("parentEl"),f=i.cn("container"),p=i.cn("track");let E=u==null?void 0:u.querySelector("."+f);E||(E=document.createElement("div"),ae(E,f),u?u.appendChild(E):n.after(E)),ae(E,`is-${l}`),ae(n,i.cn("hasThumbs")),i.container=E,i.updateProps();let m=E.querySelector("."+p);m||(m=document.createElement("div"),ae(m,i.cn("track")),E.appendChild(m)),i.track=m;const b=Lt({},{track:m,infinite:!1,center:!0,fill:l==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},i.option("Carousel")||{},{Sync:{target:e},slides:o}),y=new e.constructor(E,b);y.on("createSlide",(S,v)=>{i.setProps(v.index),i.emit("createSlide",v,v.el)}),y.on("ready",()=>{i.shiftModern(),i.emit("ready")}),y.on("refresh",()=>{i.shiftModern()}),y.on("Panzoom.click",(S,v,N)=>{i.onClick(N)}),i.carousel=y,i.state=Un.Ready}onClick(i){i.preventDefault(),i.stopPropagation();const e=this.instance,{pages:n,page:o}=e,l=M=>{if(M){const O=M.closest("[data-carousel-index]");if(O)return[parseInt(O.dataset.carouselIndex||"",10)||0,O]}return[-1,void 0]},u=(M,O)=>{const L=document.elementFromPoint(M,O);return L?l(L):[-1,void 0]};let[f,p]=l(i.target);if(f>-1)return;const E=this[Tn],m=i.clientX,b=i.clientY;let[y,S]=u(m-E,b),[v,N]=u(m+E,b);S&&N?(f=Math.abs(m-S.getBoundingClientRect().right)<Math.abs(m-N.getBoundingClientRect().left)?y:v,f===o&&(f=f===y?v:y)):S?f=y:N&&(f=v),f>-1&&n[f]&&e.slideTo(f)}getShift(i){var e;const n=this,{instance:o}=n,l=n.carousel;if(!o||!l)return 0;const u=n[so],f=n[Tn],p=n.thumbGap,E=n.thumbExtraGap;if(!(!((e=l.slides[i])===null||e===void 0)&&e.el))return 0;const m=.5*(u-f),b=o.pages.length-1;let y=o.getProgress(0),S=o.getProgress(b),v=o.getProgress(i,!1,!0),N=0,M=m+E+p;const O=y<0&&y>-1,L=S>0&&S<1;return i===0?(N=M*Math.abs(y),L&&y===1&&(N-=M*Math.abs(S))):i===b?(N=M*Math.abs(S)*-1,O&&S===-1&&(N+=M*Math.abs(y))):O||L?(N=-1*M,N+=M*Math.abs(y),N+=M*(1-Math.abs(S))):N=M*v,N}setProps(i){var e;const n=this;if(!n.isModern)return;const{instance:o}=n,l=n.carousel;if(o&&l){const u=(e=l.slides[i])===null||e===void 0?void 0:e.el;if(u&&u.childNodes.length){let f=J(1-Math.abs(o.getProgress(i))),p=J(n.getShift(i));u.style.setProperty("--progress",f?f+"":""),u.style.setProperty("--shift",p+"")}}}shiftModern(){const i=this;if(!i.isModern)return;const{instance:e,track:n}=i,o=e.panzoom,l=i.carousel;if(!(e&&n&&o&&l)||o.state===Re.Init||o.state===Re.Destroy)return;for(const f of e.slides)i.setProps(f.index);let u=(i[Tn]+i.thumbGap)*(l.slides.length||0);n.style.setProperty("--width",u+"")}cleanup(){const i=this;i.carousel&&i.carousel.destroy(),i.carousel=null,i.container&&i.container.remove(),i.container=null,i.track&&i.track.remove(),i.track=null,i.state=Un.Init,Ne(i.instance.container,i.cn("hasThumbs"))}attach(){const i=this,e=i.instance;e.on("initSlide",i.onInitSlide),e.state===rt.Init?e.on("initSlides",i.onInitSlides):i.onInitSlides(),e.on(["change","Panzoom.afterTransform"],i.onChange),e.on("Panzoom.refresh",i.onRefresh)}detach(){const i=this,e=i.instance;e.off("initSlide",i.onInitSlide),e.off("initSlides",i.onInitSlides),e.off(["change","Panzoom.afterTransform"],i.onChange),e.off("Panzoom.refresh",i.onRefresh),i.cleanup()}};Object.defineProperty(e0,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:J1});const pA=Object.assign(Object.assign({},J1),{key:"t",showOnStart:!0,parentEl:null}),Rh="is-masked",Lh="aria-hidden";class t0 extends bn{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,n){n.stopPropagation()}onCreateSlide(e,n){var o,l,u;const f=((u=(l=(o=this.instance)===null||o===void 0?void 0:o.carousel)===null||l===void 0?void 0:l.slides[n.index])===null||u===void 0?void 0:u.type)||"",p=n.el;if(p&&f){let E=`for-${f}`;["video","youtube","vimeo","html5video"].includes(f)&&(E+=" for-video"),ae(p,E)}}onInit(){var e;const n=this,o=n.instance,l=o.carousel;if(n.ref||!l)return;const u=n.option("parentEl")||o.footer||o.container;if(!u)return;const f=Lt({},n.options,{parentEl:u,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:o.option("Carousel.friction")||0}},on:{ready:p=>{const E=p.container;E&&this.hidden&&(n.refresh(),E.style.transition="none",n.hide(),E.offsetHeight,queueMicrotask(()=>{E.style.transition="",n.show()}))}}});f.Carousel=f.Carousel||{},f.Carousel.on=Lt(((e=n.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),l.options.Thumbs=f,l.attachPlugins({Thumbs:e0}),n.ref=l.plugins.Thumbs,n.option("showOnStart")||(n.ref.state=Un.Hidden,n.hidden=!0)}onResize(){var e;const n=(e=this.ref)===null||e===void 0?void 0:e.container;n&&(n.style.maxHeight="")}onKeydown(e,n){const o=this.option("key");o&&o===n&&this.toggle()}toggle(){const e=this.ref;if(e&&!e.isDisabled())return e.state===Un.Hidden?(e.state=Un.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){const e=this.ref;if(!e||e.isDisabled())return;const n=e.container;n&&(this.refresh(),n.offsetHeight,n.removeAttribute(Lh),n.classList.remove(Rh),this.hidden=!1)}hide(){const e=this.ref,n=e&&e.container;n&&(this.refresh(),n.offsetHeight,n.classList.add(Rh),n.setAttribute(Lh,"true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||!e.state)return;const n=e.container,o=(n==null?void 0:n.firstChild)||null;n&&o&&o.childNodes.length&&(n.style.maxHeight=`${o.getBoundingClientRect().height}px`)}attach(){const e=this,n=e.instance;n.state===dt.Init?n.on("Carousel.init",e.onInit):e.onInit(),n.on("resize",e.onResize),n.on("keydown",e.onKeydown)}detach(){var e;const n=this,o=n.instance;o.off("Carousel.init",n.onInit),o.off("resize",n.onResize),o.off("keydown",n.onKeydown),(e=o.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),n.ref=null}}Object.defineProperty(t0,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:pA});const $a={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var Di;(function(i){i[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Disabled=2]="Disabled"})(Di||(Di={}));const mA={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},xA={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ph="has-toolbar",qa="fancybox__toolbar";class n0 extends bn{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Di.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var n;if(!e.carousel)return;let o=this.option("display"),l=this.option("absolute"),u=this.option("enabled");if(u==="auto"){const m=this.instance.carousel;let b=0;if(m)for(const y of m.slides)(y.panzoom||y.type==="image")&&b++;b||(u=!1)}u||(o=void 0);let f=0;const p={left:[],middle:[],right:[]};if(o)for(const m of["left","middle","right"])for(const b of o[m]){const y=this.createEl(b);y&&((n=p[m])===null||n===void 0||n.push(y),f++)}let E=null;if(f&&(E=this.createContainer()),E){for(const[m,b]of Object.entries(p)){const y=document.createElement("div");ae(y,qa+"__column is-"+m);for(const S of b)y.appendChild(S);l!=="auto"||m!=="middle"||b.length||(l=!0),E.appendChild(y)}l===!0&&ae(E,"is-absolute"),this.state=Di.Ready,this.onRefresh()}else this.state=Di.Disabled}onClick(e){var n,o;const l=this.instance,u=l.getSlide(),f=u==null?void 0:u.panzoom,p=e.target,E=p&&Dt(p)?p.dataset:null;if(!E)return;if(E.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((n=l.plugins.Thumbs)===null||n===void 0||n.toggle());if(E.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(E.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();const y=(o=l.carousel)===null||o===void 0?void 0:o.plugins.Autoplay;let S=y.isActive;return f&&f.panMode==="mousemove"&&!S&&f.reset(),void(S?y.stop():y.start())}const m=E.panzoomAction,b=E.panzoomChange;if((b||m)&&(e.preventDefault(),e.stopPropagation()),b){let y={};try{y=JSON.parse(b)}catch{}f&&f.applyChange(y)}else m&&f&&f[m]&&f[m]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const n=this.instance.getSlide();if(!n||n.state!==bt.Ready)return;const o=n&&!n.error&&n.panzoom;for(const f of e.querySelectorAll("[data-panzoom-action]"))o?(f.removeAttribute("disabled"),f.removeAttribute("tabindex")):(f.setAttribute("disabled",""),f.setAttribute("tabindex","-1"));let l=o&&o.canZoomIn(),u=o&&o.canZoomOut();for(const f of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))l?(f.removeAttribute("disabled"),f.removeAttribute("tabindex")):(f.setAttribute("disabled",""),f.setAttribute("tabindex","-1"));for(const f of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))u?(f.removeAttribute("disabled"),f.removeAttribute("tabindex")):(f.setAttribute("disabled",""),f.setAttribute("tabindex","-1"));for(const f of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){u||l?(f.removeAttribute("disabled"),f.removeAttribute("tabindex")):(f.setAttribute("disabled",""),f.setAttribute("tabindex","-1"));const p=f.querySelector("g");p&&(p.style.display=l?"":"none")}}onDone(e,n){var o;(o=n.panzoom)===null||o===void 0||o.on("afterTransform",()=>{this.instance.isCurrentSlide(n)&&this.onRefresh()}),this.instance.isCurrentSlide(n)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const n=this.option("parentEl")||e;let o=n.querySelector("."+qa);return o||(o=document.createElement("div"),ae(o,qa),n.prepend(o)),o.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&ae(e,Ph),this.container=o,o}createEl(e){const n=this.instance,o=n.carousel;if(!o||e==="toggleFS"||e==="fullscreen"&&!W1())return null;let l=null;const u=o.slides.length||0;let f=0,p=0;for(const m of o.slides)(m.panzoom||m.type==="image")&&f++,(m.type==="image"||m.downloadSrc)&&p++;if(u<2&&["infobar","prev","next"].includes(e))return l;if($a[e]!==void 0&&!f||e==="download"&&!p)return null;if(e==="thumbs"){const m=n.plugins.Thumbs;if(!m||!m.isEnabled)return null}if(e==="slideshow"&&(!o.plugins.Autoplay||u<2))return null;if($a[e]!==void 0){const m=$a[e];l=document.createElement("button"),l.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),ae(l,"f-button"),m.action&&(l.dataset.panzoomAction=m.action),m.change&&(l.dataset.panzoomChange=JSON.stringify(m.change)),l.appendChild(Nn(this.instance.localize(m.icon)))}else{const m=(this.option("items")||[])[e];m&&(l=Nn(this.instance.localize(m.tpl)),typeof m.click=="function"&&l.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation(),typeof m.click=="function"&&m.click.call(this,this,b)}))}const E=l==null?void 0:l.querySelector("svg");if(E)for(const[m,b]of Object.entries(xA))E.getAttribute(m)||E.setAttribute(m,String(b));return l}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=Di.Disabled;const n=this.instance.container;n&&Ne(n,Ph)}attach(){const e=this,n=e.instance;n.on("Carousel.initSlides",e.onReady),n.on("done",e.onDone),n.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){const e=this,n=e.instance;n.off("Carousel.initSlides",e.onReady),n.off("done",e.onDone),n.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}Object.defineProperty(n0,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:mA});const EA={Hash:class extends bn{onReady(){as=!1}onChange(i){Ti&&clearTimeout(Ti);const{hash:e}=Y1(),{hash:n}=No(),o=i.isOpeningSlide(i.getSlide());o&&(Ih=n===e?"":n),e&&e!==n&&(Ti=setTimeout(()=>{try{if(i.state===dt.Ready){let l="replaceState";o&&!to&&(l="pushState",to=!0),window.history[l]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(i){if(Ti&&clearTimeout(Ti),!as&&to)return to=!1,as=!1,void window.history.back();if(!as)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(Ih||""))}catch{}}attach(){const i=this.instance;i.on("ready",this.onReady),i.on(["Carousel.ready","Carousel.change"],this.onChange),i.on("close",this.onClose)}detach(){const i=this.instance;i.off("ready",this.onReady),i.off(["Carousel.ready","Carousel.change"],this.onChange),i.off("close",this.onClose)}static parseURL(){return No()}static startFromUrl(){X1()}static destroy(){window.removeEventListener("hashchange",$1,!1)}},Html:K1,Images:q1,Slideshow:Q1,Thumbs:t0,Toolbar:n0},Bh="with-fancybox",Ka="hide-scrollbar",kh="--fancybox-scrollbar-compensate",Fh="--fancybox-body-margin",Za="aria-hidden",Qa="is-using-tab",Ja="is-animated",Uh="is-compact",zh="is-loading",el="is-opening",oo="has-caption",hr="disabled",_i="tabindex",jh="download",tl="href",fr="src",ri=i=>typeof i=="string",Hh=function(){var i=window.getSelection();return!!i&&i.type==="Range"};let rn,sn=null,vi=null,Vh=0,Wh=0,Yh=0,Xh=0;const dr=new Map;let bA=0;class Se extends Tc{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],n={},o={}){super(n),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:dt.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),rn||(rn=W1()),this.id=n.id||++bA,dr.set(this.id,this),this.userSlides=e,this.userPlugins=o,queueMicrotask(()=>{this.init()})}init(){if(this.state===dt.Destroy)return;this.state=dt.Init,this.attachPlugins(Object.assign(Object.assign({},Se.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!fs)return;const n=document,o=n.body,l=n.documentElement;if(o.classList.contains(Ka))return;let u=window.innerWidth-l.getBoundingClientRect().width;const f=parseFloat(window.getComputedStyle(o).marginRight);u<0&&(u=0),l.style.setProperty(kh,`${u}px`),f&&o.style.setProperty(Fh,`${f}px`),o.classList.add(Ka)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=dt.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(Za,"false")},16)};this.option("Fullscreen.autoStart")&&rn&&!rn.isFullscreen()?rn.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,n;const o=this.option("parentEl")||document.body,l=Nn(this.localize(this.option("tpl.main")||""));if(l){if(l.setAttribute("id",`fancybox-${this.id}`),l.setAttribute("aria-label",this.localize("{{MODAL}}")),l.classList.toggle(Uh,this.isCompact),ae(l,this.option("mainClass")||""),ae(l,el),this.container=l,this.footer=l.querySelector(".fancybox__footer"),o.appendChild(l),ae(document.documentElement,Bh),sn&&vi||(sn=document.createElement("span"),ae(sn,"fancybox-focus-guard"),sn.setAttribute(_i,"0"),sn.setAttribute(Za,"true"),sn.setAttribute("aria-label","Focus guard"),vi=sn.cloneNode(),(e=l.parentElement)===null||e===void 0||e.insertBefore(sn,l),(n=l.parentElement)===null||n===void 0||n.append(vi)),l.addEventListener("mousedown",u=>{Vh=u.pageX,Wh=u.pageY,Ne(l,Qa)}),this.option("closeExisting"))for(const u of dr.values())u.id!==this.id&&u.close();else this.option("animated")&&(ae(l,Ja),setTimeout(()=>{this.isClosing()||Ne(l,Ja)},350));this.emit("initLayout")}}initCarousel(e){const n=this.container;if(!n)return;const o=n.querySelector(".fancybox__carousel");if(!o)return;const l=this.carousel=new Ui(o,Lt({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));l.on("*",(u,f,...p)=>{this.emit(`Carousel.${f}`,u,...p)}),l.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(u,f,p)=>{this.clearContent(p),p.state=void 0}),l.on("Panzoom.touchStart",()=>{var u,f;this.isCompact||this.endIdle(),!((u=document.activeElement)===null||u===void 0)&&u.closest(".f-thumbs")&&((f=this.container)===null||f===void 0||f.focus())}),l.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(l.on("Panzoom.afterTransform",(u,f)=>{const p=this.getSlide();if(p&&Rl(p.el))return;const E=this.container;if(E){const m=Math.abs(f.current.f),b=m<1?"":Math.max(.5,Math.min(1,1-m/f.contentRect.fitHeight*1.5));E.style.setProperty("--fancybox-ts",b?"0s":""),E.style.setProperty("--fancybox-opacity",b+"")}}),l.on("Panzoom.touchEnd",(u,f,p)=>{var E;const m=this.getSlide();if(m&&Rl(m.el)||f.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((E=document.activeElement)===null||E===void 0?void 0:E.nodeName)!==-1)return;const b=Math.abs(f.dragOffset.y);f.lockedAxis==="y"&&(b>=200||b>=50&&f.dragOffset.time<300)&&(p&&p.cancelable&&p.preventDefault(),this.close(p,"f-throwOut"+(f.current.f<0?"Up":"Down")))})),l.on("change",u=>{var f;let p=(f=this.getSlide())===null||f===void 0?void 0:f.triggerEl;if(p){const E=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:u.page});p.dispatchEvent(E)}}),l.on(["refresh","change"],u=>{const f=this.container;if(!f)return;for(const m of f.querySelectorAll("[data-fancybox-current-index]"))m.innerHTML=u.page+1;for(const m of f.querySelectorAll("[data-fancybox-count]"))m.innerHTML=u.pages.length;if(!u.isInfinite){for(const m of f.querySelectorAll("[data-fancybox-next]"))u.page<u.pages.length-1?(m.removeAttribute(hr),m.removeAttribute(_i)):(m.setAttribute(hr,""),m.setAttribute(_i,"-1"));for(const m of f.querySelectorAll("[data-fancybox-prev]"))u.page>0?(m.removeAttribute(hr),m.removeAttribute(_i)):(m.setAttribute(hr,""),m.setAttribute(_i,"-1"))}const p=this.getSlide();if(!p)return;let E=p.downloadSrc||"";E||p.type!=="image"||p.error||!ri(p[fr])||(E=p[fr]);for(const m of f.querySelectorAll("[data-fancybox-download]")){const b=p.downloadFilename;E?(m.removeAttribute(hr),m.removeAttribute(_i),m.setAttribute(tl,E),m.setAttribute(jh,b||E),m.setAttribute("target","_blank")):(m.setAttribute(hr,""),m.setAttribute(_i,"-1"),m.removeAttribute(tl),m.removeAttribute(jh))}}),this.emit("initCarousel")}attachEvents(){const e=this,n=e.container;if(!n)return;n.addEventListener("click",e.onClick,{passive:!1,capture:!1}),n.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const o=window.visualViewport;o&&(o.addEventListener("scroll",e.onResize),o.addEventListener("resize",e.onResize))}detachEvents(){const e=this,n=e.container;if(!n)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),n.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),n.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const o=window.visualViewport;o&&(o.removeEventListener("resize",e.onResize),o.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const n=window.visualViewport,o=Math.max(1,(n==null?void 0:n.scale)||1);let l="",u="",f="";if(n&&o>1){let p=`${n.offsetLeft}px`,E=`${n.offsetTop}px`;l=n.width*o+"px",u=n.height*o+"px",f=`translate3d(${p}, ${E}, 0) scale(${1/o})`}e.style.transform=f,e.style.width=l,e.style.height=u}onClick(e){var n;const{container:o,isCompact:l}=this;if(!o||this.isClosing())return;!l&&this.option("idle")&&this.resetIdle();const u=e.composedPath()[0];if(u.closest(".fancybox-spinner")||u.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(u.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(u.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-Vh)>30||Math.abs(e.pageY-Wh)>30)return;const f=document.activeElement;if(Hh()&&f&&o.contains(f))return;if(l&&((n=this.getSlide())===null||n===void 0?void 0:n.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let p=!1;if(u.closest(".fancybox__content")){if(f){if(f.closest("[contenteditable]"))return;u.matches(Ya)||f.blur()}if(Hh())return;p=this.option("contentClick")}else u.closest(".fancybox__carousel")&&!u.matches(Ya)&&(p=this.option("backdropClick"));p==="close"?(e.preventDefault(),this.close(e)):p==="next"?(e.preventDefault(),this.next()):p==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){const n=e.target;let o=this.option("wheel",e);n.closest(".fancybox__thumbs")&&(o="slide");const l=o==="slide",u=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(E,m){return Math.abs(m)>Math.abs(E)?m:E}),f=Math.max(-1,Math.min(1,u)),p=Date.now();this.pwt&&p-this.pwt<300?l&&e.preventDefault():(this.pwt=p,this.emit("wheel",e,f),e.defaultPrevented||(o==="close"?(e.preventDefault(),this.close(e)):o==="slide"&&(Io(n)||(e.preventDefault(),this[f>0?"prev":"next"]()))))}onScroll(){window.scrollTo(Yh,Xh)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const n=e.key,o=this.option("keyboard");if(!o)return;const l=e.composedPath()[0],u=document.activeElement&&document.activeElement.classList,f=u&&u.contains("f-button")||l.dataset.carouselPage||l.dataset.carouselIndex;if(n!=="Escape"&&!f&&Dt(l)&&(l.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(l.nodeName)!==-1)||(e.key==="Tab"?ae(this.container,Qa):Ne(this.container,Qa),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",n,e);const p=o[n];p&&typeof this[p]=="function"&&(e.preventDefault(),this[p]())}onResize(){const e=this.container;if(!e)return;const n=this.isCompact;e.classList.toggle(Uh,n),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){const n=this.optionFor(e,"closeButton")||!1;if(n==="auto"){const l=this.plugins.Toolbar;if(l&&l.state===Di.Ready)return}if(!n||!e.contentEl||e.closeBtnEl)return;const o=this.option("tpl.closeButton");if(o){const l=Nn(this.localize(o));e.closeBtnEl=e.contentEl.appendChild(l),e.el&&ae(e.el,"has-close-btn")}}manageCaption(e=void 0){var n,o;const l="fancybox__caption",u=this.container;if(!u)return;Ne(u,oo);const f=this.isCompact||this.option("commonCaption"),p=!f;if(this.caption&&this.stop(this.caption),p&&this.caption&&(this.caption.remove(),this.caption=null),f&&!this.caption)for(const y of((n=this.carousel)===null||n===void 0?void 0:n.slides)||[])y.captionEl&&(y.captionEl.remove(),y.captionEl=void 0,Ne(y.el,oo),(o=y.el)===null||o===void 0||o.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||f&&!this.isCurrentSlide(e))return;const E=e.el;let m=this.optionFor(e,"caption","");if(!m)return void(f&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let b=null;if(p){if(b=e.captionEl||null,E&&!b){const y=l+`_${this.id}_${e.index}`;b=document.createElement("div"),ae(b,l),b.setAttribute("id",y),e.captionEl=E.appendChild(b),ae(E,oo),E.setAttribute("aria-labelledby",y)}}else b=this.caption,b||(b=u.querySelector("."+l)),!b&&(b=document.createElement("div"),b.dataset.fancyboxCaption="",ae(b,l),(this.footer||u).prepend(b)),ae(u,oo),this.caption=b;b&&(b.innerHTML="",ri(m)||typeof m=="number"?b.innerHTML=m+"":m instanceof HTMLElement&&b.appendChild(m))}checkFocus(e){this.focus(e)}focus(e){var n;if(this.ignoreFocusChange)return;const o=document.activeElement||null,l=(e==null?void 0:e.target)||null,u=this.container,f=(n=this.carousel)===null||n===void 0?void 0:n.viewport;if(!u||!f||!e&&o&&u.contains(o))return;const p=this.getSlide(),E=p&&p.state===bt.Ready?p.el:null;if(!E||E.contains(o)||u===o)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const m=Array.from(u.querySelectorAll(Ya));let b=[],y=null;for(let v of m){const N=!v.offsetParent||!!v.closest('[aria-hidden="true"]'),M=E&&E.contains(v),O=!f.contains(v);if(v===u||(M||O)&&!N){b.push(v);const L=v.dataset.origTabindex;L!==void 0&&L&&(v.tabIndex=parseFloat(L)),v.removeAttribute("data-orig-tabindex"),!v.hasAttribute("autoFocus")&&y||(y=v)}else{const L=v.dataset.origTabindex===void 0?v.getAttribute("tabindex")||"":v.dataset.origTabindex;L&&(v.dataset.origTabindex=L),v.tabIndex=-1}}let S=null;e?(!l||b.indexOf(l)<0)&&(S=y||u,b.length&&(o===vi?S=b[0]:this.lastFocus!==u&&o!==sn||(S=b[b.length-1]))):S=p&&p.type==="image"?u:y||u,S&&Th(S),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=Se.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,n="",o){if(!e||!n)return void(o&&o());this.stop(e);const l=u=>{u.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",l),delete e.dataset.animationName,o&&o(),Ne(e,n))};e.dataset.animationName=n,e.addEventListener("animationend",l),ae(e,n)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,n="",o=!0){if(this.isClosing())return;const l=e.el;if(!l)return;let u=null;if(Dt(n)?u=n:(u=Nn(n+""),Dt(u)||(u=document.createElement("div"),u.innerHTML=n+"")),["img","picture","iframe","video","audio"].includes(u.nodeName.toLowerCase())){const f=document.createElement("div");f.appendChild(u),u=f}Dt(u)&&e.filter&&!e.error&&(u=u.querySelector(e.filter)),u&&Dt(u)?(ae(u,"fancybox__content"),e.id&&u.setAttribute("id",e.id),l.classList.add(`has-${e.error?"error":e.type||"unknown"}`),l.prepend(u),u.style.display==="none"&&(u.style.display=""),getComputedStyle(u).getPropertyValue("display")==="none"&&(u.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=u,o&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,n){const o=e.el,l=e.contentEl;o&&l&&(this.emit("reveal",e),this.hideLoading(e),e.state=bt.Opening,(n=this.isOpeningSlide(e)?n===void 0?this.optionFor(e,"showClass"):n:"f-fadeIn")?this.animate(l,n,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=bt.Ready,this.emit("done",e),ae(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var n;(n=e.panzoom)===null||n===void 0||n.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(Ne(this.container,el),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){const n=this.getSlide();return!(!e||!n)&&n.index===e.index}isOpeningSlide(e){var n,o;return((n=this.carousel)===null||n===void 0?void 0:n.prevPage)===null&&e&&e.index===((o=this.getSlide())===null||o===void 0?void 0:o.index)}showLoading(e){e.state=bt.Loading;const n=e.el;n&&(ae(n,zh),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===bt.Loading){let o=Nn(Ic);ae(o,"fancybox-spinner"),e.spinnerEl=o,n.prepend(o),this.animate(o,"f-fadeIn")}},250))}hideLoading(e){const n=e.el;if(!n)return;const o=e.spinnerEl;this.isClosing()?o==null||o.remove():(Ne(n,zh),o&&this.animate(o,"f-fadeOut",()=>{o.remove()}),e.state===bt.Loading&&(this.emit("loaded",e),e.state=bt.Ready))}setError(e,n){if(this.isClosing())return;const o=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",o,e),o.defaultPrevented)return;e.error=n,this.hideLoading(e),this.clearContent(e);const l=document.createElement("div");l.classList.add("fancybox-error"),l.innerHTML=this.localize(n||"<p>{{ERROR}}</p>"),this.setContent(e,l)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);const n=e.el;n&&(Ne(n,"has-error"),Ne(n,"has-unknown"),Ne(n,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;const n=this.carousel;return((e=n==null?void 0:n.pages[n==null?void 0:n.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,n){if(this.isClosing())return;const o=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",o,e),o.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const l=()=>{this.proceedClose(e,n)};this.startedFs&&rn&&rn.isFullscreen()?Promise.resolve(rn.exit()).then(()=>l()):l()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const n=()=>{this.clearIdle(),this.idle=!0,ae(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)n();else{const o=this.option("idle");o&&(this.idleTimer=setTimeout(n,o))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,Ne(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){rn&&(rn.isFullscreen()?rn.exit():rn.request().then(()=>{this.startedFs=!0}))}isClosing(){return[dt.Closing,dt.CustomClosing,dt.Destroy].includes(this.state)}proceedClose(e,n){var o,l;this.state=dt.Closing,this.clearIdle(),this.detachEvents();const u=this.container,f=this.carousel,p=this.getSlide(),E=p&&this.option("placeFocusBack")?p.triggerEl||this.option("triggerEl"):null;if(E&&(V1(E)?Th(E):E.focus()),u&&(Ne(u,el),ae(u,"is-closing"),u.setAttribute(Za,"true"),this.option("animated")&&ae(u,Ja),u.style.pointerEvents="none"),f){f.clearTransitions(),(o=f.panzoom)===null||o===void 0||o.destroy(),(l=f.plugins.Navigation)===null||l===void 0||l.detach();for(const m of f.slides){m.state=bt.Closing,this.hideLoading(m);const b=m.contentEl;b&&this.stop(b);const y=m==null?void 0:m.panzoom;y&&(y.stop(),y.detachEvents(),y.detachObserver()),this.isCurrentSlide(m)||f.emit("removeSlide",m)}}Yh=window.scrollX,Xh=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==dt.CustomClosing?(n===void 0&&p&&(n=this.optionFor(p,"hideClass")),n&&p?(this.animate(p.contentEl,n,()=>{f&&f.emit("removeSlide",p)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===dt.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=dt.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();const n=this.container;n&&n.remove(),dr.delete(this.id);const o=Se.getInstance();o?o.focus():(sn&&(sn.remove(),sn=null),vi&&(vi.remove(),vi=null),Ne(document.documentElement,Bh),(()=>{if(!fs)return;const l=document,u=l.body;u.classList.remove(Ka),u.style.setProperty(Fh,""),l.documentElement.style.setProperty(kh,"")})(),this.emit("destroy"))}static bind(e,n,o){if(!fs)return;let l,u="",f={};if(e===void 0?l=document.body:ri(e)?(l=document.body,u=e,typeof n=="object"&&(f=n||{})):(l=e,ri(n)&&(u=n),typeof o=="object"&&(f=o||{})),!l||!Dt(l))return;u=u||"[data-fancybox]";const p=Se.openers.get(l)||new Map;p.set(u,f),Se.openers.set(l,p),p.size===1&&l.addEventListener("click",Se.fromEvent)}static unbind(e,n){let o,l="";if(ri(e)?(o=document.body,l=e):(o=e,ri(n)&&(l=n)),!o)return;const u=Se.openers.get(o);u&&l&&u.delete(l),l&&u||(Se.openers.delete(o),o.removeEventListener("click",Se.fromEvent))}static destroy(){let e;for(;e=Se.getInstance();)e.destroy();for(const n of Se.openers.keys())n.removeEventListener("click",Se.fromEvent);Se.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let n=e.composedPath()[0];const o=n.closest("[data-fancybox-trigger]");if(o){const N=o.dataset.fancyboxTrigger||"",M=document.querySelectorAll(`[data-fancybox="${N}"]`),O=parseInt(o.dataset.fancyboxIndex||"",10)||0;n=M[O]||n}if(!(n&&n instanceof Element))return;let l,u,f,p;if([...Se.openers].reverse().find(([N,M])=>!(!N.contains(n)||![...M].reverse().find(([O,L])=>{let k=n.closest(O);return!!k&&(l=N,u=O,f=k,p=L,!0)}))),!l||!u||!f)return;p=p||{},e.preventDefault(),n=f;let E=[],m=Lt({},Pl,p);m.event=e,m.triggerEl=n,m.delegate=o;const b=m.groupAll,y=m.groupAttr,S=y&&n?n.getAttribute(`${y}`):"";if((!n||S||b)&&(E=[].slice.call(l.querySelectorAll(u))),n&&!b&&(E=S?E.filter(N=>N.getAttribute(`${y}`)===S):[n]),!E.length)return;const v=Se.getInstance();return v&&v.options.triggerEl&&E.indexOf(v.options.triggerEl)>-1?void 0:(n&&(m.startIndex=E.indexOf(n)),Se.fromNodes(E,m))}static fromSelector(e,n,o){let l=null,u="",f={};if(ri(e)?(l=document.body,u=e,typeof n=="object"&&(f=n||{})):e instanceof HTMLElement&&ri(n)&&(l=e,u=n,typeof o=="object"&&(f=o||{})),!l||!u)return!1;const p=Se.openers.get(l);return!!p&&(f=Lt({},p.get(u)||{},f),!!f&&Se.fromNodes(Array.from(l.querySelectorAll(u)),f))}static fromNodes(e,n){n=Lt({},Pl,n||{});const o=[];for(const l of e){const u=l.dataset||{},f=u[fr]||l.getAttribute(tl)||l.getAttribute("currentSrc")||l.getAttribute(fr)||void 0;let p;const E=n.delegate;let m;E&&o.length===n.startIndex&&(p=E instanceof HTMLImageElement?E:E.querySelector("img:not([aria-hidden])")),p||(p=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),p&&(m=p.currentSrc||p[fr]||void 0,!m&&p.dataset&&(m=p.dataset.lazySrc||p.dataset[fr]||void 0));const b={src:f,triggerEl:l,thumbEl:p,thumbElSrc:m,thumbSrc:m};for(const y in u){let S=u[y]+"";S=S!=="false"&&(S==="true"||S),b[y]=S}o.push(b)}return new Se(o,n)}static getInstance(e){return e?dr.get(e):Array.from(dr.values()).reverse().find(n=>!n.isClosing()&&n)||null}static getSlide(){var e;return((e=Se.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],n={}){return new Se(e,n)}static next(){const e=Se.getInstance();e&&e.next()}static prev(){const e=Se.getInstance();e&&e.prev()}static close(e=!0,...n){if(e)for(const o of dr.values())o.close(...n);else{const o=Se.getInstance();o&&o.close(...n)}}}Object.defineProperty(Se,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Se,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Pl}),Object.defineProperty(Se,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:EA}),Object.defineProperty(Se,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});window.Alpine=F1;F1.start();if(document.getElementById("qr-reader")){let i=function(n,o){console.log(`Scan result: ${n}`,o),document.getElementById("qr-reader-results").innerText=`Mengimbas: ${n}`,window.html5QrCodeScanner&&window.html5QrCodeScanner.clear().catch(u=>console.error("Gagal henti scanner.",u));let l=null;try{const f=new URL(n).pathname.split("/");let p=f.pop()||f.pop();f.includes("items")&&p&&/^\d+$/.test(p)&&(l=p)}catch{}l?(console.log(`QR Code Item ID found: ${l}`),document.getElementById("qr-reader-results").innerText=`Kod QR Item ID ${l} ditemui. Menyemak kebenaran...`,axios.post(`/qr-item-check/${l}`).then(function(u){if(console.log("QR Check Response:",u.data),u.data.status==="allowed"&&u.data.move_url)document.getElementById("qr-reader-results").innerText="Akses dibenarkan. Mengalih ke borang pergerakan...",window.location.href=u.data.move_url;else{let f=u.data.message||"Anda tidak dibenarkan mengakses item ini.";document.getElementById("qr-reader-results").innerText=`Ralat: ${f}`,alert(`Ralat: ${f}`)}}).catch(function(u){console.error("Error during QR item check:",u),document.getElementById("qr-reader-results").innerText="Ralat semasa menyemak item Kod QR.",alert("Ralat semasa menyemak item Kod QR. Sila cuba lagi.")})):(console.log(`Product barcode scanned: ${n}`),document.getElementById("qr-reader-results").innerText=`Kod Bar ${n} ditemui. Menyemak pangkalan data...`,axios.post("/barcode-lookup",{barcode:n}).then(function(u){console.log("Lookup Response:",u.data),u.data.status==="found"&&u.data.show_url?(document.getElementById("qr-reader-results").innerText="Item ditemui! Mengalih...",window.location.href=u.data.show_url):u.data.status==="not_found"&&u.data.create_url?(document.getElementById("qr-reader-results").innerText="Item tidak ditemui. Mengalih ke borang tambah...",window.location.href=u.data.create_url):(document.getElementById("qr-reader-results").innerText="Ralat: Respons tidak dijangka dari server.",alert("Ralat: Respons tidak dijangka dari server."))}).catch(function(u){console.error("Error during barcode lookup:",u),document.getElementById("qr-reader-results").innerText="Ralat semasa menyemak kod bar.",alert("Ralat semasa menyemak kod bar. Sila cuba lagi.")}))},e=function(n){};var zA=i,jA=e;window.html5QrCodeScanner=new Kb("qr-reader",{fps:10,qrbox:(n,o)=>{let l=Math.min(n,o),u=Math.floor(l*.7);return u=Math.max(50,u),{width:u,height:u}}},!1),html5QrCodeScanner.render(i,e)}document.addEventListener("DOMContentLoaded",function(){const i=document.querySelector("#item-table-body");Se.bind("[data-fancybox]",{}),i&&i.addEventListener("click",function(e){const n=e.target.closest("tr.clickable-row");if(n&&!e.target.closest("a, button, form, input, select, .form-check-input, .form-check-label")){const o=n.dataset.href;o&&(window.location.href=o)}})});let br=null;const Hn=document.getElementById("installPwaBanner"),Gh=document.getElementById("installPwaButton"),$h=document.getElementById("dismissPwaBanner");window.addEventListener("beforeinstallprompt",i=>{i.preventDefault(),br=i,Hn&&(console.log("PWA install prompt event deferred. Showing banner."),Hn.style.display="flex",Hn.classList.add("justify-content-between","align-items-center"))});Gh&&Gh.addEventListener("click",async()=>{if(!br){console.log("Deferred install prompt not available.");return}br.prompt();const{outcome:i}=await br.userChoice;console.log(`User choice: ${i}`),br=null,Hn&&(Hn.style.display="none")});$h&&$h.addEventListener("click",()=>{Hn&&(Hn.style.display="none",console.log("PWA install banner dismissed by user."))});window.addEventListener("appinstalled",i=>{console.log("InventoriKu PWA installed successfully!"),br=null,Hn&&(Hn.style.display="none")});
